(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function _0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kf={exports:{}},Pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function jC(){if(Dy)return Pl;Dy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var h in l)h!=="key"&&(a[h]=l[h])}else a=l;return l=a.ref,{$$typeof:t,type:o,key:c,ref:l!==void 0?l:null,props:a}}return Pl.Fragment=e,Pl.jsx=n,Pl.jsxs=n,Pl}var Uy;function eA(){return Uy||(Uy=1,Kf.exports=jC()),Kf.exports}var S=eA(),Qf={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function tA(){if(ky)return Ee;ky=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),E=Symbol.iterator;function A(I){return I===null||typeof I!="object"?null:(I=E&&I[E]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,M={};function q(I,V,W){this.props=I,this.context=V,this.refs=M,this.updater=W||b}q.prototype.isReactComponent={},q.prototype.setState=function(I,V){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,V,"setState")},q.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function Q(){}Q.prototype=q.prototype;function J(I,V,W){this.props=I,this.context=V,this.refs=M,this.updater=W||b}var j=J.prototype=new Q;j.constructor=J,k(j,q.prototype),j.isPureReactComponent=!0;var ae=Array.isArray;function le(){}var X={H:null,A:null,T:null,S:null},Ne=Object.prototype.hasOwnProperty;function ne(I,V,W){var ie=W.ref;return{$$typeof:t,type:I,key:V,ref:ie!==void 0?ie:null,props:W}}function _e(I,V){return ne(I.type,V,I.props)}function Le(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function Xe(I){var V={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(W){return V[W]})}var Oe=/\/+/g;function st(I,V){return typeof I=="object"&&I!==null&&I.key!=null?Xe(""+I.key):V.toString(36)}function It(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(le,le):(I.status="pending",I.then(function(V){I.status==="pending"&&(I.status="fulfilled",I.value=V)},function(V){I.status==="pending"&&(I.status="rejected",I.reason=V)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function H(I,V,W,ie,ye){var Se=typeof I;(Se==="undefined"||Se==="boolean")&&(I=null);var Pe=!1;if(I===null)Pe=!0;else switch(Se){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(I.$$typeof){case t:case e:Pe=!0;break;case _:return Pe=I._init,H(Pe(I._payload),V,W,ie,ye)}}if(Pe)return ye=ye(I),Pe=ie===""?"."+st(I,0):ie,ae(ye)?(W="",Pe!=null&&(W=Pe.replace(Oe,"$&/")+"/"),H(ye,V,W,"",function(Rn){return Rn})):ye!=null&&(Le(ye)&&(ye=_e(ye,W+(ye.key==null||I&&I.key===ye.key?"":(""+ye.key).replace(Oe,"$&/")+"/")+Pe)),V.push(ye)),1;Pe=0;var ht=ie===""?".":ie+":";if(ae(I))for(var nt=0;nt<I.length;nt++)ie=I[nt],Se=ht+st(ie,nt),Pe+=H(ie,V,W,Se,ye);else if(nt=A(I),typeof nt=="function")for(I=nt.call(I),nt=0;!(ie=I.next()).done;)ie=ie.value,Se=ht+st(ie,nt++),Pe+=H(ie,V,W,Se,ye);else if(Se==="object"){if(typeof I.then=="function")return H(It(I),V,W,ie,ye);throw V=String(I),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function $(I,V,W){if(I==null)return I;var ie=[],ye=0;return H(I,ie,"","",function(Se){return V.call(W,Se,ye++)}),ie}function fe(I){if(I._status===-1){var V=I._result;V=V(),V.then(function(W){(I._status===0||I._status===-1)&&(I._status=1,I._result=W)},function(W){(I._status===0||I._status===-1)&&(I._status=2,I._result=W)}),I._status===-1&&(I._status=0,I._result=V)}if(I._status===1)return I._result.default;throw I._result}var ze=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},Ye={map:$,forEach:function(I,V,W){$(I,function(){V.apply(this,arguments)},W)},count:function(I){var V=0;return $(I,function(){V++}),V},toArray:function(I){return $(I,function(V){return V})||[]},only:function(I){if(!Le(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return Ee.Activity=v,Ee.Children=Ye,Ee.Component=q,Ee.Fragment=n,Ee.Profiler=l,Ee.PureComponent=J,Ee.StrictMode=o,Ee.Suspense=g,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(I){return X.H.useMemoCache(I)}},Ee.cache=function(I){return function(){return I.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(I,V,W){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var ie=k({},I.props),ye=I.key;if(V!=null)for(Se in V.key!==void 0&&(ye=""+V.key),V)!Ne.call(V,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&V.ref===void 0||(ie[Se]=V[Se]);var Se=arguments.length-2;if(Se===1)ie.children=W;else if(1<Se){for(var Pe=Array(Se),ht=0;ht<Se;ht++)Pe[ht]=arguments[ht+2];ie.children=Pe}return ne(I.type,ye,ie)},Ee.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:a,_context:I},I},Ee.createElement=function(I,V,W){var ie,ye={},Se=null;if(V!=null)for(ie in V.key!==void 0&&(Se=""+V.key),V)Ne.call(V,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ye[ie]=V[ie]);var Pe=arguments.length-2;if(Pe===1)ye.children=W;else if(1<Pe){for(var ht=Array(Pe),nt=0;nt<Pe;nt++)ht[nt]=arguments[nt+2];ye.children=ht}if(I&&I.defaultProps)for(ie in Pe=I.defaultProps,Pe)ye[ie]===void 0&&(ye[ie]=Pe[ie]);return ne(I,Se,ye)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(I){return{$$typeof:h,render:I}},Ee.isValidElement=Le,Ee.lazy=function(I){return{$$typeof:_,_payload:{_status:-1,_result:I},_init:fe}},Ee.memo=function(I,V){return{$$typeof:m,type:I,compare:V===void 0?null:V}},Ee.startTransition=function(I){var V=X.T,W={};X.T=W;try{var ie=I(),ye=X.S;ye!==null&&ye(W,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(le,ze)}catch(Se){ze(Se)}finally{V!==null&&W.types!==null&&(V.types=W.types),X.T=V}},Ee.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Ee.use=function(I){return X.H.use(I)},Ee.useActionState=function(I,V,W){return X.H.useActionState(I,V,W)},Ee.useCallback=function(I,V){return X.H.useCallback(I,V)},Ee.useContext=function(I){return X.H.useContext(I)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(I,V){return X.H.useDeferredValue(I,V)},Ee.useEffect=function(I,V){return X.H.useEffect(I,V)},Ee.useEffectEvent=function(I){return X.H.useEffectEvent(I)},Ee.useId=function(){return X.H.useId()},Ee.useImperativeHandle=function(I,V,W){return X.H.useImperativeHandle(I,V,W)},Ee.useInsertionEffect=function(I,V){return X.H.useInsertionEffect(I,V)},Ee.useLayoutEffect=function(I,V){return X.H.useLayoutEffect(I,V)},Ee.useMemo=function(I,V){return X.H.useMemo(I,V)},Ee.useOptimistic=function(I,V){return X.H.useOptimistic(I,V)},Ee.useReducer=function(I,V,W){return X.H.useReducer(I,V,W)},Ee.useRef=function(I){return X.H.useRef(I)},Ee.useState=function(I){return X.H.useState(I)},Ee.useSyncExternalStore=function(I,V,W){return X.H.useSyncExternalStore(I,V,W)},Ee.useTransition=function(){return X.H.useTransition()},Ee.version="19.2.3",Ee}var Ly;function Kd(){return Ly||(Ly=1,Qf.exports=tA()),Qf.exports}var ke=Kd();const nA=_0(ke);var Xf={exports:{}},Ol={},$f={exports:{}},Wf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function iA(){return Py||(Py=1,(function(t){function e(H,$){var fe=H.length;H.push($);e:for(;0<fe;){var ze=fe-1>>>1,Ye=H[ze];if(0<l(Ye,$))H[ze]=$,H[fe]=Ye,fe=ze;else break e}}function n(H){return H.length===0?null:H[0]}function o(H){if(H.length===0)return null;var $=H[0],fe=H.pop();if(fe!==$){H[0]=fe;e:for(var ze=0,Ye=H.length,I=Ye>>>1;ze<I;){var V=2*(ze+1)-1,W=H[V],ie=V+1,ye=H[ie];if(0>l(W,fe))ie<Ye&&0>l(ye,W)?(H[ze]=ye,H[ie]=fe,ze=ie):(H[ze]=W,H[V]=fe,ze=V);else if(ie<Ye&&0>l(ye,fe))H[ze]=ye,H[ie]=fe,ze=ie;else break e}}return $}function l(H,$){var fe=H.sortIndex-$.sortIndex;return fe!==0?fe:H.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],m=[],_=1,v=null,E=3,A=!1,b=!1,k=!1,M=!1,q=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function j(H){for(var $=n(m);$!==null;){if($.callback===null)o(m);else if($.startTime<=H)o(m),$.sortIndex=$.expirationTime,e(g,$);else break;$=n(m)}}function ae(H){if(k=!1,j(H),!b)if(n(g)!==null)b=!0,le||(le=!0,Xe());else{var $=n(m);$!==null&&It(ae,$.startTime-H)}}var le=!1,X=-1,Ne=5,ne=-1;function _e(){return M?!0:!(t.unstable_now()-ne<Ne)}function Le(){if(M=!1,le){var H=t.unstable_now();ne=H;var $=!0;try{e:{b=!1,k&&(k=!1,Q(X),X=-1),A=!0;var fe=E;try{t:{for(j(H),v=n(g);v!==null&&!(v.expirationTime>H&&_e());){var ze=v.callback;if(typeof ze=="function"){v.callback=null,E=v.priorityLevel;var Ye=ze(v.expirationTime<=H);if(H=t.unstable_now(),typeof Ye=="function"){v.callback=Ye,j(H),$=!0;break t}v===n(g)&&o(g),j(H)}else o(g);v=n(g)}if(v!==null)$=!0;else{var I=n(m);I!==null&&It(ae,I.startTime-H),$=!1}}break e}finally{v=null,E=fe,A=!1}$=void 0}}finally{$?Xe():le=!1}}}var Xe;if(typeof J=="function")Xe=function(){J(Le)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,st=Oe.port2;Oe.port1.onmessage=Le,Xe=function(){st.postMessage(null)}}else Xe=function(){q(Le,0)};function It(H,$){X=q(function(){H(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(H){switch(E){case 1:case 2:case 3:var $=3;break;default:$=E}var fe=E;E=$;try{return H()}finally{E=fe}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var fe=E;E=H;try{return $()}finally{E=fe}},t.unstable_scheduleCallback=function(H,$,fe){var ze=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ze+fe:ze):fe=ze,H){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=fe+Ye,H={id:_++,callback:$,priorityLevel:H,startTime:fe,expirationTime:Ye,sortIndex:-1},fe>ze?(H.sortIndex=fe,e(m,H),n(g)===null&&H===n(m)&&(k?(Q(X),X=-1):k=!0,It(ae,fe-ze))):(H.sortIndex=Ye,e(g,H),b||A||(b=!0,le||(le=!0,Xe()))),H},t.unstable_shouldYield=_e,t.unstable_wrapCallback=function(H){var $=E;return function(){var fe=E;E=$;try{return H.apply(this,arguments)}finally{E=fe}}}})(Wf)),Wf}var Oy;function oA(){return Oy||(Oy=1,$f.exports=iA()),$f.exports}var Zf={exports:{}},Ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function sA(){if(Hy)return Ht;Hy=1;var t=Kd();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(g,m,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:g,containerInfo:m,implementation:_}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ht.createPortal=function(g,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(g,m,null,_)},Ht.flushSync=function(g){var m=c.T,_=o.p;try{if(c.T=null,o.p=2,g)return g()}finally{c.T=m,o.p=_,o.d.f()}},Ht.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},Ht.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},Ht.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:A}):_==="script"&&o.d.X(g,{crossOrigin:v,integrity:E,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ht.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},Ht.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin);o.d.L(g,_,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ht.preloadModule=function(g,m){if(typeof g=="string")if(m){var _=h(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},Ht.requestFormReset=function(g){o.d.r(g)},Ht.unstable_batchedUpdates=function(g,m){return g(m)},Ht.useFormState=function(g,m,_){return c.H.useFormState(g,m,_)},Ht.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ht.version="19.2.3",Ht}var By;function lA(){if(By)return Zf.exports;By=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zf.exports=sA(),Zf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function rA(){if(Gy)return Ol;Gy=1;var t=oA(),e=Kd(),n=lA();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var s=i,r=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(r=s.return),i=s.return;while(i)}return s.tag===3?r:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(a(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=a(i),s===null)throw Error(o(188));return s!==i?null:i}for(var r=i,u=s;;){var p=r.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===r)return g(p),i;if(y===u)return g(p),s;y=y.sibling}throw Error(o(188))}if(r.return!==u.return)r=p,u=y;else{for(var T=!1,C=p.child;C;){if(C===r){T=!0,r=p,u=y;break}if(C===u){T=!0,u=p,r=y;break}C=C.sibling}if(!T){for(C=y.child;C;){if(C===r){T=!0,r=y,u=p;break}if(C===u){T=!0,u=y,r=p;break}C=C.sibling}if(!T)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?i:s}function _(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=_(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),J=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),_e=Symbol.for("react.memo_cache_sentinel"),Le=Symbol.iterator;function Xe(i){return i===null||typeof i!="object"?null:(i=Le&&i[Le]||i["@@iterator"],typeof i=="function"?i:null)}var Oe=Symbol.for("react.client.reference");function st(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Oe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case q:return"Profiler";case M:return"StrictMode";case ae:return"Suspense";case le:return"SuspenseList";case ne:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case J:return i.displayName||"Context";case Q:return(i._context.displayName||"Context")+".Consumer";case j:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return s=i.displayName||null,s!==null?s:st(i.type)||"Memo";case Ne:s=i._payload,i=i._init;try{return st(i(s))}catch{}}return null}var It=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},ze=[],Ye=-1;function I(i){return{current:i}}function V(i){0>Ye||(i.current=ze[Ye],ze[Ye]=null,Ye--)}function W(i,s){Ye++,ze[Ye]=i.current,i.current=s}var ie=I(null),ye=I(null),Se=I(null),Pe=I(null);function ht(i,s){switch(W(Se,s),W(ye,i),W(ie,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?ty(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=ty(s),i=ny(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(ie),W(ie,i)}function nt(){V(ie),V(ye),V(Se)}function Rn(i){i.memoizedState!==null&&W(Pe,i);var s=ie.current,r=ny(s,i.type);s!==r&&(W(ye,i),W(ie,r))}function Kn(i){ye.current===i&&(V(ie),V(ye)),Pe.current===i&&(V(Pe),Dl._currentValue=fe)}var Po,pr;function pn(i){if(Po===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Po=s&&s[1]||"",pr=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Po+i+pr}var Ys=!1;function ge(i,s){if(!i||Ys)return"";Ys=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(O){var L=O}Reflect.construct(i,[],F)}else{try{F.call()}catch(O){L=O}i.call(F.prototype)}}else{try{throw Error()}catch(O){L=O}(F=i())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(O){if(O&&L&&typeof O.stack=="string")return[O.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],C=y[1];if(T&&C){var N=T.split(`
`),U=C.split(`
`);for(p=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(u===N.length||p===U.length)for(u=N.length-1,p=U.length-1;1<=u&&0<=p&&N[u]!==U[p];)p--;for(;1<=u&&0<=p;u--,p--)if(N[u]!==U[p]){if(u!==1||p!==1)do if(u--,p--,0>p||N[u]!==U[p]){var B=`
`+N[u].replace(" at new "," at ");return i.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",i.displayName)),B}while(1<=u&&0<=p);break}}}finally{Ys=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?pn(r):""}function Vt(i,s){switch(i.tag){case 26:case 27:case 5:return pn(i.type);case 16:return pn("Lazy");case 13:return i.child!==s&&s!==null?pn("Suspense Fallback"):pn("Suspense");case 19:return pn("SuspenseList");case 0:case 15:return ge(i.type,!1);case 11:return ge(i.type.render,!1);case 1:return ge(i.type,!0);case 31:return pn("Activity");default:return""}}function mr(i){try{var s="",r=null;do s+=Vt(i,r),r=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Js=Object.prototype.hasOwnProperty,Oo=t.unstable_scheduleCallback,lo=t.unstable_cancelCallback,Lu=t.unstable_shouldYield,gr=t.unstable_requestPaint,Ft=t.unstable_now,Pu=t.unstable_getCurrentPriorityLevel,yr=t.unstable_ImmediatePriority,_r=t.unstable_UserBlockingPriority,Ho=t.unstable_NormalPriority,vr=t.unstable_LowPriority,Er=t.unstable_IdlePriority,Tr=t.log,Ks=t.unstable_setDisableYieldValue,Ni=null,qt=null;function mn(i){if(typeof Tr=="function"&&Ks(i),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Ni,i)}catch{}}var wt=Math.clz32?Math.clz32:Hu,bi=Math.log,Ou=Math.LN2;function Hu(i){return i>>>=0,i===0?32:31-(bi(i)/Ou|0)|0}var x=256,Y=262144,P=4194304;function z(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Z(i,s,r){var u=i.pendingLanes;if(u===0)return 0;var p=0,y=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~y,u!==0?p=z(u):(T&=C,T!==0?p=z(T):r||(r=C&~i,r!==0&&(p=z(r))))):(C=u&~y,C!==0?p=z(C):T!==0?p=z(T):r||(r=u&~i,r!==0&&(p=z(r)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:p}function de(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function he(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function te(){var i=P;return P<<=1,(P&62914560)===0&&(P=4194304),i}function pe(i){for(var s=[],r=0;31>r;r++)s.push(i);return s}function He(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Tt(i,s,r,u,p,y){var T=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var C=i.entanglements,N=i.expirationTimes,U=i.hiddenUpdates;for(r=T&~r;0<r;){var B=31-wt(r),F=1<<B;C[B]=0,N[B]=-1;var L=U[B];if(L!==null)for(U[B]=null,B=0;B<L.length;B++){var O=L[B];O!==null&&(O.lane&=-536870913)}r&=~F}u!==0&&In(i,u,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(T&~s))}function In(i,s,r){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-wt(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|r&261930}function wn(i,s){var r=i.entangledLanes|=s;for(i=i.entanglements;r;){var u=31-wt(r),p=1<<u;p&s|i[u]&s&&(i[u]|=s),r&=~p}}function Mn(i,s){var r=s&-s;return r=(r&42)!==0?1:Qn(r),(r&(i.suspendedLanes|s))!==0?0:r}function Qn(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Je(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function be(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:xy(i.type))}function $e(i,s){var r=$.p;try{return $.p=i,s()}finally{$.p=r}}var Mt=Math.random().toString(36).slice(2),gt="__reactFiber$"+Mt,Dt="__reactProps$"+Mt,Xn="__reactContainer$"+Mt,Bo="__reactEvents$"+Mt,Sr="__reactListeners$"+Mt,Cr="__reactHandles$"+Mt,Qs="__reactResources$"+Mt,Ri="__reactMarker$"+Mt;function Go(i){delete i[gt],delete i[Dt],delete i[Bo],delete i[Sr],delete i[Cr]}function $n(i){var s=i[gt];if(s)return s;for(var r=i.parentNode;r;){if(s=r[Xn]||r[gt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(i=uy(i);i!==null;){if(r=i[gt])return r;i=uy(i)}return s}i=r,r=i.parentNode}return null}function Wn(i){if(i=i[gt]||i[Xn]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Ii(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function Zn(i){var s=i[Qs];return s||(s=i[Qs]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function se(i){i[Ri]=!0}var zt=new Set,Vo={};function ro(i,s){Fo(i,s),Fo(i+"Capture",s)}function Fo(i,s){for(Vo[i]=s,i=0;i<s.length;i++)zt.add(s[i])}var zT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yh={},Jh={};function YT(i){return Js.call(Jh,i)?!0:Js.call(Yh,i)?!1:zT.test(i)?Jh[i]=!0:(Yh[i]=!0,!1)}function Ar(i,s,r){if(YT(s))if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+r)}}function xr(i,s,r){if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+r)}}function jn(i,s,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(s,r,""+u)}}function gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Kh(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function JT(i,s,r){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){r=""+T,y.call(this,T)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Bu(i){if(!i._valueTracker){var s=Kh(i)?"checked":"value";i._valueTracker=JT(i,s,""+i[s])}}function Qh(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return i&&(u=Kh(i)?i.checked?"true":"false":i.value),i=u,i!==r?(s.setValue(i),!0):!1}function Nr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var KT=/[\n"\\]/g;function yn(i){return i.replace(KT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Gu(i,s,r,u,p,y,T,C){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+gn(s)):i.value!==""+gn(s)&&(i.value=""+gn(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?Vu(i,T,gn(s)):r!=null?Vu(i,T,gn(r)):u!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+gn(C):i.removeAttribute("name")}function Xh(i,s,r,u,p,y,T,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){Bu(i);return}r=r!=null?""+gn(r):"",s=s!=null?""+gn(s):r,C||s===i.value||(i.value=s),i.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),Bu(i)}function Vu(i,s,r){s==="number"&&Nr(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function qo(i,s,r,u){if(i=i.options,s){s={};for(var p=0;p<r.length;p++)s["$"+r[p]]=!0;for(r=0;r<i.length;r++)p=s.hasOwnProperty("$"+i[r].value),i[r].selected!==p&&(i[r].selected=p),p&&u&&(i[r].defaultSelected=!0)}else{for(r=""+gn(r),s=null,p=0;p<i.length;p++){if(i[p].value===r){i[p].selected=!0,u&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function $h(i,s,r){if(s!=null&&(s=""+gn(s),s!==i.value&&(i.value=s),r==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=r!=null?""+gn(r):""}function Wh(i,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(o(92));if(It(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=gn(s),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u),Bu(i)}function zo(i,s){if(s){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=s;return}}i.textContent=s}var QT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zh(i,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,r):typeof r!="number"||r===0||QT.has(s)?s==="float"?i.cssFloat=r:i[s]=(""+r).trim():i[s]=r+"px"}function jh(i,s,r){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&r[p]!==u&&Zh(i,p,u)}else for(var y in s)s.hasOwnProperty(y)&&Zh(i,y,s[y])}function Fu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$T=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function br(i){return $T.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ei(){}var qu=null;function zu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Yo=null,Jo=null;function ep(i){var s=Wn(i);if(s&&(i=s.stateNode)){var r=i[Dt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Gu(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+yn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==i&&u.form===i.form){var p=u[Dt]||null;if(!p)throw Error(o(90));Gu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===i.form&&Qh(u)}break e;case"textarea":$h(i,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&qo(i,!!r.multiple,s,!1)}}}var Yu=!1;function tp(i,s,r){if(Yu)return i(s,r);Yu=!0;try{var u=i(s);return u}finally{if(Yu=!1,(Yo!==null||Jo!==null)&&(pa(),Yo&&(s=Yo,i=Jo,Jo=Yo=null,ep(s),i)))for(s=0;s<i.length;s++)ep(i[s])}}function Xs(i,s){var r=i.stateNode;if(r===null)return null;var u=r[Dt]||null;if(u===null)return null;r=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=!1;if(ti)try{var $s={};Object.defineProperty($s,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",$s,$s),window.removeEventListener("test",$s,$s)}catch{Ju=!1}var wi=null,Ku=null,Rr=null;function np(){if(Rr)return Rr;var i,s=Ku,r=s.length,u,p="value"in wi?wi.value:wi.textContent,y=p.length;for(i=0;i<r&&s[i]===p[i];i++);var T=r-i;for(u=1;u<=T&&s[r-u]===p[y-u];u++);return Rr=p.slice(i,1<u?1-u:void 0)}function Ir(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function wr(){return!0}function ip(){return!1}function Qt(i){function s(r,u,p,y,T){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(r=i[C],this[C]=r?r(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wr:ip,this.isPropagationStopped=ip,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),s}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mr=Qt(ao),Ws=v({},ao,{view:0,detail:0}),WT=Qt(Ws),Qu,Xu,Zs,Dr=v({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zs&&(Zs&&i.type==="mousemove"?(Qu=i.screenX-Zs.screenX,Xu=i.screenY-Zs.screenY):Xu=Qu=0,Zs=i),Qu)},movementY:function(i){return"movementY"in i?i.movementY:Xu}}),op=Qt(Dr),ZT=v({},Dr,{dataTransfer:0}),jT=Qt(ZT),eS=v({},Ws,{relatedTarget:0}),$u=Qt(eS),tS=v({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),nS=Qt(tS),iS=v({},ao,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),oS=Qt(iS),sS=v({},ao,{data:0}),sp=Qt(sS),lS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uS(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=aS[i])?!!s[i]:!1}function Wu(){return uS}var cS=v({},Ws,{key:function(i){if(i.key){var s=lS[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ir(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?rS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wu,charCode:function(i){return i.type==="keypress"?Ir(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ir(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fS=Qt(cS),dS=v({},Dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lp=Qt(dS),hS=v({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wu}),pS=Qt(hS),mS=v({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),gS=Qt(mS),yS=v({},Dr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),_S=Qt(yS),vS=v({},ao,{newState:0,oldState:0}),ES=Qt(vS),TS=[9,13,27,32],Zu=ti&&"CompositionEvent"in window,js=null;ti&&"documentMode"in document&&(js=document.documentMode);var SS=ti&&"TextEvent"in window&&!js,rp=ti&&(!Zu||js&&8<js&&11>=js),ap=" ",up=!1;function cp(i,s){switch(i){case"keyup":return TS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ko=!1;function CS(i,s){switch(i){case"compositionend":return fp(s);case"keypress":return s.which!==32?null:(up=!0,ap);case"textInput":return i=s.data,i===ap&&up?null:i;default:return null}}function AS(i,s){if(Ko)return i==="compositionend"||!Zu&&cp(i,s)?(i=np(),Rr=Ku=wi=null,Ko=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return rp&&s.locale!=="ko"?null:s.data;default:return null}}var xS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!xS[i.type]:s==="textarea"}function hp(i,s,r,u){Yo?Jo?Jo.push(u):Jo=[u]:Yo=u,s=Ta(s,"onChange"),0<s.length&&(r=new Mr("onChange","change",null,r,u),i.push({event:r,listeners:s}))}var el=null,tl=null;function NS(i){Xg(i,0)}function Ur(i){var s=Ii(i);if(Qh(s))return i}function pp(i,s){if(i==="change")return s}var mp=!1;if(ti){var ju;if(ti){var ec="oninput"in document;if(!ec){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),ec=typeof gp.oninput=="function"}ju=ec}else ju=!1;mp=ju&&(!document.documentMode||9<document.documentMode)}function yp(){el&&(el.detachEvent("onpropertychange",_p),tl=el=null)}function _p(i){if(i.propertyName==="value"&&Ur(tl)){var s=[];hp(s,tl,i,zu(i)),tp(NS,s)}}function bS(i,s,r){i==="focusin"?(yp(),el=s,tl=r,el.attachEvent("onpropertychange",_p)):i==="focusout"&&yp()}function RS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ur(tl)}function IS(i,s){if(i==="click")return Ur(s)}function wS(i,s){if(i==="input"||i==="change")return Ur(s)}function MS(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var rn=typeof Object.is=="function"?Object.is:MS;function nl(i,s){if(rn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var r=Object.keys(i),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Js.call(s,p)||!rn(i[p],s[p]))return!1}return!0}function vp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ep(i,s){var r=vp(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=s&&u>=s)return{node:r,offset:s-i};i=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vp(r)}}function Tp(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Tp(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Sp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Nr(i.document);s instanceof i.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)i=s.contentWindow;else break;s=Nr(i.document)}return s}function tc(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var DS=ti&&"documentMode"in document&&11>=document.documentMode,Qo=null,nc=null,il=null,ic=!1;function Cp(i,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ic||Qo==null||Qo!==Nr(u)||(u=Qo,"selectionStart"in u&&tc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),il&&nl(il,u)||(il=u,u=Ta(nc,"onSelect"),0<u.length&&(s=new Mr("onSelect","select",null,s,r),i.push({event:s,listeners:u}),s.target=Qo)))}function uo(i,s){var r={};return r[i.toLowerCase()]=s.toLowerCase(),r["Webkit"+i]="webkit"+s,r["Moz"+i]="moz"+s,r}var Xo={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},oc={},Ap={};ti&&(Ap=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function co(i){if(oc[i])return oc[i];if(!Xo[i])return i;var s=Xo[i],r;for(r in s)if(s.hasOwnProperty(r)&&r in Ap)return oc[i]=s[r];return i}var xp=co("animationend"),Np=co("animationiteration"),bp=co("animationstart"),US=co("transitionrun"),kS=co("transitionstart"),LS=co("transitioncancel"),Rp=co("transitionend"),Ip=new Map,sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sc.push("scrollEnd");function Dn(i,s){Ip.set(i,s),ro(s,[i])}var kr=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},_n=[],$o=0,lc=0;function Lr(){for(var i=$o,s=lc=$o=0;s<i;){var r=_n[s];_n[s++]=null;var u=_n[s];_n[s++]=null;var p=_n[s];_n[s++]=null;var y=_n[s];if(_n[s++]=null,u!==null&&p!==null){var T=u.pending;T===null?p.next=p:(p.next=T.next,T.next=p),u.pending=p}y!==0&&wp(r,p,y)}}function Pr(i,s,r,u){_n[$o++]=i,_n[$o++]=s,_n[$o++]=r,_n[$o++]=u,lc|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function rc(i,s,r,u){return Pr(i,s,r,u),Or(i)}function fo(i,s){return Pr(i,null,null,s),Or(i)}function wp(i,s,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var p=!1,y=i.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&s!==null&&(p=31-wt(r),i=y.hiddenUpdates,u=i[p],u===null?i[p]=[s]:u.push(s),s.lane=r|536870912),y):null}function Or(i){if(50<xl)throw xl=0,yf=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Wo={};function PS(i,s,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(i,s,r,u){return new PS(i,s,r,u)}function ac(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ni(i,s){var r=i.alternate;return r===null?(r=an(i.tag,s,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=s,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,s=i.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function Mp(i,s){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,s=r.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Hr(i,s,r,u,p,y){var T=0;if(u=i,typeof i=="function")ac(i)&&(T=1);else if(typeof i=="string")T=VC(i,r,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ne:return i=an(31,r,s,p),i.elementType=ne,i.lanes=y,i;case k:return ho(r.children,p,y,s);case M:T=8,p|=24;break;case q:return i=an(12,r,s,p|2),i.elementType=q,i.lanes=y,i;case ae:return i=an(13,r,s,p),i.elementType=ae,i.lanes=y,i;case le:return i=an(19,r,s,p),i.elementType=le,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case J:T=10;break e;case Q:T=9;break e;case j:T=11;break e;case X:T=14;break e;case Ne:T=16,u=null;break e}T=29,r=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=an(T,r,s,p),s.elementType=i,s.type=u,s.lanes=y,s}function ho(i,s,r,u){return i=an(7,i,u,s),i.lanes=r,i}function uc(i,s,r){return i=an(6,i,null,s),i.lanes=r,i}function Dp(i){var s=an(18,null,null,0);return s.stateNode=i,s}function cc(i,s,r){return s=an(4,i.children!==null?i.children:[],i.key,s),s.lanes=r,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Up=new WeakMap;function vn(i,s){if(typeof i=="object"&&i!==null){var r=Up.get(i);return r!==void 0?r:(s={value:i,source:s,stack:mr(s)},Up.set(i,s),s)}return{value:i,source:s,stack:mr(s)}}var Zo=[],jo=0,Br=null,ol=0,En=[],Tn=0,Mi=null,Fn=1,qn="";function ii(i,s){Zo[jo++]=ol,Zo[jo++]=Br,Br=i,ol=s}function kp(i,s,r){En[Tn++]=Fn,En[Tn++]=qn,En[Tn++]=Mi,Mi=i;var u=Fn;i=qn;var p=32-wt(u)-1;u&=~(1<<p),r+=1;var y=32-wt(s)+p;if(30<y){var T=p-p%5;y=(u&(1<<T)-1).toString(32),u>>=T,p-=T,Fn=1<<32-wt(s)+p|r<<p|u,qn=y+i}else Fn=1<<y|r<<p|u,qn=i}function fc(i){i.return!==null&&(ii(i,1),kp(i,1,0))}function dc(i){for(;i===Br;)Br=Zo[--jo],Zo[jo]=null,ol=Zo[--jo],Zo[jo]=null;for(;i===Mi;)Mi=En[--Tn],En[Tn]=null,qn=En[--Tn],En[Tn]=null,Fn=En[--Tn],En[Tn]=null}function Lp(i,s){En[Tn++]=Fn,En[Tn++]=qn,En[Tn++]=Mi,Fn=s.id,qn=s.overflow,Mi=i}var Ut=null,lt=null,Ue=!1,Di=null,Sn=!1,hc=Error(o(519));function Ui(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sl(vn(s,i)),hc}function Pp(i){var s=i.stateNode,r=i.type,u=i.memoizedProps;switch(s[gt]=i,s[Dt]=u,r){case"dialog":Ie("cancel",s),Ie("close",s);break;case"iframe":case"object":case"embed":Ie("load",s);break;case"video":case"audio":for(r=0;r<bl.length;r++)Ie(bl[r],s);break;case"source":Ie("error",s);break;case"img":case"image":case"link":Ie("error",s),Ie("load",s);break;case"details":Ie("toggle",s);break;case"input":Ie("invalid",s),Xh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ie("invalid",s);break;case"textarea":Ie("invalid",s),Wh(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||jg(s.textContent,r)?(u.popover!=null&&(Ie("beforetoggle",s),Ie("toggle",s)),u.onScroll!=null&&Ie("scroll",s),u.onScrollEnd!=null&&Ie("scrollend",s),u.onClick!=null&&(s.onclick=ei),s=!0):s=!1,s||Ui(i,!0)}function Op(i){for(Ut=i.return;Ut;)switch(Ut.tag){case 5:case 31:case 13:Sn=!1;return;case 27:case 3:Sn=!0;return;default:Ut=Ut.return}}function es(i){if(i!==Ut)return!1;if(!Ue)return Op(i),Ue=!0,!1;var s=i.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||Df(i.type,i.memoizedProps)),r=!r),r&&lt&&Ui(i),Op(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));lt=ay(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));lt=ay(i)}else s===27?(s=lt,Ki(i.type)?(i=Of,Of=null,lt=i):lt=s):lt=Ut?An(i.stateNode.nextSibling):null;return!0}function po(){lt=Ut=null,Ue=!1}function pc(){var i=Di;return i!==null&&(Zt===null?Zt=i:Zt.push.apply(Zt,i),Di=null),i}function sl(i){Di===null?Di=[i]:Di.push(i)}var mc=I(null),mo=null,oi=null;function ki(i,s,r){W(mc,s._currentValue),s._currentValue=r}function si(i){i._currentValue=mc.current,V(mc)}function gc(i,s,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===r)break;i=i.return}}function yc(i,s,r,u){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=p;for(var N=0;N<s.length;N++)if(C.context===s[N]){y.lanes|=r,C=y.alternate,C!==null&&(C.lanes|=r),gc(y.return,r,i),u||(T=null);break e}y=C.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(o(341));T.lanes|=r,y=T.alternate,y!==null&&(y.lanes|=r),gc(T,r,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function ts(i,s,r,u){i=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var C=p.type;rn(p.pendingProps.value,T.value)||(i!==null?i.push(C):i=[C])}}else if(p===Pe.current){if(T=p.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Dl):i=[Dl])}p=p.return}i!==null&&yc(s,i,r,u),s.flags|=262144}function Gr(i){for(i=i.firstContext;i!==null;){if(!rn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function go(i){mo=i,oi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function kt(i){return Hp(mo,i)}function Vr(i,s){return mo===null&&go(i),Hp(i,s)}function Hp(i,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},oi===null){if(i===null)throw Error(o(308));oi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else oi=oi.next=s;return r}var OS=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(r){return r()})}},HS=t.unstable_scheduleCallback,BS=t.unstable_NormalPriority,yt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _c(){return{controller:new OS,data:new Map,refCount:0}}function ll(i){i.refCount--,i.refCount===0&&HS(BS,function(){i.controller.abort()})}var rl=null,vc=0,ns=0,is=null;function GS(i,s){if(rl===null){var r=rl=[];vc=0,ns=Cf(),is={status:"pending",value:void 0,then:function(u){r.push(u)}}}return vc++,s.then(Bp,Bp),s}function Bp(){if(--vc===0&&rl!==null){is!==null&&(is.status="fulfilled");var i=rl;rl=null,ns=0,is=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function VS(i,s){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<r.length;p++)(0,r[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var Gp=H.S;H.S=function(i,s){Cg=Ft(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&GS(i,s),Gp!==null&&Gp(i,s)};var yo=I(null);function Ec(){var i=yo.current;return i!==null?i:et.pooledCache}function Fr(i,s){s===null?W(yo,yo.current):W(yo,s.pool)}function Vp(){var i=Ec();return i===null?null:{parent:yt._currentValue,pool:i}}var os=Error(o(460)),Tc=Error(o(474)),qr=Error(o(542)),zr={then:function(){}};function Fp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function qp(i,s,r){switch(r=i[r],r===void 0?i.push(s):r!==s&&(s.then(ei,ei),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Yp(i),i;default:if(typeof s.status=="string")s.then(ei,ei);else{if(i=et,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Yp(i),i}throw vo=s,os}}function _o(i){try{var s=i._init;return s(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(vo=r,os):r}}var vo=null;function zp(){if(vo===null)throw Error(o(459));var i=vo;return vo=null,i}function Yp(i){if(i===os||i===qr)throw Error(o(483))}var ss=null,al=0;function Yr(i){var s=al;return al+=1,ss===null&&(ss=[]),qp(ss,i,s)}function ul(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Jr(i,s){throw s.$$typeof===E?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Jp(i){function s(w,R){if(i){var D=w.deletions;D===null?(w.deletions=[R],w.flags|=16):D.push(R)}}function r(w,R){if(!i)return null;for(;R!==null;)s(w,R),R=R.sibling;return null}function u(w){for(var R=new Map;w!==null;)w.key!==null?R.set(w.key,w):R.set(w.index,w),w=w.sibling;return R}function p(w,R){return w=ni(w,R),w.index=0,w.sibling=null,w}function y(w,R,D){return w.index=D,i?(D=w.alternate,D!==null?(D=D.index,D<R?(w.flags|=67108866,R):D):(w.flags|=67108866,R)):(w.flags|=1048576,R)}function T(w){return i&&w.alternate===null&&(w.flags|=67108866),w}function C(w,R,D,G){return R===null||R.tag!==6?(R=uc(D,w.mode,G),R.return=w,R):(R=p(R,D),R.return=w,R)}function N(w,R,D,G){var ue=D.type;return ue===k?B(w,R,D.props.children,G,D.key):R!==null&&(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Ne&&_o(ue)===R.type)?(R=p(R,D.props),ul(R,D),R.return=w,R):(R=Hr(D.type,D.key,D.props,null,w.mode,G),ul(R,D),R.return=w,R)}function U(w,R,D,G){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=cc(D,w.mode,G),R.return=w,R):(R=p(R,D.children||[]),R.return=w,R)}function B(w,R,D,G,ue){return R===null||R.tag!==7?(R=ho(D,w.mode,G,ue),R.return=w,R):(R=p(R,D),R.return=w,R)}function F(w,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=uc(""+R,w.mode,D),R.return=w,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case A:return D=Hr(R.type,R.key,R.props,null,w.mode,D),ul(D,R),D.return=w,D;case b:return R=cc(R,w.mode,D),R.return=w,R;case Ne:return R=_o(R),F(w,R,D)}if(It(R)||Xe(R))return R=ho(R,w.mode,D,null),R.return=w,R;if(typeof R.then=="function")return F(w,Yr(R),D);if(R.$$typeof===J)return F(w,Vr(w,R),D);Jr(w,R)}return null}function L(w,R,D,G){var ue=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ue!==null?null:C(w,R,""+D,G);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return D.key===ue?N(w,R,D,G):null;case b:return D.key===ue?U(w,R,D,G):null;case Ne:return D=_o(D),L(w,R,D,G)}if(It(D)||Xe(D))return ue!==null?null:B(w,R,D,G,null);if(typeof D.then=="function")return L(w,R,Yr(D),G);if(D.$$typeof===J)return L(w,R,Vr(w,D),G);Jr(w,D)}return null}function O(w,R,D,G,ue){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return w=w.get(D)||null,C(R,w,""+G,ue);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return w=w.get(G.key===null?D:G.key)||null,N(R,w,G,ue);case b:return w=w.get(G.key===null?D:G.key)||null,U(R,w,G,ue);case Ne:return G=_o(G),O(w,R,D,G,ue)}if(It(G)||Xe(G))return w=w.get(D)||null,B(R,w,G,ue,null);if(typeof G.then=="function")return O(w,R,D,Yr(G),ue);if(G.$$typeof===J)return O(w,R,D,Vr(R,G),ue);Jr(R,G)}return null}function oe(w,R,D,G){for(var ue=null,Be=null,re=R,Ce=R=0,De=null;re!==null&&Ce<D.length;Ce++){re.index>Ce?(De=re,re=null):De=re.sibling;var Ge=L(w,re,D[Ce],G);if(Ge===null){re===null&&(re=De);break}i&&re&&Ge.alternate===null&&s(w,re),R=y(Ge,R,Ce),Be===null?ue=Ge:Be.sibling=Ge,Be=Ge,re=De}if(Ce===D.length)return r(w,re),Ue&&ii(w,Ce),ue;if(re===null){for(;Ce<D.length;Ce++)re=F(w,D[Ce],G),re!==null&&(R=y(re,R,Ce),Be===null?ue=re:Be.sibling=re,Be=re);return Ue&&ii(w,Ce),ue}for(re=u(re);Ce<D.length;Ce++)De=O(re,w,Ce,D[Ce],G),De!==null&&(i&&De.alternate!==null&&re.delete(De.key===null?Ce:De.key),R=y(De,R,Ce),Be===null?ue=De:Be.sibling=De,Be=De);return i&&re.forEach(function(Zi){return s(w,Zi)}),Ue&&ii(w,Ce),ue}function ce(w,R,D,G){if(D==null)throw Error(o(151));for(var ue=null,Be=null,re=R,Ce=R=0,De=null,Ge=D.next();re!==null&&!Ge.done;Ce++,Ge=D.next()){re.index>Ce?(De=re,re=null):De=re.sibling;var Zi=L(w,re,Ge.value,G);if(Zi===null){re===null&&(re=De);break}i&&re&&Zi.alternate===null&&s(w,re),R=y(Zi,R,Ce),Be===null?ue=Zi:Be.sibling=Zi,Be=Zi,re=De}if(Ge.done)return r(w,re),Ue&&ii(w,Ce),ue;if(re===null){for(;!Ge.done;Ce++,Ge=D.next())Ge=F(w,Ge.value,G),Ge!==null&&(R=y(Ge,R,Ce),Be===null?ue=Ge:Be.sibling=Ge,Be=Ge);return Ue&&ii(w,Ce),ue}for(re=u(re);!Ge.done;Ce++,Ge=D.next())Ge=O(re,w,Ce,Ge.value,G),Ge!==null&&(i&&Ge.alternate!==null&&re.delete(Ge.key===null?Ce:Ge.key),R=y(Ge,R,Ce),Be===null?ue=Ge:Be.sibling=Ge,Be=Ge);return i&&re.forEach(function(ZC){return s(w,ZC)}),Ue&&ii(w,Ce),ue}function je(w,R,D,G){if(typeof D=="object"&&D!==null&&D.type===k&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case A:e:{for(var ue=D.key;R!==null;){if(R.key===ue){if(ue=D.type,ue===k){if(R.tag===7){r(w,R.sibling),G=p(R,D.props.children),G.return=w,w=G;break e}}else if(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Ne&&_o(ue)===R.type){r(w,R.sibling),G=p(R,D.props),ul(G,D),G.return=w,w=G;break e}r(w,R);break}else s(w,R);R=R.sibling}D.type===k?(G=ho(D.props.children,w.mode,G,D.key),G.return=w,w=G):(G=Hr(D.type,D.key,D.props,null,w.mode,G),ul(G,D),G.return=w,w=G)}return T(w);case b:e:{for(ue=D.key;R!==null;){if(R.key===ue)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){r(w,R.sibling),G=p(R,D.children||[]),G.return=w,w=G;break e}else{r(w,R);break}else s(w,R);R=R.sibling}G=cc(D,w.mode,G),G.return=w,w=G}return T(w);case Ne:return D=_o(D),je(w,R,D,G)}if(It(D))return oe(w,R,D,G);if(Xe(D)){if(ue=Xe(D),typeof ue!="function")throw Error(o(150));return D=ue.call(D),ce(w,R,D,G)}if(typeof D.then=="function")return je(w,R,Yr(D),G);if(D.$$typeof===J)return je(w,R,Vr(w,D),G);Jr(w,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,R!==null&&R.tag===6?(r(w,R.sibling),G=p(R,D),G.return=w,w=G):(r(w,R),G=uc(D,w.mode,G),G.return=w,w=G),T(w)):r(w,R)}return function(w,R,D,G){try{al=0;var ue=je(w,R,D,G);return ss=null,ue}catch(re){if(re===os||re===qr)throw re;var Be=an(29,re,null,w.mode);return Be.lanes=G,Be.return=w,Be}finally{}}}var Eo=Jp(!0),Kp=Jp(!1),Li=!1;function Sc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cc(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Pi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Oi(i,s,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Fe&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=Or(i),wp(i,null,r),s}return Pr(i,u,s,r),Or(i)}function cl(i,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,r|=u,s.lanes=r,wn(i,r)}}function Ac(i,s){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,r=r.next}while(r!==null);y===null?p=y=s:y=y.next=s}else p=y=s;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=s:i.next=s,r.lastBaseUpdate=s}var xc=!1;function fl(){if(xc){var i=is;if(i!==null)throw i}}function dl(i,s,r,u){xc=!1;var p=i.updateQueue;Li=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var N=C,U=N.next;N.next=null,T===null?y=U:T.next=U,T=N;var B=i.alternate;B!==null&&(B=B.updateQueue,C=B.lastBaseUpdate,C!==T&&(C===null?B.firstBaseUpdate=U:C.next=U,B.lastBaseUpdate=N))}if(y!==null){var F=p.baseState;T=0,B=U=N=null,C=y;do{var L=C.lane&-536870913,O=L!==C.lane;if(O?(Me&L)===L:(u&L)===L){L!==0&&L===ns&&(xc=!0),B!==null&&(B=B.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var oe=i,ce=C;L=s;var je=r;switch(ce.tag){case 1:if(oe=ce.payload,typeof oe=="function"){F=oe.call(je,F,L);break e}F=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ce.payload,L=typeof oe=="function"?oe.call(je,F,L):oe,L==null)break e;F=v({},F,L);break e;case 2:Li=!0}}L=C.callback,L!==null&&(i.flags|=64,O&&(i.flags|=8192),O=p.callbacks,O===null?p.callbacks=[L]:O.push(L))}else O={lane:L,tag:C.tag,payload:C.payload,callback:C.callback,next:null},B===null?(U=B=O,N=F):B=B.next=O,T|=L;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;O=C,C=O.next,O.next=null,p.lastBaseUpdate=O,p.shared.pending=null}}while(!0);B===null&&(N=F),p.baseState=N,p.firstBaseUpdate=U,p.lastBaseUpdate=B,y===null&&(p.shared.lanes=0),Fi|=T,i.lanes=T,i.memoizedState=F}}function Qp(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function Xp(i,s){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)Qp(r[i],s)}var ls=I(null),Kr=I(0);function $p(i,s){i=pi,W(Kr,i),W(ls,s),pi=i|s.baseLanes}function Nc(){W(Kr,pi),W(ls,ls.current)}function bc(){pi=Kr.current,V(ls),V(Kr)}var un=I(null),Cn=null;function Hi(i){var s=i.alternate;W(pt,pt.current&1),W(un,i),Cn===null&&(s===null||ls.current!==null||s.memoizedState!==null)&&(Cn=i)}function Rc(i){W(pt,pt.current),W(un,i),Cn===null&&(Cn=i)}function Wp(i){i.tag===22?(W(pt,pt.current),W(un,i),Cn===null&&(Cn=i)):Bi()}function Bi(){W(pt,pt.current),W(un,un.current)}function cn(i){V(un),Cn===i&&(Cn=null),V(pt)}var pt=I(0);function Qr(i){for(var s=i;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Lf(r)||Pf(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var li=0,Te=null,We=null,_t=null,Xr=!1,rs=!1,To=!1,$r=0,hl=0,as=null,FS=0;function ct(){throw Error(o(321))}function Ic(i,s){if(s===null)return!1;for(var r=0;r<s.length&&r<i.length;r++)if(!rn(i[r],s[r]))return!1;return!0}function wc(i,s,r,u,p,y){return li=y,Te=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=i===null||i.memoizedState===null?km:Yc,To=!1,y=r(u,p),To=!1,rs&&(y=jp(s,r,u,p)),Zp(i),y}function Zp(i){H.H=gl;var s=We!==null&&We.next!==null;if(li=0,_t=We=Te=null,Xr=!1,hl=0,as=null,s)throw Error(o(300));i===null||vt||(i=i.dependencies,i!==null&&Gr(i)&&(vt=!0))}function jp(i,s,r,u){Te=i;var p=0;do{if(rs&&(as=null),hl=0,rs=!1,25<=p)throw Error(o(301));if(p+=1,_t=We=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=Lm,y=s(r,u)}while(rs);return y}function qS(){var i=H.H,s=i.useState()[0];return s=typeof s.then=="function"?pl(s):s,i=i.useState()[0],(We!==null?We.memoizedState:null)!==i&&(Te.flags|=1024),s}function Mc(){var i=$r!==0;return $r=0,i}function Dc(i,s,r){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~r}function Uc(i){if(Xr){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Xr=!1}li=0,_t=We=Te=null,rs=!1,hl=$r=0,as=null}function Yt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Te.memoizedState=_t=i:_t=_t.next=i,_t}function mt(){if(We===null){var i=Te.alternate;i=i!==null?i.memoizedState:null}else i=We.next;var s=_t===null?Te.memoizedState:_t.next;if(s!==null)_t=s,We=i;else{if(i===null)throw Te.alternate===null?Error(o(467)):Error(o(310));We=i,i={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},_t===null?Te.memoizedState=_t=i:_t=_t.next=i}return _t}function Wr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(i){var s=hl;return hl+=1,as===null&&(as=[]),i=qp(as,i,s),s=Te,(_t===null?s.memoizedState:_t.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?km:Yc),i}function Zr(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return pl(i);if(i.$$typeof===J)return kt(i)}throw Error(o(438,String(i)))}function kc(i){var s=null,r=Te.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=Te.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Wr(),Te.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(i),u=0;u<i;u++)r[u]=_e;return s.index++,r}function ri(i,s){return typeof s=="function"?s(i):s}function jr(i){var s=mt();return Lc(s,We,i)}function Lc(i,s,r){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var p=i.baseQueue,y=u.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}s.baseQueue=p=y,u.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{s=p.next;var C=T=null,N=null,U=s,B=!1;do{var F=U.lane&-536870913;if(F!==U.lane?(Me&F)===F:(li&F)===F){var L=U.revertLane;if(L===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),F===ns&&(B=!0);else if((li&L)===L){U=U.next,L===ns&&(B=!0);continue}else F={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(C=N=F,T=y):N=N.next=F,Te.lanes|=L,Fi|=L;F=U.action,To&&r(y,F),y=U.hasEagerState?U.eagerState:r(y,F)}else L={lane:F,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(C=N=L,T=y):N=N.next=L,Te.lanes|=F,Fi|=F;U=U.next}while(U!==null&&U!==s);if(N===null?T=y:N.next=C,!rn(y,i.memoizedState)&&(vt=!0,B&&(r=is,r!==null)))throw r;i.memoizedState=y,i.baseState=T,i.baseQueue=N,u.lastRenderedState=y}return p===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Pc(i){var s=mt(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=i;var u=r.dispatch,p=r.pending,y=s.memoizedState;if(p!==null){r.pending=null;var T=p=p.next;do y=i(y,T.action),T=T.next;while(T!==p);rn(y,s.memoizedState)||(vt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,u]}function em(i,s,r){var u=Te,p=mt(),y=Ue;if(y){if(r===void 0)throw Error(o(407));r=r()}else r=s();var T=!rn((We||p).memoizedState,r);if(T&&(p.memoizedState=r,vt=!0),p=p.queue,Bc(im.bind(null,u,p,i),[i]),p.getSnapshot!==s||T||_t!==null&&_t.memoizedState.tag&1){if(u.flags|=2048,us(9,{destroy:void 0},nm.bind(null,u,p,r,s),null),et===null)throw Error(o(349));y||(li&127)!==0||tm(u,s,r)}return r}function tm(i,s,r){i.flags|=16384,i={getSnapshot:s,value:r},s=Te.updateQueue,s===null?(s=Wr(),Te.updateQueue=s,s.stores=[i]):(r=s.stores,r===null?s.stores=[i]:r.push(i))}function nm(i,s,r,u){s.value=r,s.getSnapshot=u,om(s)&&sm(i)}function im(i,s,r){return r(function(){om(s)&&sm(i)})}function om(i){var s=i.getSnapshot;i=i.value;try{var r=s();return!rn(i,r)}catch{return!0}}function sm(i){var s=fo(i,2);s!==null&&jt(s,i,2)}function Oc(i){var s=Yt();if(typeof i=="function"){var r=i;if(i=r(),To){mn(!0);try{r()}finally{mn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:i},s}function lm(i,s,r,u){return i.baseState=r,Lc(i,We,typeof u=="function"?u:ri)}function zS(i,s,r,u,p){if(na(i))throw Error(o(485));if(i=s.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};H.T!==null?r(!0):y.isTransition=!1,u(y),r=s.pending,r===null?(y.next=s.pending=y,rm(s,y)):(y.next=r.next,s.pending=r.next=y)}}function rm(i,s){var r=s.action,u=s.payload,p=i.state;if(s.isTransition){var y=H.T,T={};H.T=T;try{var C=r(p,u),N=H.S;N!==null&&N(T,C),am(i,s,C)}catch(U){Hc(i,s,U)}finally{y!==null&&T.types!==null&&(y.types=T.types),H.T=y}}else try{y=r(p,u),am(i,s,y)}catch(U){Hc(i,s,U)}}function am(i,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){um(i,s,u)},function(u){return Hc(i,s,u)}):um(i,s,r)}function um(i,s,r){s.status="fulfilled",s.value=r,cm(s),i.state=r,s=i.pending,s!==null&&(r=s.next,r===s?i.pending=null:(r=r.next,s.next=r,rm(i,r)))}function Hc(i,s,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,cm(s),s=s.next;while(s!==u)}i.action=null}function cm(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function fm(i,s){return s}function dm(i,s){if(Ue){var r=et.formState;if(r!==null){e:{var u=Te;if(Ue){if(lt){t:{for(var p=lt,y=Sn;p.nodeType!==8;){if(!y){p=null;break t}if(p=An(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){lt=An(p.nextSibling),u=p.data==="F!";break e}}Ui(u)}u=!1}u&&(s=r[0])}}return r=Yt(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fm,lastRenderedState:s},r.queue=u,r=Mm.bind(null,Te,u),u.dispatch=r,u=Oc(!1),y=zc.bind(null,Te,!1,u.queue),u=Yt(),p={state:s,dispatch:null,action:i,pending:null},u.queue=p,r=zS.bind(null,Te,p,y,r),p.dispatch=r,u.memoizedState=i,[s,r,!1]}function hm(i){var s=mt();return pm(s,We,i)}function pm(i,s,r){if(s=Lc(i,s,fm)[0],i=jr(ri)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=pl(s)}catch(T){throw T===os?qr:T}else u=s;s=mt();var p=s.queue,y=p.dispatch;return r!==s.memoizedState&&(Te.flags|=2048,us(9,{destroy:void 0},YS.bind(null,p,r),null)),[u,y,i]}function YS(i,s){i.action=s}function mm(i){var s=mt(),r=We;if(r!==null)return pm(s,r,i);mt(),s=s.memoizedState,r=mt();var u=r.queue.dispatch;return r.memoizedState=i,[s,u,!1]}function us(i,s,r,u){return i={tag:i,create:r,deps:u,inst:s,next:null},s=Te.updateQueue,s===null&&(s=Wr(),Te.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,s.lastEffect=i),i}function gm(){return mt().memoizedState}function ea(i,s,r,u){var p=Yt();Te.flags|=i,p.memoizedState=us(1|s,{destroy:void 0},r,u===void 0?null:u)}function ta(i,s,r,u){var p=mt();u=u===void 0?null:u;var y=p.memoizedState.inst;We!==null&&u!==null&&Ic(u,We.memoizedState.deps)?p.memoizedState=us(s,y,r,u):(Te.flags|=i,p.memoizedState=us(1|s,y,r,u))}function ym(i,s){ea(8390656,8,i,s)}function Bc(i,s){ta(2048,8,i,s)}function JS(i){Te.flags|=4;var s=Te.updateQueue;if(s===null)s=Wr(),Te.updateQueue=s,s.events=[i];else{var r=s.events;r===null?s.events=[i]:r.push(i)}}function _m(i){var s=mt().memoizedState;return JS({ref:s,nextImpl:i}),function(){if((Fe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function vm(i,s){return ta(4,2,i,s)}function Em(i,s){return ta(4,4,i,s)}function Tm(i,s){if(typeof s=="function"){i=i();var r=s(i);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Sm(i,s,r){r=r!=null?r.concat([i]):null,ta(4,4,Tm.bind(null,s,i),r)}function Gc(){}function Cm(i,s){var r=mt();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&Ic(s,u[1])?u[0]:(r.memoizedState=[i,s],i)}function Am(i,s){var r=mt();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&Ic(s,u[1]))return u[0];if(u=i(),To){mn(!0);try{i()}finally{mn(!1)}}return r.memoizedState=[u,s],u}function Vc(i,s,r){return r===void 0||(li&1073741824)!==0&&(Me&261930)===0?i.memoizedState=s:(i.memoizedState=r,i=xg(),Te.lanes|=i,Fi|=i,r)}function xm(i,s,r,u){return rn(r,s)?r:ls.current!==null?(i=Vc(i,r,u),rn(i,s)||(vt=!0),i):(li&42)===0||(li&1073741824)!==0&&(Me&261930)===0?(vt=!0,i.memoizedState=r):(i=xg(),Te.lanes|=i,Fi|=i,s)}function Nm(i,s,r,u,p){var y=$.p;$.p=y!==0&&8>y?y:8;var T=H.T,C={};H.T=C,zc(i,!1,s,r);try{var N=p(),U=H.S;if(U!==null&&U(C,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var B=VS(N,u);ml(i,s,B,hn(i))}else ml(i,s,u,hn(i))}catch(F){ml(i,s,{then:function(){},status:"rejected",reason:F},hn())}finally{$.p=y,T!==null&&C.types!==null&&(T.types=C.types),H.T=T}}function KS(){}function Fc(i,s,r,u){if(i.tag!==5)throw Error(o(476));var p=bm(i).queue;Nm(i,p,s,fe,r===null?KS:function(){return Rm(i),r(u)})}function bm(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:fe},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:r},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Rm(i){var s=bm(i);s.next===null&&(s=i.alternate.memoizedState),ml(i,s.next.queue,{},hn())}function qc(){return kt(Dl)}function Im(){return mt().memoizedState}function wm(){return mt().memoizedState}function QS(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var r=hn();i=Pi(r);var u=Oi(s,i,r);u!==null&&(jt(u,s,r),cl(u,s,r)),s={cache:_c()},i.payload=s;return}s=s.return}}function XS(i,s,r){var u=hn();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},na(i)?Dm(s,r):(r=rc(i,s,r,u),r!==null&&(jt(r,i,u),Um(r,s,u)))}function Mm(i,s,r){var u=hn();ml(i,s,r,u)}function ml(i,s,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(na(i))Dm(s,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,C=y(T,r);if(p.hasEagerState=!0,p.eagerState=C,rn(C,T))return Pr(i,s,p,0),et===null&&Lr(),!1}catch{}finally{}if(r=rc(i,s,p,u),r!==null)return jt(r,i,u),Um(r,s,u),!0}return!1}function zc(i,s,r,u){if(u={lane:2,revertLane:Cf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},na(i)){if(s)throw Error(o(479))}else s=rc(i,r,u,2),s!==null&&jt(s,i,2)}function na(i){var s=i.alternate;return i===Te||s!==null&&s===Te}function Dm(i,s){rs=Xr=!0;var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}function Um(i,s,r){if((r&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,r|=u,s.lanes=r,wn(i,r)}}var gl={readContext:kt,use:Zr,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};gl.useEffectEvent=ct;var km={readContext:kt,use:Zr,useCallback:function(i,s){return Yt().memoizedState=[i,s===void 0?null:s],i},useContext:kt,useEffect:ym,useImperativeHandle:function(i,s,r){r=r!=null?r.concat([i]):null,ea(4194308,4,Tm.bind(null,s,i),r)},useLayoutEffect:function(i,s){return ea(4194308,4,i,s)},useInsertionEffect:function(i,s){ea(4,2,i,s)},useMemo:function(i,s){var r=Yt();s=s===void 0?null:s;var u=i();if(To){mn(!0);try{i()}finally{mn(!1)}}return r.memoizedState=[u,s],u},useReducer:function(i,s,r){var u=Yt();if(r!==void 0){var p=r(s);if(To){mn(!0);try{r(s)}finally{mn(!1)}}}else p=s;return u.memoizedState=u.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},u.queue=i,i=i.dispatch=XS.bind(null,Te,i),[u.memoizedState,i]},useRef:function(i){var s=Yt();return i={current:i},s.memoizedState=i},useState:function(i){i=Oc(i);var s=i.queue,r=Mm.bind(null,Te,s);return s.dispatch=r,[i.memoizedState,r]},useDebugValue:Gc,useDeferredValue:function(i,s){var r=Yt();return Vc(r,i,s)},useTransition:function(){var i=Oc(!1);return i=Nm.bind(null,Te,i.queue,!0,!1),Yt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,r){var u=Te,p=Yt();if(Ue){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),et===null)throw Error(o(349));(Me&127)!==0||tm(u,s,r)}p.memoizedState=r;var y={value:r,getSnapshot:s};return p.queue=y,ym(im.bind(null,u,y,i),[i]),u.flags|=2048,us(9,{destroy:void 0},nm.bind(null,u,y,r,s),null),r},useId:function(){var i=Yt(),s=et.identifierPrefix;if(Ue){var r=qn,u=Fn;r=(u&~(1<<32-wt(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=$r++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=FS++,s="_"+s+"r_"+r.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:qc,useFormState:dm,useActionState:dm,useOptimistic:function(i){var s=Yt();s.memoizedState=s.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=zc.bind(null,Te,!0,r),r.dispatch=s,[i,s]},useMemoCache:kc,useCacheRefresh:function(){return Yt().memoizedState=QS.bind(null,Te)},useEffectEvent:function(i){var s=Yt(),r={impl:i};return s.memoizedState=r,function(){if((Fe&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},Yc={readContext:kt,use:Zr,useCallback:Cm,useContext:kt,useEffect:Bc,useImperativeHandle:Sm,useInsertionEffect:vm,useLayoutEffect:Em,useMemo:Am,useReducer:jr,useRef:gm,useState:function(){return jr(ri)},useDebugValue:Gc,useDeferredValue:function(i,s){var r=mt();return xm(r,We.memoizedState,i,s)},useTransition:function(){var i=jr(ri)[0],s=mt().memoizedState;return[typeof i=="boolean"?i:pl(i),s]},useSyncExternalStore:em,useId:Im,useHostTransitionStatus:qc,useFormState:hm,useActionState:hm,useOptimistic:function(i,s){var r=mt();return lm(r,We,i,s)},useMemoCache:kc,useCacheRefresh:wm};Yc.useEffectEvent=_m;var Lm={readContext:kt,use:Zr,useCallback:Cm,useContext:kt,useEffect:Bc,useImperativeHandle:Sm,useInsertionEffect:vm,useLayoutEffect:Em,useMemo:Am,useReducer:Pc,useRef:gm,useState:function(){return Pc(ri)},useDebugValue:Gc,useDeferredValue:function(i,s){var r=mt();return We===null?Vc(r,i,s):xm(r,We.memoizedState,i,s)},useTransition:function(){var i=Pc(ri)[0],s=mt().memoizedState;return[typeof i=="boolean"?i:pl(i),s]},useSyncExternalStore:em,useId:Im,useHostTransitionStatus:qc,useFormState:mm,useActionState:mm,useOptimistic:function(i,s){var r=mt();return We!==null?lm(r,We,i,s):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:kc,useCacheRefresh:wm};Lm.useEffectEvent=_m;function Jc(i,s,r,u){s=i.memoizedState,r=r(u,s),r=r==null?s:v({},s,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var Kc={enqueueSetState:function(i,s,r){i=i._reactInternals;var u=hn(),p=Pi(u);p.payload=s,r!=null&&(p.callback=r),s=Oi(i,p,u),s!==null&&(jt(s,i,u),cl(s,i,u))},enqueueReplaceState:function(i,s,r){i=i._reactInternals;var u=hn(),p=Pi(u);p.tag=1,p.payload=s,r!=null&&(p.callback=r),s=Oi(i,p,u),s!==null&&(jt(s,i,u),cl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var r=hn(),u=Pi(r);u.tag=2,s!=null&&(u.callback=s),s=Oi(i,u,r),s!==null&&(jt(s,i,r),cl(s,i,r))}};function Pm(i,s,r,u,p,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,T):s.prototype&&s.prototype.isPureReactComponent?!nl(r,u)||!nl(p,y):!0}function Om(i,s,r,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==i&&Kc.enqueueReplaceState(s,s.state,null)}function So(i,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(i=i.defaultProps){r===s&&(r=v({},r));for(var p in i)r[p]===void 0&&(r[p]=i[p])}return r}function Hm(i){kr(i)}function Bm(i){console.error(i)}function Gm(i){kr(i)}function ia(i,s){try{var r=i.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Vm(i,s,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Qc(i,s,r){return r=Pi(r),r.tag=3,r.payload={element:null},r.callback=function(){ia(i,s)},r}function Fm(i){return i=Pi(i),i.tag=3,i}function qm(i,s,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;i.payload=function(){return p(y)},i.callback=function(){Vm(s,r,u)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Vm(s,r,u),typeof p!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function $S(i,s,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&ts(s,r,p,!0),r=un.current,r!==null){switch(r.tag){case 31:case 13:return Cn===null?ma():r.alternate===null&&ft===0&&(ft=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===zr?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),Ef(i,u,p)),!1;case 22:return r.flags|=65536,u===zr?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),Ef(i,u,p)),!1}throw Error(o(435,r.tag))}return Ef(i,u,p),ma(),!1}if(Ue)return s=un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==hc&&(i=Error(o(422),{cause:u}),sl(vn(i,r)))):(u!==hc&&(s=Error(o(423),{cause:u}),sl(vn(s,r))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,u=vn(u,r),p=Qc(i.stateNode,u,p),Ac(i,p),ft!==4&&(ft=2)),!1;var y=Error(o(520),{cause:u});if(y=vn(y,r),Al===null?Al=[y]:Al.push(y),ft!==4&&(ft=2),s===null)return!0;u=vn(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,i=p&-p,r.lanes|=i,i=Qc(r.stateNode,u,i),Ac(r,i),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(qi===null||!qi.has(y))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Fm(p),qm(p,i,r,u),Ac(r,p),!1}r=r.return}while(r!==null);return!1}var Xc=Error(o(461)),vt=!1;function Lt(i,s,r,u){s.child=i===null?Kp(s,null,r,u):Eo(s,i.child,r,u)}function zm(i,s,r,u,p){r=r.render;var y=s.ref;if("ref"in u){var T={};for(var C in u)C!=="ref"&&(T[C]=u[C])}else T=u;return go(s),u=wc(i,s,r,T,y,p),C=Mc(),i!==null&&!vt?(Dc(i,s,p),ai(i,s,p)):(Ue&&C&&fc(s),s.flags|=1,Lt(i,s,u,p),s.child)}function Ym(i,s,r,u,p){if(i===null){var y=r.type;return typeof y=="function"&&!ac(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,Jm(i,s,y,u,p)):(i=Hr(r.type,null,u,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!of(i,p)){var T=y.memoizedProps;if(r=r.compare,r=r!==null?r:nl,r(T,u)&&i.ref===s.ref)return ai(i,s,p)}return s.flags|=1,i=ni(y,u),i.ref=s.ref,i.return=s,s.child=i}function Jm(i,s,r,u,p){if(i!==null){var y=i.memoizedProps;if(nl(y,u)&&i.ref===s.ref)if(vt=!1,s.pendingProps=u=y,of(i,p))(i.flags&131072)!==0&&(vt=!0);else return s.lanes=i.lanes,ai(i,s,p)}return $c(i,s,r,u,p)}function Km(i,s,r,u){var p=u.children,y=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,i!==null){for(u=s.child=i.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,s.child=null;return Qm(i,s,y,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Fr(s,y!==null?y.cachePool:null),y!==null?$p(s,y):Nc(),Wp(s);else return u=s.lanes=536870912,Qm(i,s,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(Fr(s,y.cachePool),$p(s,y),Bi(),s.memoizedState=null):(i!==null&&Fr(s,null),Nc(),Bi());return Lt(i,s,p,r),s.child}function yl(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Qm(i,s,r,u,p){var y=Ec();return y=y===null?null:{parent:yt._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},i!==null&&Fr(s,null),Nc(),Wp(s),i!==null&&ts(i,s,u,!0),s.childLanes=p,null}function oa(i,s){return s=la({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Xm(i,s,r){return Eo(s,i.child,null,r),i=oa(s,s.pendingProps),i.flags|=2,cn(s),s.memoizedState=null,i}function WS(i,s,r){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ue){if(u.mode==="hidden")return i=oa(s,u),s.lanes=536870912,yl(null,i);if(Rc(s),(i=lt)?(i=ry(i,Sn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Mi!==null?{id:Fn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},r=Dp(i),r.return=s,s.child=r,Ut=s,lt=null)):i=null,i===null)throw Ui(s);return s.lanes=536870912,null}return oa(s,u)}var y=i.memoizedState;if(y!==null){var T=y.dehydrated;if(Rc(s),p)if(s.flags&256)s.flags&=-257,s=Xm(i,s,r);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(vt||ts(i,s,r,!1),p=(r&i.childLanes)!==0,vt||p){if(u=et,u!==null&&(T=Mn(u,r),T!==0&&T!==y.retryLane))throw y.retryLane=T,fo(i,T),jt(u,i,T),Xc;ma(),s=Xm(i,s,r)}else i=y.treeContext,lt=An(T.nextSibling),Ut=s,Ue=!0,Di=null,Sn=!1,i!==null&&Lp(s,i),s=oa(s,u),s.flags|=4096;return s}return i=ni(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function sa(i,s){var r=s.ref;if(r===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(i===null||i.ref!==r)&&(s.flags|=4194816)}}function $c(i,s,r,u,p){return go(s),r=wc(i,s,r,u,void 0,p),u=Mc(),i!==null&&!vt?(Dc(i,s,p),ai(i,s,p)):(Ue&&u&&fc(s),s.flags|=1,Lt(i,s,r,p),s.child)}function $m(i,s,r,u,p,y){return go(s),s.updateQueue=null,r=jp(s,u,r,p),Zp(i),u=Mc(),i!==null&&!vt?(Dc(i,s,y),ai(i,s,y)):(Ue&&u&&fc(s),s.flags|=1,Lt(i,s,r,y),s.child)}function Wm(i,s,r,u,p){if(go(s),s.stateNode===null){var y=Wo,T=r.contextType;typeof T=="object"&&T!==null&&(y=kt(T)),y=new r(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Kc,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},Sc(s),T=r.contextType,y.context=typeof T=="object"&&T!==null?kt(T):Wo,y.state=s.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(Jc(s,r,T,u),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Kc.enqueueReplaceState(y,y.state,null),dl(s,u,y,p),fl(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){y=s.stateNode;var C=s.memoizedProps,N=So(r,C);y.props=N;var U=y.context,B=r.contextType;T=Wo,typeof B=="object"&&B!==null&&(T=kt(B));var F=r.getDerivedStateFromProps;B=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,B||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||U!==T)&&Om(s,y,u,T),Li=!1;var L=s.memoizedState;y.state=L,dl(s,u,y,p),fl(),U=s.memoizedState,C||L!==U||Li?(typeof F=="function"&&(Jc(s,r,F,u),U=s.memoizedState),(N=Li||Pm(s,r,N,u,L,U,T))?(B||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=U),y.props=u,y.state=U,y.context=T,u=N):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,Cc(i,s),T=s.memoizedProps,B=So(r,T),y.props=B,F=s.pendingProps,L=y.context,U=r.contextType,N=Wo,typeof U=="object"&&U!==null&&(N=kt(U)),C=r.getDerivedStateFromProps,(U=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==F||L!==N)&&Om(s,y,u,N),Li=!1,L=s.memoizedState,y.state=L,dl(s,u,y,p),fl();var O=s.memoizedState;T!==F||L!==O||Li||i!==null&&i.dependencies!==null&&Gr(i.dependencies)?(typeof C=="function"&&(Jc(s,r,C,u),O=s.memoizedState),(B=Li||Pm(s,r,B,u,L,O,N)||i!==null&&i.dependencies!==null&&Gr(i.dependencies))?(U||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,O,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,O,N)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&L===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&L===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=O),y.props=u,y.state=O,y.context=N,u=B):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&L===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&L===i.memoizedState||(s.flags|=1024),u=!1)}return y=u,sa(i,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&u?(s.child=Eo(s,i.child,null,p),s.child=Eo(s,null,r,p)):Lt(i,s,r,p),s.memoizedState=y.state,i=s.child):i=ai(i,s,p),i}function Zm(i,s,r,u){return po(),s.flags|=256,Lt(i,s,r,u),s.child}var Wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zc(i){return{baseLanes:i,cachePool:Vp()}}function jc(i,s,r){return i=i!==null?i.childLanes&~r:0,s&&(i|=dn),i}function jm(i,s,r){var u=s.pendingProps,p=!1,y=(s.flags&128)!==0,T;if((T=y)||(T=i!==null&&i.memoizedState===null?!1:(pt.current&2)!==0),T&&(p=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ue){if(p?Hi(s):Bi(),(i=lt)?(i=ry(i,Sn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Mi!==null?{id:Fn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},r=Dp(i),r.return=s,s.child=r,Ut=s,lt=null)):i=null,i===null)throw Ui(s);return Pf(i)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,p?(Bi(),p=s.mode,C=la({mode:"hidden",children:C},p),u=ho(u,p,r,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=Zc(r),u.childLanes=jc(i,T,r),s.memoizedState=Wc,yl(null,u)):(Hi(s),ef(s,C))}var N=i.memoizedState;if(N!==null&&(C=N.dehydrated,C!==null)){if(y)s.flags&256?(Hi(s),s.flags&=-257,s=tf(i,s,r)):s.memoizedState!==null?(Bi(),s.child=i.child,s.flags|=128,s=null):(Bi(),C=u.fallback,p=s.mode,u=la({mode:"visible",children:u.children},p),C=ho(C,p,r,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,Eo(s,i.child,null,r),u=s.child,u.memoizedState=Zc(r),u.childLanes=jc(i,T,r),s.memoizedState=Wc,s=yl(null,u));else if(Hi(s),Pf(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var U=T.dgst;T=U,u=Error(o(419)),u.stack="",u.digest=T,sl({value:u,source:null,stack:null}),s=tf(i,s,r)}else if(vt||ts(i,s,r,!1),T=(r&i.childLanes)!==0,vt||T){if(T=et,T!==null&&(u=Mn(T,r),u!==0&&u!==N.retryLane))throw N.retryLane=u,fo(i,u),jt(T,i,u),Xc;Lf(C)||ma(),s=tf(i,s,r)}else Lf(C)?(s.flags|=192,s.child=i.child,s=null):(i=N.treeContext,lt=An(C.nextSibling),Ut=s,Ue=!0,Di=null,Sn=!1,i!==null&&Lp(s,i),s=ef(s,u.children),s.flags|=4096);return s}return p?(Bi(),C=u.fallback,p=s.mode,N=i.child,U=N.sibling,u=ni(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,U!==null?C=ni(U,C):(C=ho(C,p,r,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,yl(null,u),u=s.child,C=i.child.memoizedState,C===null?C=Zc(r):(p=C.cachePool,p!==null?(N=yt._currentValue,p=p.parent!==N?{parent:N,pool:N}:p):p=Vp(),C={baseLanes:C.baseLanes|r,cachePool:p}),u.memoizedState=C,u.childLanes=jc(i,T,r),s.memoizedState=Wc,yl(i.child,u)):(Hi(s),r=i.child,i=r.sibling,r=ni(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=r,s.memoizedState=null,r)}function ef(i,s){return s=la({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function la(i,s){return i=an(22,i,null,s),i.lanes=0,i}function tf(i,s,r){return Eo(s,i.child,null,r),i=ef(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function eg(i,s,r){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),gc(i.return,s,r)}function nf(i,s,r,u,p,y){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=r,T.tailMode=p,T.treeForkCount=y)}function tg(i,s,r){var u=s.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var T=pt.current,C=(T&2)!==0;if(C?(T=T&1|2,s.flags|=128):T&=1,W(pt,T),Lt(i,s,u,r),u=Ue?ol:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&eg(i,r,s);else if(i.tag===19)eg(i,r,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(r=s.child,p=null;r!==null;)i=r.alternate,i!==null&&Qr(i)===null&&(p=r),r=r.sibling;r=p,r===null?(p=s.child,s.child=null):(p=r.sibling,r.sibling=null),nf(s,!1,p,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&Qr(i)===null){s.child=p;break}i=p.sibling,p.sibling=r,r=p,p=i}nf(s,!0,r,null,y,u);break;case"together":nf(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ai(i,s,r){if(i!==null&&(s.dependencies=i.dependencies),Fi|=s.lanes,(r&s.childLanes)===0)if(i!==null){if(ts(i,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,r=ni(i,i.pendingProps),s.child=r,r.return=s;i.sibling!==null;)i=i.sibling,r=r.sibling=ni(i,i.pendingProps),r.return=s;r.sibling=null}return s.child}function of(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Gr(i)))}function ZS(i,s,r){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),ki(s,yt,i.memoizedState.cache),po();break;case 27:case 5:Rn(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:ki(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Rc(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Hi(s),s.flags|=128,null):(r&s.child.childLanes)!==0?jm(i,s,r):(Hi(s),i=ai(i,s,r),i!==null?i.sibling:null);Hi(s);break;case 19:var p=(i.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(ts(i,s,r,!1),u=(r&s.childLanes)!==0),p){if(u)return tg(i,s,r);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(pt,pt.current),u)break;return null;case 22:return s.lanes=0,Km(i,s,r,s.pendingProps);case 24:ki(s,yt,i.memoizedState.cache)}return ai(i,s,r)}function ng(i,s,r){if(i!==null)if(i.memoizedProps!==s.pendingProps)vt=!0;else{if(!of(i,r)&&(s.flags&128)===0)return vt=!1,ZS(i,s,r);vt=(i.flags&131072)!==0}else vt=!1,Ue&&(s.flags&1048576)!==0&&kp(s,ol,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=_o(s.elementType),s.type=i,typeof i=="function")ac(i)?(u=So(i,u),s.tag=1,s=Wm(null,s,i,u,r)):(s.tag=0,s=$c(null,s,i,u,r));else{if(i!=null){var p=i.$$typeof;if(p===j){s.tag=11,s=zm(null,s,i,u,r);break e}else if(p===X){s.tag=14,s=Ym(null,s,i,u,r);break e}}throw s=st(i)||i,Error(o(306,s,""))}}return s;case 0:return $c(i,s,s.type,s.pendingProps,r);case 1:return u=s.type,p=So(u,s.pendingProps),Wm(i,s,u,p,r);case 3:e:{if(ht(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var y=s.memoizedState;p=y.element,Cc(i,s),dl(s,u,null,r);var T=s.memoizedState;if(u=T.cache,ki(s,yt,u),u!==y.cache&&yc(s,[yt],r,!0),fl(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Zm(i,s,u,r);break e}else if(u!==p){p=vn(Error(o(424)),s),sl(p),s=Zm(i,s,u,r);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(lt=An(i.firstChild),Ut=s,Ue=!0,Di=null,Sn=!0,r=Kp(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(po(),u===p){s=ai(i,s,r);break e}Lt(i,s,u,r)}s=s.child}return s;case 26:return sa(i,s),i===null?(r=hy(s.type,null,s.pendingProps,null))?s.memoizedState=r:Ue||(r=s.type,i=s.pendingProps,u=Sa(Se.current).createElement(r),u[gt]=s,u[Dt]=i,Pt(u,r,i),se(u),s.stateNode=u):s.memoizedState=hy(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Rn(s),i===null&&Ue&&(u=s.stateNode=cy(s.type,s.pendingProps,Se.current),Ut=s,Sn=!0,p=lt,Ki(s.type)?(Of=p,lt=An(u.firstChild)):lt=p),Lt(i,s,s.pendingProps.children,r),sa(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ue&&((p=u=lt)&&(u=RC(u,s.type,s.pendingProps,Sn),u!==null?(s.stateNode=u,Ut=s,lt=An(u.firstChild),Sn=!1,p=!0):p=!1),p||Ui(s)),Rn(s),p=s.type,y=s.pendingProps,T=i!==null?i.memoizedProps:null,u=y.children,Df(p,y)?u=null:T!==null&&Df(p,T)&&(s.flags|=32),s.memoizedState!==null&&(p=wc(i,s,qS,null,null,r),Dl._currentValue=p),sa(i,s),Lt(i,s,u,r),s.child;case 6:return i===null&&Ue&&((i=r=lt)&&(r=IC(r,s.pendingProps,Sn),r!==null?(s.stateNode=r,Ut=s,lt=null,i=!0):i=!1),i||Ui(s)),null;case 13:return jm(i,s,r);case 4:return ht(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Eo(s,null,u,r):Lt(i,s,u,r),s.child;case 11:return zm(i,s,s.type,s.pendingProps,r);case 7:return Lt(i,s,s.pendingProps,r),s.child;case 8:return Lt(i,s,s.pendingProps.children,r),s.child;case 12:return Lt(i,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,ki(s,s.type,u.value),Lt(i,s,u.children,r),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,go(s),p=kt(p),u=u(p),s.flags|=1,Lt(i,s,u,r),s.child;case 14:return Ym(i,s,s.type,s.pendingProps,r);case 15:return Jm(i,s,s.type,s.pendingProps,r);case 19:return tg(i,s,r);case 31:return WS(i,s,r);case 22:return Km(i,s,r,s.pendingProps);case 24:return go(s),u=kt(yt),i===null?(p=Ec(),p===null&&(p=et,y=_c(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=r),p=y),s.memoizedState={parent:u,cache:p},Sc(s),ki(s,yt,p)):((i.lanes&r)!==0&&(Cc(i,s),dl(s,null,null,r),fl()),p=i.memoizedState,y=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),ki(s,yt,u)):(u=y.cache,ki(s,yt,u),u!==p.cache&&yc(s,[yt],r,!0))),Lt(i,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ui(i){i.flags|=4}function sf(i,s,r,u,p){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(Ig())i.flags|=8192;else throw vo=zr,Tc}else i.flags&=-16777217}function ig(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!_y(s))if(Ig())i.flags|=8192;else throw vo=zr,Tc}function ra(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?te():536870912,i.lanes|=s,hs|=s)}function _l(i,s){if(!Ue)switch(i.tailMode){case"hidden":s=i.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function rt(i){var s=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(s)for(var p=i.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=u,i.childLanes=r,s}function jS(i,s,r){var u=s.pendingProps;switch(dc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(s),null;case 1:return rt(s),null;case 3:return r=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),si(yt),nt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(es(s)?ui(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,pc())),rt(s),null;case 26:var p=s.type,y=s.memoizedState;return i===null?(ui(s),y!==null?(rt(s),ig(s,y)):(rt(s),sf(s,p,null,u,r))):y?y!==i.memoizedState?(ui(s),rt(s),ig(s,y)):(rt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&ui(s),rt(s),sf(s,p,i,u,r)),null;case 27:if(Kn(s),r=Se.current,p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&ui(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return rt(s),null}i=ie.current,es(s)?Pp(s):(i=cy(p,u,r),s.stateNode=i,ui(s))}return rt(s),null;case 5:if(Kn(s),p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&ui(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return rt(s),null}if(y=ie.current,es(s))Pp(s);else{var T=Sa(Se.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(p,{is:u.is}):T.createElement(p)}}y[gt]=s,y[Dt]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=y;e:switch(Pt(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ui(s)}}return rt(s),sf(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,r),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&ui(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=Se.current,es(s)){if(i=s.stateNode,r=s.memoizedProps,u=null,p=Ut,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}i[gt]=s,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||jg(i.nodeValue,r)),i||Ui(s,!0)}else i=Sa(i).createTextNode(u),i[gt]=s,s.stateNode=i}return rt(s),null;case 31:if(r=s.memoizedState,i===null||i.memoizedState!==null){if(u=es(s),r!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[gt]=s}else po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),i=!1}else r=pc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return s.flags&256?(cn(s),s):(cn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return rt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=es(s),u!==null&&u.dehydrated!==null){if(i===null){if(!p)throw Error(o(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[gt]=s}else po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),p=!1}else p=pc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(cn(s),s):(cn(s),null)}return cn(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,i=i!==null&&i.memoizedState!==null,r&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),r!==i&&r&&(s.child.flags|=8192),ra(s,s.updateQueue),rt(s),null);case 4:return nt(),i===null&&bf(s.stateNode.containerInfo),rt(s),null;case 10:return si(s.type),rt(s),null;case 19:if(V(pt),u=s.memoizedState,u===null)return rt(s),null;if(p=(s.flags&128)!==0,y=u.rendering,y===null)if(p)_l(u,!1);else{if(ft!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=Qr(i),y!==null){for(s.flags|=128,_l(u,!1),i=y.updateQueue,s.updateQueue=i,ra(s,i),s.subtreeFlags=0,i=r,r=s.child;r!==null;)Mp(r,i),r=r.sibling;return W(pt,pt.current&1|2),Ue&&ii(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&Ft()>da&&(s.flags|=128,p=!0,_l(u,!1),s.lanes=4194304)}else{if(!p)if(i=Qr(y),i!==null){if(s.flags|=128,p=!0,i=i.updateQueue,s.updateQueue=i,ra(s,i),_l(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ue)return rt(s),null}else 2*Ft()-u.renderingStartTime>da&&r!==536870912&&(s.flags|=128,p=!0,_l(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(i=u.last,i!==null?i.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Ft(),i.sibling=null,r=pt.current,W(pt,p?r&1|2:r&1),Ue&&ii(s,u.treeForkCount),i):(rt(s),null);case 22:case 23:return cn(s),bc(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(rt(s),s.subtreeFlags&6&&(s.flags|=8192)):rt(s),r=s.updateQueue,r!==null&&ra(s,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),i!==null&&V(yo),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),si(yt),rt(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function eC(i,s){switch(dc(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return si(yt),nt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Kn(s),null;case 31:if(s.memoizedState!==null){if(cn(s),s.alternate===null)throw Error(o(340));po()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(cn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));po()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return V(pt),null;case 4:return nt(),null;case 10:return si(s.type),null;case 22:case 23:return cn(s),bc(),i!==null&&V(yo),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return si(yt),null;case 25:return null;default:return null}}function og(i,s){switch(dc(s),s.tag){case 3:si(yt),nt();break;case 26:case 27:case 5:Kn(s);break;case 4:nt();break;case 31:s.memoizedState!==null&&cn(s);break;case 13:cn(s);break;case 19:V(pt);break;case 10:si(s.type);break;case 22:case 23:cn(s),bc(),i!==null&&V(yo);break;case 24:si(yt)}}function vl(i,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&i)===i){u=void 0;var y=r.create,T=r.inst;u=y(),T.destroy=u}r=r.next}while(r!==p)}}catch(C){Qe(s,s.return,C)}}function Gi(i,s,r){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&i)===i){var T=u.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,p=s;var N=r,U=C;try{U()}catch(B){Qe(p,N,B)}}}u=u.next}while(u!==y)}}catch(B){Qe(s,s.return,B)}}function sg(i){var s=i.updateQueue;if(s!==null){var r=i.stateNode;try{Xp(s,r)}catch(u){Qe(i,i.return,u)}}}function lg(i,s,r){r.props=So(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){Qe(i,s,u)}}function El(i,s){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof r=="function"?i.refCleanup=r(u):r.current=u}}catch(p){Qe(i,s,p)}}function zn(i,s){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){Qe(i,s,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Qe(i,s,p)}else r.current=null}function rg(i){var s=i.type,r=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){Qe(i,i.return,p)}}function lf(i,s,r){try{var u=i.stateNode;SC(u,i.type,r,s),u[Dt]=s}catch(p){Qe(i,i.return,p)}}function ag(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ki(i.type)||i.tag===4}function rf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ag(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ki(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function af(i,s,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(i),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=ei));else if(u!==4&&(u===27&&Ki(i.type)&&(r=i.stateNode,s=null),i=i.child,i!==null))for(af(i,s,r),i=i.sibling;i!==null;)af(i,s,r),i=i.sibling}function aa(i,s,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?r.insertBefore(i,s):r.appendChild(i);else if(u!==4&&(u===27&&Ki(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(aa(i,s,r),i=i.sibling;i!==null;)aa(i,s,r),i=i.sibling}function ug(i){var s=i.stateNode,r=i.memoizedProps;try{for(var u=i.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Pt(s,u,r),s[gt]=i,s[Dt]=r}catch(y){Qe(i,i.return,y)}}var ci=!1,Et=!1,uf=!1,cg=typeof WeakSet=="function"?WeakSet:Set,At=null;function tC(i,s){if(i=i.containerInfo,wf=Ia,i=Sp(i),tc(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else e:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var T=0,C=-1,N=-1,U=0,B=0,F=i,L=null;t:for(;;){for(var O;F!==r||p!==0&&F.nodeType!==3||(C=T+p),F!==y||u!==0&&F.nodeType!==3||(N=T+u),F.nodeType===3&&(T+=F.nodeValue.length),(O=F.firstChild)!==null;)L=F,F=O;for(;;){if(F===i)break t;if(L===r&&++U===p&&(C=T),L===y&&++B===u&&(N=T),(O=F.nextSibling)!==null)break;F=L,L=F.parentNode}F=O}r=C===-1||N===-1?null:{start:C,end:N}}else r=null}r=r||{start:0,end:0}}else r=null;for(Mf={focusedElem:i,selectionRange:r},Ia=!1,At=s;At!==null;)if(s=At,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,At=i;else for(;At!==null;){switch(s=At,y=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)p=i[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,r=s,p=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var oe=So(r.type,p);i=u.getSnapshotBeforeUpdate(oe,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(ce){Qe(r,r.return,ce)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,r=i.nodeType,r===9)kf(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":kf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,At=i;break}At=s.return}}function fg(i,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:di(i,r),u&4&&vl(5,r);break;case 1:if(di(i,r),u&4)if(i=r.stateNode,s===null)try{i.componentDidMount()}catch(T){Qe(r,r.return,T)}else{var p=So(r.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(p,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Qe(r,r.return,T)}}u&64&&sg(r),u&512&&El(r,r.return);break;case 3:if(di(i,r),u&64&&(i=r.updateQueue,i!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{Xp(i,s)}catch(T){Qe(r,r.return,T)}}break;case 27:s===null&&u&4&&ug(r);case 26:case 5:di(i,r),s===null&&u&4&&rg(r),u&512&&El(r,r.return);break;case 12:di(i,r);break;case 31:di(i,r),u&4&&pg(i,r);break;case 13:di(i,r),u&4&&mg(i,r),u&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=cC.bind(null,r),wC(i,r))));break;case 22:if(u=r.memoizedState!==null||ci,!u){s=s!==null&&s.memoizedState!==null||Et,p=ci;var y=Et;ci=u,(Et=s)&&!y?hi(i,r,(r.subtreeFlags&8772)!==0):di(i,r),ci=p,Et=y}break;case 30:break;default:di(i,r)}}function dg(i){var s=i.alternate;s!==null&&(i.alternate=null,dg(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Go(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ut=null,Xt=!1;function fi(i,s,r){for(r=r.child;r!==null;)hg(i,s,r),r=r.sibling}function hg(i,s,r){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Ni,r)}catch{}switch(r.tag){case 26:Et||zn(r,s),fi(i,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Et||zn(r,s);var u=ut,p=Xt;Ki(r.type)&&(ut=r.stateNode,Xt=!1),fi(i,s,r),Il(r.stateNode),ut=u,Xt=p;break;case 5:Et||zn(r,s);case 6:if(u=ut,p=Xt,ut=null,fi(i,s,r),ut=u,Xt=p,ut!==null)if(Xt)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(r.stateNode)}catch(y){Qe(r,s,y)}else try{ut.removeChild(r.stateNode)}catch(y){Qe(r,s,y)}break;case 18:ut!==null&&(Xt?(i=ut,sy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),Ts(i)):sy(ut,r.stateNode));break;case 4:u=ut,p=Xt,ut=r.stateNode.containerInfo,Xt=!0,fi(i,s,r),ut=u,Xt=p;break;case 0:case 11:case 14:case 15:Gi(2,r,s),Et||Gi(4,r,s),fi(i,s,r);break;case 1:Et||(zn(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&lg(r,s,u)),fi(i,s,r);break;case 21:fi(i,s,r);break;case 22:Et=(u=Et)||r.memoizedState!==null,fi(i,s,r),Et=u;break;default:fi(i,s,r)}}function pg(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ts(i)}catch(r){Qe(s,s.return,r)}}}function mg(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ts(i)}catch(r){Qe(s,s.return,r)}}function nC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new cg),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new cg),s;default:throw Error(o(435,i.tag))}}function ua(i,s){var r=nC(i);s.forEach(function(u){if(!r.has(u)){r.add(u);var p=fC.bind(null,i,u);u.then(p,p)}})}function $t(i,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],y=i,T=s,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Ki(C.type)){ut=C.stateNode,Xt=!1;break e}break;case 5:ut=C.stateNode,Xt=!1;break e;case 3:case 4:ut=C.stateNode.containerInfo,Xt=!0;break e}C=C.return}if(ut===null)throw Error(o(160));hg(y,T,p),ut=null,Xt=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)gg(s,i),s=s.sibling}var Un=null;function gg(i,s){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$t(s,i),Wt(i),u&4&&(Gi(3,i,i.return),vl(3,i),Gi(5,i,i.return));break;case 1:$t(s,i),Wt(i),u&512&&(Et||r===null||zn(r,r.return)),u&64&&ci&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=Un;if($t(s,i),Wt(i),u&512&&(Et||r===null||zn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){e:{u=i.type,r=i.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ri]||y[gt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),Pt(y,u,r),y[gt]=i,se(y),u=y;break e;case"link":var T=gy("link","href",p).get(u+(r.href||""));if(T){for(var C=0;C<T.length;C++)if(y=T[C],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(C,1);break t}}y=p.createElement(u),Pt(y,u,r),p.head.appendChild(y);break;case"meta":if(T=gy("meta","content",p).get(u+(r.content||""))){for(C=0;C<T.length;C++)if(y=T[C],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(C,1);break t}}y=p.createElement(u),Pt(y,u,r),p.head.appendChild(y);break;default:throw Error(o(468,u))}y[gt]=i,se(y),u=y}i.stateNode=u}else yy(p,i.type,i.stateNode);else i.stateNode=my(p,u,i.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?yy(p,i.type,i.stateNode):my(p,u,i.memoizedProps)):u===null&&i.stateNode!==null&&lf(i,i.memoizedProps,r.memoizedProps)}break;case 27:$t(s,i),Wt(i),u&512&&(Et||r===null||zn(r,r.return)),r!==null&&u&4&&lf(i,i.memoizedProps,r.memoizedProps);break;case 5:if($t(s,i),Wt(i),u&512&&(Et||r===null||zn(r,r.return)),i.flags&32){p=i.stateNode;try{zo(p,"")}catch(oe){Qe(i,i.return,oe)}}u&4&&i.stateNode!=null&&(p=i.memoizedProps,lf(i,p,r!==null?r.memoizedProps:p)),u&1024&&(uf=!0);break;case 6:if($t(s,i),Wt(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(oe){Qe(i,i.return,oe)}}break;case 3:if(xa=null,p=Un,Un=Ca(s.containerInfo),$t(s,i),Un=p,Wt(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Ts(s.containerInfo)}catch(oe){Qe(i,i.return,oe)}uf&&(uf=!1,yg(i));break;case 4:u=Un,Un=Ca(i.stateNode.containerInfo),$t(s,i),Wt(i),Un=u;break;case 12:$t(s,i),Wt(i);break;case 31:$t(s,i),Wt(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ua(i,u)));break;case 13:$t(s,i),Wt(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(fa=Ft()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ua(i,u)));break;case 22:p=i.memoizedState!==null;var N=r!==null&&r.memoizedState!==null,U=ci,B=Et;if(ci=U||p,Et=B||N,$t(s,i),Et=B,ci=U,Wt(i),u&8192)e:for(s=i.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(r===null||N||ci||Et||Co(i)),r=null,s=i;;){if(s.tag===5||s.tag===26){if(r===null){N=r=s;try{if(y=N.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=N.stateNode;var F=N.memoizedProps.style,L=F!=null&&F.hasOwnProperty("display")?F.display:null;C.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(oe){Qe(N,N.return,oe)}}}else if(s.tag===6){if(r===null){N=s;try{N.stateNode.nodeValue=p?"":N.memoizedProps}catch(oe){Qe(N,N.return,oe)}}}else if(s.tag===18){if(r===null){N=s;try{var O=N.stateNode;p?ly(O,!0):ly(N.stateNode,!1)}catch(oe){Qe(N,N.return,oe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,ua(i,r))));break;case 19:$t(s,i),Wt(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ua(i,u)));break;case 30:break;case 21:break;default:$t(s,i),Wt(i)}}function Wt(i){var s=i.flags;if(s&2){try{for(var r,u=i.return;u!==null;){if(ag(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var p=r.stateNode,y=rf(i);aa(i,y,p);break;case 5:var T=r.stateNode;r.flags&32&&(zo(T,""),r.flags&=-33);var C=rf(i);aa(i,C,T);break;case 3:case 4:var N=r.stateNode.containerInfo,U=rf(i);af(i,U,N);break;default:throw Error(o(161))}}catch(B){Qe(i,i.return,B)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function yg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;yg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function di(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)fg(i,s.alternate,s),s=s.sibling}function Co(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Gi(4,s,s.return),Co(s);break;case 1:zn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&lg(s,s.return,r),Co(s);break;case 27:Il(s.stateNode);case 26:case 5:zn(s,s.return),Co(s);break;case 22:s.memoizedState===null&&Co(s);break;case 30:Co(s);break;default:Co(s)}i=i.sibling}}function hi(i,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=i,y=s,T=y.flags;switch(y.tag){case 0:case 11:case 15:hi(p,y,r),vl(4,y);break;case 1:if(hi(p,y,r),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){Qe(u,u.return,U)}if(u=y,p=u.updateQueue,p!==null){var C=u.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)Qp(N[p],C)}catch(U){Qe(u,u.return,U)}}r&&T&64&&sg(y),El(y,y.return);break;case 27:ug(y);case 26:case 5:hi(p,y,r),r&&u===null&&T&4&&rg(y),El(y,y.return);break;case 12:hi(p,y,r);break;case 31:hi(p,y,r),r&&T&4&&pg(p,y);break;case 13:hi(p,y,r),r&&T&4&&mg(p,y);break;case 22:y.memoizedState===null&&hi(p,y,r),El(y,y.return);break;case 30:break;default:hi(p,y,r)}s=s.sibling}}function cf(i,s){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&ll(r))}function ff(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ll(i))}function kn(i,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_g(i,s,r,u),s=s.sibling}function _g(i,s,r,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:kn(i,s,r,u),p&2048&&vl(9,s);break;case 1:kn(i,s,r,u);break;case 3:kn(i,s,r,u),p&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ll(i)));break;case 12:if(p&2048){kn(i,s,r,u),i=s.stateNode;try{var y=s.memoizedProps,T=y.id,C=y.onPostCommit;typeof C=="function"&&C(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){Qe(s,s.return,N)}}else kn(i,s,r,u);break;case 31:kn(i,s,r,u);break;case 13:kn(i,s,r,u);break;case 23:break;case 22:y=s.stateNode,T=s.alternate,s.memoizedState!==null?y._visibility&2?kn(i,s,r,u):Tl(i,s):y._visibility&2?kn(i,s,r,u):(y._visibility|=2,cs(i,s,r,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&cf(T,s);break;case 24:kn(i,s,r,u),p&2048&&ff(s.alternate,s);break;default:kn(i,s,r,u)}}function cs(i,s,r,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=i,T=s,C=r,N=u,U=T.flags;switch(T.tag){case 0:case 11:case 15:cs(y,T,C,N,p),vl(8,T);break;case 23:break;case 22:var B=T.stateNode;T.memoizedState!==null?B._visibility&2?cs(y,T,C,N,p):Tl(y,T):(B._visibility|=2,cs(y,T,C,N,p)),p&&U&2048&&cf(T.alternate,T);break;case 24:cs(y,T,C,N,p),p&&U&2048&&ff(T.alternate,T);break;default:cs(y,T,C,N,p)}s=s.sibling}}function Tl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=i,u=s,p=u.flags;switch(u.tag){case 22:Tl(r,u),p&2048&&cf(u.alternate,u);break;case 24:Tl(r,u),p&2048&&ff(u.alternate,u);break;default:Tl(r,u)}s=s.sibling}}var Sl=8192;function fs(i,s,r){if(i.subtreeFlags&Sl)for(i=i.child;i!==null;)vg(i,s,r),i=i.sibling}function vg(i,s,r){switch(i.tag){case 26:fs(i,s,r),i.flags&Sl&&i.memoizedState!==null&&FC(r,Un,i.memoizedState,i.memoizedProps);break;case 5:fs(i,s,r);break;case 3:case 4:var u=Un;Un=Ca(i.stateNode.containerInfo),fs(i,s,r),Un=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Sl,Sl=16777216,fs(i,s,r),Sl=u):fs(i,s,r));break;default:fs(i,s,r)}}function Eg(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Cl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];At=u,Sg(u,i)}Eg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Tg(i),i=i.sibling}function Tg(i){switch(i.tag){case 0:case 11:case 15:Cl(i),i.flags&2048&&Gi(9,i,i.return);break;case 3:Cl(i);break;case 12:Cl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ca(i)):Cl(i);break;default:Cl(i)}}function ca(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];At=u,Sg(u,i)}Eg(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Gi(8,s,s.return),ca(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,ca(s));break;default:ca(s)}i=i.sibling}}function Sg(i,s){for(;At!==null;){var r=At;switch(r.tag){case 0:case 11:case 15:Gi(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ll(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,At=u;else e:for(r=i;At!==null;){u=At;var p=u.sibling,y=u.return;if(dg(u),u===r){At=null;break e}if(p!==null){p.return=y,At=p;break e}At=y}}}var iC={getCacheForType:function(i){var s=kt(yt),r=s.data.get(i);return r===void 0&&(r=i(),s.data.set(i,r)),r},cacheSignal:function(){return kt(yt).controller.signal}},oC=typeof WeakMap=="function"?WeakMap:Map,Fe=0,et=null,Re=null,Me=0,Ke=0,fn=null,Vi=!1,ds=!1,df=!1,pi=0,ft=0,Fi=0,Ao=0,hf=0,dn=0,hs=0,Al=null,Zt=null,pf=!1,fa=0,Cg=0,da=1/0,ha=null,qi=null,St=0,zi=null,ps=null,mi=0,mf=0,gf=null,Ag=null,xl=0,yf=null;function hn(){return(Fe&2)!==0&&Me!==0?Me&-Me:H.T!==null?Cf():be()}function xg(){if(dn===0)if((Me&536870912)===0||Ue){var i=Y;Y<<=1,(Y&3932160)===0&&(Y=262144),dn=i}else dn=536870912;return i=un.current,i!==null&&(i.flags|=32),dn}function jt(i,s,r){(i===et&&(Ke===2||Ke===9)||i.cancelPendingCommit!==null)&&(ms(i,0),Yi(i,Me,dn,!1)),He(i,r),((Fe&2)===0||i!==et)&&(i===et&&((Fe&2)===0&&(Ao|=r),ft===4&&Yi(i,Me,dn,!1)),Yn(i))}function Ng(i,s,r){if((Fe&6)!==0)throw Error(o(327));var u=!r&&(s&127)===0&&(s&i.expiredLanes)===0||de(i,s),p=u?rC(i,s):vf(i,s,!0),y=u;do{if(p===0){ds&&!u&&Yi(i,s,0,!1);break}else{if(r=i.current.alternate,y&&!sC(r)){p=vf(i,s,!1),y=!1;continue}if(p===2){if(y=s,i.errorRecoveryDisabledLanes&y)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var C=i;p=Al;var N=C.current.memoizedState.isDehydrated;if(N&&(ms(C,T).flags|=256),T=vf(C,T,!1),T!==2){if(df&&!N){C.errorRecoveryDisabledLanes|=y,Ao|=y,p=4;break e}y=Zt,Zt=p,y!==null&&(Zt===null?Zt=y:Zt.push.apply(Zt,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){ms(i,0),Yi(i,s,0,!0);break}e:{switch(u=i,y=p,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Yi(u,s,dn,!Vi);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(p=fa+300-Ft(),10<p)){if(Yi(u,s,dn,!Vi),Z(u,0,!0)!==0)break e;mi=s,u.timeoutHandle=iy(bg.bind(null,u,r,Zt,ha,pf,s,dn,Ao,hs,Vi,y,"Throttled",-0,0),p);break e}bg(u,r,Zt,ha,pf,s,dn,Ao,hs,Vi,y,null,-0,0)}}break}while(!0);Yn(i)}function bg(i,s,r,u,p,y,T,C,N,U,B,F,L,O){if(i.timeoutHandle=-1,F=s.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},vg(s,y,F);var oe=(y&62914560)===y?fa-Ft():(y&4194048)===y?Cg-Ft():0;if(oe=qC(F,oe),oe!==null){mi=y,i.cancelPendingCommit=oe(Lg.bind(null,i,s,y,r,u,p,T,C,N,B,F,null,L,O)),Yi(i,y,T,!U);return}}Lg(i,s,y,r,u,p,T,C,N)}function sC(i){for(var s=i;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],y=p.getSnapshot;p=p.value;try{if(!rn(y(),p))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yi(i,s,r,u){s&=~hf,s&=~Ao,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var p=s;0<p;){var y=31-wt(p),T=1<<y;u[y]=-1,p&=~T}r!==0&&In(i,r,s)}function pa(){return(Fe&6)===0?(Nl(0),!1):!0}function _f(){if(Re!==null){if(Ke===0)var i=Re.return;else i=Re,oi=mo=null,Uc(i),ss=null,al=0,i=Re;for(;i!==null;)og(i.alternate,i),i=i.return;Re=null}}function ms(i,s){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,xC(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),mi=0,_f(),et=i,Re=r=ni(i.current,null),Me=s,Ke=0,fn=null,Vi=!1,ds=de(i,s),df=!1,hs=dn=hf=Ao=Fi=ft=0,Zt=Al=null,pf=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var p=31-wt(u),y=1<<p;s|=i[p],u&=~y}return pi=s,Lr(),r}function Rg(i,s){Te=null,H.H=gl,s===os||s===qr?(s=zp(),Ke=3):s===Tc?(s=zp(),Ke=4):Ke=s===Xc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,Re===null&&(ft=1,ia(i,vn(s,i.current)))}function Ig(){var i=un.current;return i===null?!0:(Me&4194048)===Me?Cn===null:(Me&62914560)===Me||(Me&536870912)!==0?i===Cn:!1}function wg(){var i=H.H;return H.H=gl,i===null?gl:i}function Mg(){var i=H.A;return H.A=iC,i}function ma(){ft=4,Vi||(Me&4194048)!==Me&&un.current!==null||(ds=!0),(Fi&134217727)===0&&(Ao&134217727)===0||et===null||Yi(et,Me,dn,!1)}function vf(i,s,r){var u=Fe;Fe|=2;var p=wg(),y=Mg();(et!==i||Me!==s)&&(ha=null,ms(i,s)),s=!1;var T=ft;e:do try{if(Ke!==0&&Re!==null){var C=Re,N=fn;switch(Ke){case 8:_f(),T=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(s=!0);var U=Ke;if(Ke=0,fn=null,gs(i,C,N,U),r&&ds){T=0;break e}break;default:U=Ke,Ke=0,fn=null,gs(i,C,N,U)}}lC(),T=ft;break}catch(B){Rg(i,B)}while(!0);return s&&i.shellSuspendCounter++,oi=mo=null,Fe=u,H.H=p,H.A=y,Re===null&&(et=null,Me=0,Lr()),T}function lC(){for(;Re!==null;)Dg(Re)}function rC(i,s){var r=Fe;Fe|=2;var u=wg(),p=Mg();et!==i||Me!==s?(ha=null,da=Ft()+500,ms(i,s)):ds=de(i,s);e:do try{if(Ke!==0&&Re!==null){s=Re;var y=fn;t:switch(Ke){case 1:Ke=0,fn=null,gs(i,s,y,1);break;case 2:case 9:if(Fp(y)){Ke=0,fn=null,Ug(s);break}s=function(){Ke!==2&&Ke!==9||et!==i||(Ke=7),Yn(i)},y.then(s,s);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Fp(y)?(Ke=0,fn=null,Ug(s)):(Ke=0,fn=null,gs(i,s,y,7));break;case 5:var T=null;switch(Re.tag){case 26:T=Re.memoizedState;case 5:case 27:var C=Re;if(T?_y(T):C.stateNode.complete){Ke=0,fn=null;var N=C.sibling;if(N!==null)Re=N;else{var U=C.return;U!==null?(Re=U,ga(U)):Re=null}break t}}Ke=0,fn=null,gs(i,s,y,5);break;case 6:Ke=0,fn=null,gs(i,s,y,6);break;case 8:_f(),ft=6;break e;default:throw Error(o(462))}}aC();break}catch(B){Rg(i,B)}while(!0);return oi=mo=null,H.H=u,H.A=p,Fe=r,Re!==null?0:(et=null,Me=0,Lr(),ft)}function aC(){for(;Re!==null&&!Lu();)Dg(Re)}function Dg(i){var s=ng(i.alternate,i,pi);i.memoizedProps=i.pendingProps,s===null?ga(i):Re=s}function Ug(i){var s=i,r=s.alternate;switch(s.tag){case 15:case 0:s=$m(r,s,s.pendingProps,s.type,void 0,Me);break;case 11:s=$m(r,s,s.pendingProps,s.type.render,s.ref,Me);break;case 5:Uc(s);default:og(r,s),s=Re=Mp(s,pi),s=ng(r,s,pi)}i.memoizedProps=i.pendingProps,s===null?ga(i):Re=s}function gs(i,s,r,u){oi=mo=null,Uc(s),ss=null,al=0;var p=s.return;try{if($S(i,p,s,r,Me)){ft=1,ia(i,vn(r,i.current)),Re=null;return}}catch(y){if(p!==null)throw Re=p,y;ft=1,ia(i,vn(r,i.current)),Re=null;return}s.flags&32768?(Ue||u===1?i=!0:ds||(Me&536870912)!==0?i=!1:(Vi=i=!0,(u===2||u===9||u===3||u===6)&&(u=un.current,u!==null&&u.tag===13&&(u.flags|=16384))),kg(s,i)):ga(s)}function ga(i){var s=i;do{if((s.flags&32768)!==0){kg(s,Vi);return}i=s.return;var r=jS(s.alternate,s,pi);if(r!==null){Re=r;return}if(s=s.sibling,s!==null){Re=s;return}Re=s=i}while(s!==null);ft===0&&(ft=5)}function kg(i,s){do{var r=eC(i.alternate,i);if(r!==null){r.flags&=32767,Re=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(i=i.sibling,i!==null)){Re=i;return}Re=i=r}while(i!==null);ft=6,Re=null}function Lg(i,s,r,u,p,y,T,C,N){i.cancelPendingCommit=null;do ya();while(St!==0);if((Fe&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=lc,Tt(i,r,y,T,C,N),i===et&&(Re=et=null,Me=0),ps=s,zi=i,mi=r,mf=y,gf=p,Ag=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,dC(Ho,function(){return Gg(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,p=$.p,$.p=2,T=Fe,Fe|=4;try{tC(i,s,r)}finally{Fe=T,$.p=p,H.T=u}}St=1,Pg(),Og(),Hg()}}function Pg(){if(St===1){St=0;var i=zi,s=ps,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=H.T,H.T=null;var u=$.p;$.p=2;var p=Fe;Fe|=4;try{gg(s,i);var y=Mf,T=Sp(i.containerInfo),C=y.focusedElem,N=y.selectionRange;if(T!==C&&C&&C.ownerDocument&&Tp(C.ownerDocument.documentElement,C)){if(N!==null&&tc(C)){var U=N.start,B=N.end;if(B===void 0&&(B=U),"selectionStart"in C)C.selectionStart=U,C.selectionEnd=Math.min(B,C.value.length);else{var F=C.ownerDocument||document,L=F&&F.defaultView||window;if(L.getSelection){var O=L.getSelection(),oe=C.textContent.length,ce=Math.min(N.start,oe),je=N.end===void 0?ce:Math.min(N.end,oe);!O.extend&&ce>je&&(T=je,je=ce,ce=T);var w=Ep(C,ce),R=Ep(C,je);if(w&&R&&(O.rangeCount!==1||O.anchorNode!==w.node||O.anchorOffset!==w.offset||O.focusNode!==R.node||O.focusOffset!==R.offset)){var D=F.createRange();D.setStart(w.node,w.offset),O.removeAllRanges(),ce>je?(O.addRange(D),O.extend(R.node,R.offset)):(D.setEnd(R.node,R.offset),O.addRange(D))}}}}for(F=[],O=C;O=O.parentNode;)O.nodeType===1&&F.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<F.length;C++){var G=F[C];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Ia=!!wf,Mf=wf=null}finally{Fe=p,$.p=u,H.T=r}}i.current=s,St=2}}function Og(){if(St===2){St=0;var i=zi,s=ps,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=H.T,H.T=null;var u=$.p;$.p=2;var p=Fe;Fe|=4;try{fg(i,s.alternate,s)}finally{Fe=p,$.p=u,H.T=r}}St=3}}function Hg(){if(St===4||St===3){St=0,gr();var i=zi,s=ps,r=mi,u=Ag;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?St=5:(St=0,ps=zi=null,Bg(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(qi=null),Je(r),s=s.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Ni,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=H.T,p=$.p,$.p=2,H.T=null;try{for(var y=i.onRecoverableError,T=0;T<u.length;T++){var C=u[T];y(C.value,{componentStack:C.stack})}}finally{H.T=s,$.p=p}}(mi&3)!==0&&ya(),Yn(i),p=i.pendingLanes,(r&261930)!==0&&(p&42)!==0?i===yf?xl++:(xl=0,yf=i):xl=0,Nl(0)}}function Bg(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,ll(s)))}function ya(){return Pg(),Og(),Hg(),Gg()}function Gg(){if(St!==5)return!1;var i=zi,s=mf;mf=0;var r=Je(mi),u=H.T,p=$.p;try{$.p=32>r?32:r,H.T=null,r=gf,gf=null;var y=zi,T=mi;if(St=0,ps=zi=null,mi=0,(Fe&6)!==0)throw Error(o(331));var C=Fe;if(Fe|=4,Tg(y.current),_g(y,y.current,T,r),Fe=C,Nl(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Ni,y)}catch{}return!0}finally{$.p=p,H.T=u,Bg(i,s)}}function Vg(i,s,r){s=vn(r,s),s=Qc(i.stateNode,s,2),i=Oi(i,s,2),i!==null&&(He(i,2),Yn(i))}function Qe(i,s,r){if(i.tag===3)Vg(i,i,r);else for(;s!==null;){if(s.tag===3){Vg(s,i,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(qi===null||!qi.has(u))){i=vn(r,i),r=Fm(2),u=Oi(s,r,2),u!==null&&(qm(r,u,s,i),He(u,2),Yn(u));break}}s=s.return}}function Ef(i,s,r){var u=i.pingCache;if(u===null){u=i.pingCache=new oC;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(r)||(df=!0,p.add(r),i=uC.bind(null,i,s,r),s.then(i,i))}function uC(i,s,r){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,et===i&&(Me&r)===r&&(ft===4||ft===3&&(Me&62914560)===Me&&300>Ft()-fa?(Fe&2)===0&&ms(i,0):hf|=r,hs===Me&&(hs=0)),Yn(i)}function Fg(i,s){s===0&&(s=te()),i=fo(i,s),i!==null&&(He(i,s),Yn(i))}function cC(i){var s=i.memoizedState,r=0;s!==null&&(r=s.retryLane),Fg(i,r)}function fC(i,s){var r=0;switch(i.tag){case 31:case 13:var u=i.stateNode,p=i.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Fg(i,r)}function dC(i,s){return Oo(i,s)}var _a=null,ys=null,Tf=!1,va=!1,Sf=!1,Ji=0;function Yn(i){i!==ys&&i.next===null&&(ys===null?_a=ys=i:ys=ys.next=i),va=!0,Tf||(Tf=!0,pC())}function Nl(i,s){if(!Sf&&va){Sf=!0;do for(var r=!1,u=_a;u!==null;){if(i!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var T=u.suspendedLanes,C=u.pingedLanes;y=(1<<31-wt(42|i)+1)-1,y&=p&~(T&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Jg(u,y))}else y=Me,y=Z(u,u===et?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||de(u,y)||(r=!0,Jg(u,y));u=u.next}while(r);Sf=!1}}function hC(){qg()}function qg(){va=Tf=!1;var i=0;Ji!==0&&AC()&&(i=Ji);for(var s=Ft(),r=null,u=_a;u!==null;){var p=u.next,y=zg(u,s);y===0?(u.next=null,r===null?_a=p:r.next=p,p===null&&(ys=r)):(r=u,(i!==0||(y&3)!==0)&&(va=!0)),u=p}St!==0&&St!==5||Nl(i),Ji!==0&&(Ji=0)}function zg(i,s){for(var r=i.suspendedLanes,u=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var T=31-wt(y),C=1<<T,N=p[T];N===-1?((C&r)===0||(C&u)!==0)&&(p[T]=he(C,s)):N<=s&&(i.expiredLanes|=C),y&=~C}if(s=et,r=Me,r=Z(i,i===s?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,r===0||i===s&&(Ke===2||Ke===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&lo(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||de(i,r)){if(s=r&-r,s===i.callbackPriority)return s;switch(u!==null&&lo(u),Je(r)){case 2:case 8:r=_r;break;case 32:r=Ho;break;case 268435456:r=Er;break;default:r=Ho}return u=Yg.bind(null,i),r=Oo(r,u),i.callbackPriority=s,i.callbackNode=r,s}return u!==null&&u!==null&&lo(u),i.callbackPriority=2,i.callbackNode=null,2}function Yg(i,s){if(St!==0&&St!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(ya()&&i.callbackNode!==r)return null;var u=Me;return u=Z(i,i===et?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Ng(i,u,s),zg(i,Ft()),i.callbackNode!=null&&i.callbackNode===r?Yg.bind(null,i):null)}function Jg(i,s){if(ya())return null;Ng(i,s,!0)}function pC(){NC(function(){(Fe&6)!==0?Oo(yr,hC):qg()})}function Cf(){if(Ji===0){var i=ns;i===0&&(i=x,x<<=1,(x&261888)===0&&(x=256)),Ji=i}return Ji}function Kg(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:br(""+i)}function Qg(i,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,i.id&&r.setAttribute("form",i.id),s.parentNode.insertBefore(r,s),i=new FormData(i),r.parentNode.removeChild(r),i}function mC(i,s,r,u,p){if(s==="submit"&&r&&r.stateNode===p){var y=Kg((p[Dt]||null).action),T=u.submitter;T&&(s=(s=T[Dt]||null)?Kg(s.formAction):T.getAttribute("formAction"),s!==null&&(y=s,T=null));var C=new Mr("action","action",null,u,p);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ji!==0){var N=T?Qg(p,T):new FormData(p);Fc(r,{pending:!0,data:N,method:p.method,action:y},null,N)}}else typeof y=="function"&&(C.preventDefault(),N=T?Qg(p,T):new FormData(p),Fc(r,{pending:!0,data:N,method:p.method,action:y},y,N))},currentTarget:p}]})}}for(var Af=0;Af<sc.length;Af++){var xf=sc[Af],gC=xf.toLowerCase(),yC=xf[0].toUpperCase()+xf.slice(1);Dn(gC,"on"+yC)}Dn(xp,"onAnimationEnd"),Dn(Np,"onAnimationIteration"),Dn(bp,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(US,"onTransitionRun"),Dn(kS,"onTransitionStart"),Dn(LS,"onTransitionCancel"),Dn(Rp,"onTransitionEnd"),Fo("onMouseEnter",["mouseout","mouseover"]),Fo("onMouseLeave",["mouseout","mouseover"]),Fo("onPointerEnter",["pointerout","pointerover"]),Fo("onPointerLeave",["pointerout","pointerover"]),ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ro("onBeforeInput",["compositionend","keypress","textInput","paste"]),ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_C=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bl));function Xg(i,s){s=(s&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],p=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var T=u.length-1;0<=T;T--){var C=u[T],N=C.instance,U=C.currentTarget;if(C=C.listener,N!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=U;try{y(p)}catch(B){kr(B)}p.currentTarget=null,y=N}else for(T=0;T<u.length;T++){if(C=u[T],N=C.instance,U=C.currentTarget,C=C.listener,N!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=U;try{y(p)}catch(B){kr(B)}p.currentTarget=null,y=N}}}}function Ie(i,s){var r=s[Bo];r===void 0&&(r=s[Bo]=new Set);var u=i+"__bubble";r.has(u)||($g(s,i,2,!1),r.add(u))}function Nf(i,s,r){var u=0;s&&(u|=4),$g(r,i,u,s)}var Ea="_reactListening"+Math.random().toString(36).slice(2);function bf(i){if(!i[Ea]){i[Ea]=!0,zt.forEach(function(r){r!=="selectionchange"&&(_C.has(r)||Nf(r,!1,i),Nf(r,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Ea]||(s[Ea]=!0,Nf("selectionchange",!1,s))}}function $g(i,s,r,u){switch(xy(s)){case 2:var p=JC;break;case 8:p=KC;break;default:p=Ff}r=p.bind(null,s,r,i),p=void 0,!Ju||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?i.addEventListener(s,r,{capture:!0,passive:p}):i.addEventListener(s,r,!0):p!==void 0?i.addEventListener(s,r,{passive:p}):i.addEventListener(s,r,!1)}function Rf(i,s,r,u,p){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var C=u.stateNode.containerInfo;if(C===p)break;if(T===4)for(T=u.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;C!==null;){if(T=$n(C),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){u=y=T;continue e}C=C.parentNode}}u=u.return}tp(function(){var U=y,B=zu(r),F=[];e:{var L=Ip.get(i);if(L!==void 0){var O=Mr,oe=i;switch(i){case"keypress":if(Ir(r)===0)break e;case"keydown":case"keyup":O=fS;break;case"focusin":oe="focus",O=$u;break;case"focusout":oe="blur",O=$u;break;case"beforeblur":case"afterblur":O=$u;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=jT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=pS;break;case xp:case Np:case bp:O=nS;break;case Rp:O=gS;break;case"scroll":case"scrollend":O=WT;break;case"wheel":O=_S;break;case"copy":case"cut":case"paste":O=oS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=lp;break;case"toggle":case"beforetoggle":O=ES}var ce=(s&4)!==0,je=!ce&&(i==="scroll"||i==="scrollend"),w=ce?L!==null?L+"Capture":null:L;ce=[];for(var R=U,D;R!==null;){var G=R;if(D=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||D===null||w===null||(G=Xs(R,w),G!=null&&ce.push(Rl(R,G,D))),je)break;R=R.return}0<ce.length&&(L=new O(L,oe,null,r,B),F.push({event:L,listeners:ce}))}}if((s&7)===0){e:{if(L=i==="mouseover"||i==="pointerover",O=i==="mouseout"||i==="pointerout",L&&r!==qu&&(oe=r.relatedTarget||r.fromElement)&&($n(oe)||oe[Xn]))break e;if((O||L)&&(L=B.window===B?B:(L=B.ownerDocument)?L.defaultView||L.parentWindow:window,O?(oe=r.relatedTarget||r.toElement,O=U,oe=oe?$n(oe):null,oe!==null&&(je=a(oe),ce=oe.tag,oe!==je||ce!==5&&ce!==27&&ce!==6)&&(oe=null)):(O=null,oe=U),O!==oe)){if(ce=op,G="onMouseLeave",w="onMouseEnter",R="mouse",(i==="pointerout"||i==="pointerover")&&(ce=lp,G="onPointerLeave",w="onPointerEnter",R="pointer"),je=O==null?L:Ii(O),D=oe==null?L:Ii(oe),L=new ce(G,R+"leave",O,r,B),L.target=je,L.relatedTarget=D,G=null,$n(B)===U&&(ce=new ce(w,R+"enter",oe,r,B),ce.target=D,ce.relatedTarget=je,G=ce),je=G,O&&oe)t:{for(ce=vC,w=O,R=oe,D=0,G=w;G;G=ce(G))D++;G=0;for(var ue=R;ue;ue=ce(ue))G++;for(;0<D-G;)w=ce(w),D--;for(;0<G-D;)R=ce(R),G--;for(;D--;){if(w===R||R!==null&&w===R.alternate){ce=w;break t}w=ce(w),R=ce(R)}ce=null}else ce=null;O!==null&&Wg(F,L,O,ce,!1),oe!==null&&je!==null&&Wg(F,je,oe,ce,!0)}}e:{if(L=U?Ii(U):window,O=L.nodeName&&L.nodeName.toLowerCase(),O==="select"||O==="input"&&L.type==="file")var Be=pp;else if(dp(L))if(mp)Be=wS;else{Be=RS;var re=bS}else O=L.nodeName,!O||O.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?U&&Fu(U.elementType)&&(Be=pp):Be=IS;if(Be&&(Be=Be(i,U))){hp(F,Be,r,B);break e}re&&re(i,L,U),i==="focusout"&&U&&L.type==="number"&&U.memoizedProps.value!=null&&Vu(L,"number",L.value)}switch(re=U?Ii(U):window,i){case"focusin":(dp(re)||re.contentEditable==="true")&&(Qo=re,nc=U,il=null);break;case"focusout":il=nc=Qo=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,Cp(F,r,B);break;case"selectionchange":if(DS)break;case"keydown":case"keyup":Cp(F,r,B)}var Ce;if(Zu)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Ko?cp(i,r)&&(De="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(De="onCompositionStart");De&&(rp&&r.locale!=="ko"&&(Ko||De!=="onCompositionStart"?De==="onCompositionEnd"&&Ko&&(Ce=np()):(wi=B,Ku="value"in wi?wi.value:wi.textContent,Ko=!0)),re=Ta(U,De),0<re.length&&(De=new sp(De,i,null,r,B),F.push({event:De,listeners:re}),Ce?De.data=Ce:(Ce=fp(r),Ce!==null&&(De.data=Ce)))),(Ce=SS?CS(i,r):AS(i,r))&&(De=Ta(U,"onBeforeInput"),0<De.length&&(re=new sp("onBeforeInput","beforeinput",null,r,B),F.push({event:re,listeners:De}),re.data=Ce)),mC(F,i,U,r,B)}Xg(F,s)})}function Rl(i,s,r){return{instance:i,listener:s,currentTarget:r}}function Ta(i,s){for(var r=s+"Capture",u=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Xs(i,r),p!=null&&u.unshift(Rl(i,p,y)),p=Xs(i,s),p!=null&&u.push(Rl(i,p,y))),i.tag===3)return u;i=i.return}return[]}function vC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Wg(i,s,r,u,p){for(var y=s._reactName,T=[];r!==null&&r!==u;){var C=r,N=C.alternate,U=C.stateNode;if(C=C.tag,N!==null&&N===u)break;C!==5&&C!==26&&C!==27||U===null||(N=U,p?(U=Xs(r,y),U!=null&&T.unshift(Rl(r,U,N))):p||(U=Xs(r,y),U!=null&&T.push(Rl(r,U,N)))),r=r.return}T.length!==0&&i.push({event:s,listeners:T})}var EC=/\r\n?/g,TC=/\u0000|\uFFFD/g;function Zg(i){return(typeof i=="string"?i:""+i).replace(EC,`
`).replace(TC,"")}function jg(i,s){return s=Zg(s),Zg(i)===s}function Ze(i,s,r,u,p,y){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||zo(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&zo(i,""+u);break;case"className":xr(i,"class",u);break;case"tabIndex":xr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(i,r,u);break;case"style":jh(i,u,y);break;case"data":if(s!=="object"){xr(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=br(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&Ze(i,s,"name",p.name,p,null),Ze(i,s,"formEncType",p.formEncType,p,null),Ze(i,s,"formMethod",p.formMethod,p,null),Ze(i,s,"formTarget",p.formTarget,p,null)):(Ze(i,s,"encType",p.encType,p,null),Ze(i,s,"method",p.method,p,null),Ze(i,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=br(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=ei);break;case"onScroll":u!=null&&Ie("scroll",i);break;case"onScrollEnd":u!=null&&Ie("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=br(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":Ie("beforetoggle",i),Ie("toggle",i),Ar(i,"popover",u);break;case"xlinkActuate":jn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":jn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":jn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":jn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":jn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":jn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":jn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":jn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":jn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ar(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=XT.get(r)||r,Ar(i,r,u))}}function If(i,s,r,u,p,y){switch(r){case"style":jh(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(o(60));i.innerHTML=r}}break;case"children":typeof u=="string"?zo(i,u):(typeof u=="number"||typeof u=="bigint")&&zo(i,""+u);break;case"onScroll":u!=null&&Ie("scroll",i);break;case"onScrollEnd":u!=null&&Ie("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),s=r.slice(2,p?r.length-7:void 0),y=i[Dt]||null,y=y!=null?y[r]:null,typeof y=="function"&&i.removeEventListener(s,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(s,u,p);break e}r in i?i[r]=u:u===!0?i.setAttribute(r,""):Ar(i,r,u)}}}function Pt(i,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",i),Ie("load",i);var u=!1,p=!1,y;for(y in r)if(r.hasOwnProperty(y)){var T=r[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Ze(i,s,y,T,r,null)}}p&&Ze(i,s,"srcSet",r.srcSet,r,null),u&&Ze(i,s,"src",r.src,r,null);return;case"input":Ie("invalid",i);var C=y=T=p=null,N=null,U=null;for(u in r)if(r.hasOwnProperty(u)){var B=r[u];if(B!=null)switch(u){case"name":p=B;break;case"type":T=B;break;case"checked":N=B;break;case"defaultChecked":U=B;break;case"value":y=B;break;case"defaultValue":C=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,s));break;default:Ze(i,s,u,B,r,null)}}Xh(i,y,C,N,U,T,p,!1);return;case"select":Ie("invalid",i),u=T=y=null;for(p in r)if(r.hasOwnProperty(p)&&(C=r[p],C!=null))switch(p){case"value":y=C;break;case"defaultValue":T=C;break;case"multiple":u=C;default:Ze(i,s,p,C,r,null)}s=y,r=T,i.multiple=!!u,s!=null?qo(i,!!u,s,!1):r!=null&&qo(i,!!u,r,!0);return;case"textarea":Ie("invalid",i),y=p=u=null;for(T in r)if(r.hasOwnProperty(T)&&(C=r[T],C!=null))switch(T){case"value":u=C;break;case"defaultValue":p=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:Ze(i,s,T,C,r,null)}Wh(i,u,p,y);return;case"option":for(N in r)if(r.hasOwnProperty(N)&&(u=r[N],u!=null))switch(N){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ze(i,s,N,u,r,null)}return;case"dialog":Ie("beforetoggle",i),Ie("toggle",i),Ie("cancel",i),Ie("close",i);break;case"iframe":case"object":Ie("load",i);break;case"video":case"audio":for(u=0;u<bl.length;u++)Ie(bl[u],i);break;case"image":Ie("error",i),Ie("load",i);break;case"details":Ie("toggle",i);break;case"embed":case"source":case"link":Ie("error",i),Ie("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(u=r[U],u!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Ze(i,s,U,u,r,null)}return;default:if(Fu(s)){for(B in r)r.hasOwnProperty(B)&&(u=r[B],u!==void 0&&If(i,s,B,u,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(u=r[C],u!=null&&Ze(i,s,C,u,r,null))}function SC(i,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,C=null,N=null,U=null,B=null;for(O in r){var F=r[O];if(r.hasOwnProperty(O)&&F!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":N=F;default:u.hasOwnProperty(O)||Ze(i,s,O,null,u,F)}}for(var L in u){var O=u[L];if(F=r[L],u.hasOwnProperty(L)&&(O!=null||F!=null))switch(L){case"type":y=O;break;case"name":p=O;break;case"checked":U=O;break;case"defaultChecked":B=O;break;case"value":T=O;break;case"defaultValue":C=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(o(137,s));break;default:O!==F&&Ze(i,s,L,O,u,F)}}Gu(i,T,C,N,U,B,y,p);return;case"select":O=T=C=L=null;for(y in r)if(N=r[y],r.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":O=N;default:u.hasOwnProperty(y)||Ze(i,s,y,null,u,N)}for(p in u)if(y=u[p],N=r[p],u.hasOwnProperty(p)&&(y!=null||N!=null))switch(p){case"value":L=y;break;case"defaultValue":C=y;break;case"multiple":T=y;default:y!==N&&Ze(i,s,p,y,u,N)}s=C,r=T,u=O,L!=null?qo(i,!!r,L,!1):!!u!=!!r&&(s!=null?qo(i,!!r,s,!0):qo(i,!!r,r?[]:"",!1));return;case"textarea":O=L=null;for(C in r)if(p=r[C],r.hasOwnProperty(C)&&p!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ze(i,s,C,null,u,p)}for(T in u)if(p=u[T],y=r[T],u.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":L=p;break;case"defaultValue":O=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==y&&Ze(i,s,T,p,u,y)}$h(i,L,O);return;case"option":for(var oe in r)if(L=r[oe],r.hasOwnProperty(oe)&&L!=null&&!u.hasOwnProperty(oe))switch(oe){case"selected":i.selected=!1;break;default:Ze(i,s,oe,null,u,L)}for(N in u)if(L=u[N],O=r[N],u.hasOwnProperty(N)&&L!==O&&(L!=null||O!=null))switch(N){case"selected":i.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Ze(i,s,N,L,u,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in r)L=r[ce],r.hasOwnProperty(ce)&&L!=null&&!u.hasOwnProperty(ce)&&Ze(i,s,ce,null,u,L);for(U in u)if(L=u[U],O=r[U],u.hasOwnProperty(U)&&L!==O&&(L!=null||O!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,s));break;default:Ze(i,s,U,L,u,O)}return;default:if(Fu(s)){for(var je in r)L=r[je],r.hasOwnProperty(je)&&L!==void 0&&!u.hasOwnProperty(je)&&If(i,s,je,void 0,u,L);for(B in u)L=u[B],O=r[B],!u.hasOwnProperty(B)||L===O||L===void 0&&O===void 0||If(i,s,B,L,u,O);return}}for(var w in r)L=r[w],r.hasOwnProperty(w)&&L!=null&&!u.hasOwnProperty(w)&&Ze(i,s,w,null,u,L);for(F in u)L=u[F],O=r[F],!u.hasOwnProperty(F)||L===O||L==null&&O==null||Ze(i,s,F,L,u,O)}function ey(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],y=p.transferSize,T=p.initiatorType,C=p.duration;if(y&&C&&ey(T)){for(T=0,C=p.responseEnd,u+=1;u<r.length;u++){var N=r[u],U=N.startTime;if(U>C)break;var B=N.transferSize,F=N.initiatorType;B&&ey(F)&&(N=N.responseEnd,T+=B*(N<C?1:(C-U)/(N-U)))}if(--u,s+=8*(y+T)/(p.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var wf=null,Mf=null;function Sa(i){return i.nodeType===9?i:i.ownerDocument}function ty(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ny(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Df(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Uf=null;function AC(){var i=window.event;return i&&i.type==="popstate"?i===Uf?!1:(Uf=i,!0):(Uf=null,!1)}var iy=typeof setTimeout=="function"?setTimeout:void 0,xC=typeof clearTimeout=="function"?clearTimeout:void 0,oy=typeof Promise=="function"?Promise:void 0,NC=typeof queueMicrotask=="function"?queueMicrotask:typeof oy<"u"?function(i){return oy.resolve(null).then(i).catch(bC)}:iy;function bC(i){setTimeout(function(){throw i})}function Ki(i){return i==="head"}function sy(i,s){var r=s,u=0;do{var p=r.nextSibling;if(i.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){i.removeChild(p),Ts(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Il(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,Il(r);for(var y=r.firstChild;y;){var T=y.nextSibling,C=y.nodeName;y[Ri]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=T}}else r==="body"&&Il(i.ownerDocument.body);r=p}while(r);Ts(s)}function ly(i,s){var r=i;i=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=u}while(r)}function kf(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":kf(r),Go(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function RC(i,s,r,u){for(;i.nodeType===1;){var p=r;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ri])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=An(i.nextSibling),i===null)break}return null}function IC(i,s,r){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=An(i.nextSibling),i===null))return null;return i}function ry(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=An(i.nextSibling),i===null))return null;return i}function Lf(i){return i.data==="$?"||i.data==="$~"}function Pf(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function wC(i,s){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function An(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Of=null;function ay(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(s===0)return An(i.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}i=i.nextSibling}return null}function uy(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return i;s--}else r!=="/$"&&r!=="/&"||s++}i=i.previousSibling}return null}function cy(i,s,r){switch(s=Sa(r),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function Il(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Go(i)}var xn=new Map,fy=new Set;function Ca(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var gi=$.d;$.d={f:MC,r:DC,D:UC,C:kC,L:LC,m:PC,X:HC,S:OC,M:BC};function MC(){var i=gi.f(),s=pa();return i||s}function DC(i){var s=Wn(i);s!==null&&s.tag===5&&s.type==="form"?Rm(s):gi.r(i)}var _s=typeof document>"u"?null:document;function dy(i,s,r){var u=_s;if(u&&typeof s=="string"&&s){var p=yn(s);p='link[rel="'+i+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),fy.has(p)||(fy.add(p),i={rel:i,crossOrigin:r,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),Pt(s,"link",i),se(s),u.head.appendChild(s)))}}function UC(i){gi.D(i),dy("dns-prefetch",i,null)}function kC(i,s){gi.C(i,s),dy("preconnect",i,s)}function LC(i,s,r){gi.L(i,s,r);var u=_s;if(u&&i&&s){var p='link[rel="preload"][as="'+yn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+yn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+yn(r.imageSizes)+'"]')):p+='[href="'+yn(i)+'"]';var y=p;switch(s){case"style":y=vs(i);break;case"script":y=Es(i)}xn.has(y)||(i=v({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:i,as:s},r),xn.set(y,i),u.querySelector(p)!==null||s==="style"&&u.querySelector(wl(y))||s==="script"&&u.querySelector(Ml(y))||(s=u.createElement("link"),Pt(s,"link",i),se(s),u.head.appendChild(s)))}}function PC(i,s){gi.m(i,s);var r=_s;if(r&&i){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(i)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Es(i)}if(!xn.has(y)&&(i=v({rel:"modulepreload",href:i},s),xn.set(y,i),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ml(y)))return}u=r.createElement("link"),Pt(u,"link",i),se(u),r.head.appendChild(u)}}}function OC(i,s,r){gi.S(i,s,r);var u=_s;if(u&&i){var p=Zn(u).hoistableStyles,y=vs(i);s=s||"default";var T=p.get(y);if(!T){var C={loading:0,preload:null};if(T=u.querySelector(wl(y)))C.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},r),(r=xn.get(y))&&Hf(i,r);var N=T=u.createElement("link");se(N),Pt(N,"link",i),N._p=new Promise(function(U,B){N.onload=U,N.onerror=B}),N.addEventListener("load",function(){C.loading|=1}),N.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Aa(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:C},p.set(y,T)}}}function HC(i,s){gi.X(i,s);var r=_s;if(r&&i){var u=Zn(r).hoistableScripts,p=Es(i),y=u.get(p);y||(y=r.querySelector(Ml(p)),y||(i=v({src:i,async:!0},s),(s=xn.get(p))&&Bf(i,s),y=r.createElement("script"),se(y),Pt(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function BC(i,s){gi.M(i,s);var r=_s;if(r&&i){var u=Zn(r).hoistableScripts,p=Es(i),y=u.get(p);y||(y=r.querySelector(Ml(p)),y||(i=v({src:i,async:!0,type:"module"},s),(s=xn.get(p))&&Bf(i,s),y=r.createElement("script"),se(y),Pt(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function hy(i,s,r,u){var p=(p=Se.current)?Ca(p):null;if(!p)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=vs(r.href),r=Zn(p).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=vs(r.href);var y=Zn(p).hoistableStyles,T=y.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,T),(y=p.querySelector(wl(i)))&&!y._p&&(T.instance=y,T.state.loading=5),xn.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},xn.set(i,r),y||GC(p,i,r,T.state))),s&&u===null)throw Error(o(528,""));return T}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Es(r),r=Zn(p).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function vs(i){return'href="'+yn(i)+'"'}function wl(i){return'link[rel="stylesheet"]['+i+"]"}function py(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function GC(i,s,r,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Pt(s,"link",r),se(s),i.head.appendChild(s))}function Es(i){return'[src="'+yn(i)+'"]'}function Ml(i){return"script[async]"+i}function my(i,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+yn(r.href)+'"]');if(u)return s.instance=u,se(u),u;var p=v({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),se(u),Pt(u,"style",p),Aa(u,r.precedence,i),s.instance=u;case"stylesheet":p=vs(r.href);var y=i.querySelector(wl(p));if(y)return s.state.loading|=4,s.instance=y,se(y),y;u=py(r),(p=xn.get(p))&&Hf(u,p),y=(i.ownerDocument||i).createElement("link"),se(y);var T=y;return T._p=new Promise(function(C,N){T.onload=C,T.onerror=N}),Pt(y,"link",u),s.state.loading|=4,Aa(y,r.precedence,i),s.instance=y;case"script":return y=Es(r.src),(p=i.querySelector(Ml(y)))?(s.instance=p,se(p),p):(u=r,(p=xn.get(y))&&(u=v({},r),Bf(u,p)),i=i.ownerDocument||i,p=i.createElement("script"),se(p),Pt(p,"link",u),i.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Aa(u,r.precedence,i));return s.instance}function Aa(i,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,T=0;T<u.length;T++){var C=u[T];if(C.dataset.precedence===s)y=C;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(i,s.firstChild))}function Hf(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Bf(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var xa=null;function gy(i,s,r){if(xa===null){var u=new Map,p=xa=new Map;p.set(r,u)}else p=xa,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),p=0;p<r.length;p++){var y=r[p];if(!(y[Ri]||y[gt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(s)||"";T=i+T;var C=u.get(T);C?C.push(y):u.set(T,[y])}}return u}function yy(i,s,r){i=i.ownerDocument||i,i.head.insertBefore(r,s==="title"?i.querySelector("head > title"):null)}function VC(i,s,r){if(r===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function _y(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function FC(i,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=vs(u.href),y=s.querySelector(wl(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Na.bind(i),s.then(i,i)),r.state.loading|=4,r.instance=y,se(y);return}y=s.ownerDocument||s,u=py(u),(p=xn.get(p))&&Hf(u,p),y=y.createElement("link"),se(y);var T=y;T._p=new Promise(function(C,N){T.onload=C,T.onerror=N}),Pt(y,"link",u),r.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=Na.bind(i),s.addEventListener("load",r),s.addEventListener("error",r))}}var Gf=0;function qC(i,s){return i.stylesheets&&i.count===0&&Ra(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var u=setTimeout(function(){if(i.stylesheets&&Ra(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+s);0<i.imgBytes&&Gf===0&&(Gf=62500*CC());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ra(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Gf?50:800)+s);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Na(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ra(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ba=null;function Ra(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ba=new Map,s.forEach(zC,i),ba=null,Na.call(i))}function zC(i,s){if(!(s.state.loading&4)){var r=ba.get(i);if(r)var u=r.get(null);else{r=new Map,ba.set(i,r);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),u=T)}u&&r.set(null,u)}p=s.instance,T=p.getAttribute("data-precedence"),y=r.get(T)||u,y===u&&r.set(null,p),r.set(T,p),this.count++,u=Na.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),s.state.loading|=4}}var Dl={$$typeof:J,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function YC(i,s,r,u,p,y,T,C,N){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pe(0),this.hiddenUpdates=pe(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function vy(i,s,r,u,p,y,T,C,N,U,B,F){return i=new YC(i,s,r,T,N,U,B,F,C),s=1,y===!0&&(s|=24),y=an(3,null,null,s),i.current=y,y.stateNode=i,s=_c(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:s},Sc(y),i}function Ey(i){return i?(i=Wo,i):Wo}function Ty(i,s,r,u,p,y){p=Ey(p),u.context===null?u.context=p:u.pendingContext=p,u=Pi(s),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Oi(i,u,s),r!==null&&(jt(r,i,s),cl(r,i,s))}function Sy(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<s?r:s}}function Vf(i,s){Sy(i,s),(i=i.alternate)&&Sy(i,s)}function Cy(i){if(i.tag===13||i.tag===31){var s=fo(i,67108864);s!==null&&jt(s,i,67108864),Vf(i,67108864)}}function Ay(i){if(i.tag===13||i.tag===31){var s=hn();s=Qn(s);var r=fo(i,s);r!==null&&jt(r,i,s),Vf(i,s)}}var Ia=!0;function JC(i,s,r,u){var p=H.T;H.T=null;var y=$.p;try{$.p=2,Ff(i,s,r,u)}finally{$.p=y,H.T=p}}function KC(i,s,r,u){var p=H.T;H.T=null;var y=$.p;try{$.p=8,Ff(i,s,r,u)}finally{$.p=y,H.T=p}}function Ff(i,s,r,u){if(Ia){var p=qf(u);if(p===null)Rf(i,s,u,wa,r),Ny(i,u);else if(XC(p,i,s,r,u))u.stopPropagation();else if(Ny(i,u),s&4&&-1<QC.indexOf(i)){for(;p!==null;){var y=Wn(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=z(y.pendingLanes);if(T!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var N=1<<31-wt(T);C.entanglements[1]|=N,T&=~N}Yn(y),(Fe&6)===0&&(da=Ft()+500,Nl(0))}}break;case 31:case 13:C=fo(y,2),C!==null&&jt(C,y,2),pa(),Vf(y,2)}if(y=qf(u),y===null&&Rf(i,s,u,wa,r),y===p)break;p=y}p!==null&&u.stopPropagation()}else Rf(i,s,u,null,r)}}function qf(i){return i=zu(i),zf(i)}var wa=null;function zf(i){if(wa=null,i=$n(i),i!==null){var s=a(i);if(s===null)i=null;else{var r=s.tag;if(r===13){if(i=c(s),i!==null)return i;i=null}else if(r===31){if(i=h(s),i!==null)return i;i=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return wa=i,null}function xy(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pu()){case yr:return 2;case _r:return 8;case Ho:case vr:return 32;case Er:return 268435456;default:return 32}default:return 32}}var Yf=!1,Qi=null,Xi=null,$i=null,Ul=new Map,kl=new Map,Wi=[],QC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ny(i,s){switch(i){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Ul.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(s.pointerId)}}function Ll(i,s,r,u,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Wn(s),s!==null&&Cy(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function XC(i,s,r,u,p){switch(s){case"focusin":return Qi=Ll(Qi,i,s,r,u,p),!0;case"dragenter":return Xi=Ll(Xi,i,s,r,u,p),!0;case"mouseover":return $i=Ll($i,i,s,r,u,p),!0;case"pointerover":var y=p.pointerId;return Ul.set(y,Ll(Ul.get(y)||null,i,s,r,u,p)),!0;case"gotpointercapture":return y=p.pointerId,kl.set(y,Ll(kl.get(y)||null,i,s,r,u,p)),!0}return!1}function by(i){var s=$n(i.target);if(s!==null){var r=a(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){i.blockedOn=s,$e(i.priority,function(){Ay(r)});return}}else if(s===31){if(s=h(r),s!==null){i.blockedOn=s,$e(i.priority,function(){Ay(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ma(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var r=qf(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);qu=u,r.target.dispatchEvent(u),qu=null}else return s=Wn(r),s!==null&&Cy(s),i.blockedOn=r,!1;s.shift()}return!0}function Ry(i,s,r){Ma(i)&&r.delete(s)}function $C(){Yf=!1,Qi!==null&&Ma(Qi)&&(Qi=null),Xi!==null&&Ma(Xi)&&(Xi=null),$i!==null&&Ma($i)&&($i=null),Ul.forEach(Ry),kl.forEach(Ry)}function Da(i,s){i.blockedOn===s&&(i.blockedOn=null,Yf||(Yf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$C)))}var Ua=null;function Iy(i){Ua!==i&&(Ua=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ua===i&&(Ua=null);for(var s=0;s<i.length;s+=3){var r=i[s],u=i[s+1],p=i[s+2];if(typeof u!="function"){if(zf(u||r)===null)continue;break}var y=Wn(r);y!==null&&(i.splice(s,3),s-=3,Fc(y,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function Ts(i){function s(N){return Da(N,i)}Qi!==null&&Da(Qi,i),Xi!==null&&Da(Xi,i),$i!==null&&Da($i,i),Ul.forEach(s),kl.forEach(s);for(var r=0;r<Wi.length;r++){var u=Wi[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Wi.length&&(r=Wi[0],r.blockedOn===null);)by(r),r.blockedOn===null&&Wi.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],y=r[u+1],T=p[Dt]||null;if(typeof y=="function")T||Iy(r);else if(T){var C=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[Dt]||null)C=T.formAction;else if(zf(p)!==null)continue}else C=T.action;typeof C=="function"?r[u+1]=C:(r.splice(u,3),u-=3),Iy(r)}}}function wy(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function Jf(i){this._internalRoot=i}ka.prototype.render=Jf.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var r=s.current,u=hn();Ty(r,u,i,s,null,null)},ka.prototype.unmount=Jf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Ty(i.current,2,null,i,null,null),pa(),s[Xn]=null}};function ka(i){this._internalRoot=i}ka.prototype.unstable_scheduleHydration=function(i){if(i){var s=be();i={blockedOn:null,target:i,priority:s};for(var r=0;r<Wi.length&&s!==0&&s<Wi[r].priority;r++);Wi.splice(r,0,i),r===0&&by(i)}};var My=e.version;if(My!=="19.2.3")throw Error(o(527,My,"19.2.3"));$.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var WC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var La=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!La.isDisabled&&La.supportsFiber)try{Ni=La.inject(WC),qt=La}catch{}}return Ol.createRoot=function(i,s){if(!l(i))throw Error(o(299));var r=!1,u="",p=Hm,y=Bm,T=Gm;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=vy(i,1,!1,null,null,r,u,null,p,y,T,wy),i[Xn]=s.current,bf(i),new Jf(s)},Ol.hydrateRoot=function(i,s,r){if(!l(i))throw Error(o(299));var u=!1,p="",y=Hm,T=Bm,C=Gm,N=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.formState!==void 0&&(N=r.formState)),s=vy(i,1,!0,s,r??null,u,p,N,y,T,C,wy),s.context=Ey(null),r=s.current,u=hn(),u=Qn(u),p=Pi(u),p.callback=null,Oi(r,p,u),r=u,s.current.lanes=r,He(s,r),Yn(s),i[Xn]=s.current,bf(i),new ka(s)},Ol.version="19.2.3",Ol}var Vy;function aA(){if(Vy)return Xf.exports;Vy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xf.exports=rA(),Xf.exports}var uA=aA();const cA=_0(uA);var fA={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dA,hA;function pA(){return{geminiUrl:dA,vertexUrl:hA}}function mA(t,e,n,o){var l,a;if(!(t!=null&&t.baseUrl)){const c=pA();return e?(l=c.vertexUrl)!==null&&l!==void 0?l:n:(a=c.geminiUrl)!==null&&a!==void 0?a:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ci{}function ee(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const a=e[l];return a!=null?String(a):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function d(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let m=0;m<g.length;m++){const _=g[m];d(_,e.slice(a+1),n[m])}else for(const m of g)d(m,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];d(g[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],l=t[o];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const l=e[o];if(l.endsWith("[]")){const a=l.slice(0,-2);if(a in t){const c=t[a];return Array.isArray(c)?c.map(h=>f(h,e.slice(o+1),n)):n}else return n}else t=t[l]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function gA(t,e){for(const[n,o]of Object.entries(e)){const l=n.split("."),a=o.split("."),c=new Set;let h=-1;for(let g=0;g<l.length;g++)if(l[g]==="*"){h=g;break}if(h!==-1&&a.length>h)for(let g=h;g<a.length;g++){const m=a[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}md(t,l,a,0,c)}}function md(t,e,n,o,l){if(o>=e.length||typeof t!="object"||t===null)return;const a=e[o];if(a.endsWith("[]")){const c=a.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])md(g,e,n,o+1,l)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!l.has(m)),g={};for(const m of h)g[m]=c[m];for(const[m,_]of Object.entries(g)){const v=[];for(const E of n.slice(o))E==="*"?v.push(m):v.push(E);d(c,v,_)}for(const m of h)delete c[m]}}else{const c=t;a in c&&md(c[a],e,n,o+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yA(t){const e={},n=f(t,["operationName"]);n!=null&&d(e,["operationName"],n);const o=f(t,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function _A(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],EA(c)),e}function vA(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],TA(c)),e}function EA(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>SA(c))),d(e,["generatedVideos"],a)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(e,["raiMediaFilteredReasons"],l),e}function TA(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>CA(c))),d(e,["generatedVideos"],a)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(e,["raiMediaFilteredReasons"],l),e}function SA(t){const e={},n=f(t,["video"]);return n!=null&&d(e,["video"],IA(n)),e}function CA(t){const e={},n=f(t,["_self"]);return n!=null&&d(e,["video"],wA(n)),e}function AA(t){const e={},n=f(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function xA(t){const e={},n=f(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function NA(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],bA(c)),e}function bA(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const l=f(t,["documentName"]);return l!=null&&d(e,["documentName"],l),e}function v0(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],RA(c)),e}function RA(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const l=f(t,["documentName"]);return l!=null&&d(e,["documentName"],l),e}function IA(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],Qd(o));const l=f(t,["encoding"]);return l!=null&&d(e,["mimeType"],l),e}function wA(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],Qd(o));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Fy||(Fy={}));var qy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(qy||(qy={}));var zy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(zy||(zy={}));var tn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(tn||(tn={}));var Yy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Yy||(Yy={}));var Jy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Jy||(Jy={}));var Ky;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ky||(Ky={}));var Qy;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Qy||(Qy={}));var Xy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Xy||(Xy={}));var $y;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})($y||($y={}));var Wy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Wy||(Wy={}));var Zy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Zy||(Zy={}));var jy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(jy||(jy={}));var e_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(e_||(e_={}));var t_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(t_||(t_={}));var n_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(n_||(n_={}));var i_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(i_||(i_={}));var o_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(o_||(o_={}));var s_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(s_||(s_={}));var l_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(l_||(l_={}));var r_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(r_||(r_={}));var Qa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Qa||(Qa={}));var a_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(a_||(a_={}));var u_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(u_||(u_={}));var c_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(c_||(c_={}));var gd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(gd||(gd={}));var f_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(f_||(f_={}));var d_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(d_||(d_={}));var h_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(h_||(h_={}));var p_;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(p_||(p_={}));var m_;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(m_||(m_={}));var g_;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(g_||(g_={}));var y_;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(y_||(y_={}));var __;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(__||(__={}));var v_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(v_||(v_={}));var E_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(E_||(E_={}));var T_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(T_||(T_={}));var S_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(S_||(S_={}));var C_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(C_||(C_={}));var A_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(A_||(A_={}));var x_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(x_||(x_={}));var N_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(N_||(N_={}));var b_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(b_||(b_={}));var R_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(R_||(R_={}));var I_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(I_||(I_={}));var w_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(w_||(w_={}));var M_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(M_||(M_={}));var D_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(D_||(D_={}));var U_;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(U_||(U_={}));var k_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(k_||(k_={}));var L_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(L_||(L_={}));var P_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(P_||(P_={}));var O_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(O_||(O_={}));var H_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(H_||(H_={}));var B_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(B_||(B_={}));var As;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(As||(As={}));class yd{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Hl{get text(){var e,n,o,l,a,c,h,g;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",_=!1;const v=[];for(const E of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[A,b]of Object.entries(E))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(b!==null||b!==void 0)&&v.push(A);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;_=!0,m+=E.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?m:void 0}get data(){var e,n,o,l,a,c,h,g;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const _=[];for(const v of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,A]of Object.entries(v))E!=="inlineData"&&(A!==null||A!==void 0)&&_.push(E);v.inlineData&&typeof v.inlineData.data=="string"&&(m+=atob(v.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,o,l,a,c,h,g;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,o,l,a,c,h,g,m;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,o,l,a,c,h,g,m;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.output}}class G_{}class V_{}class MA{}class DA{}class UA{}class kA{}class F_{}class q_{}class z_{}class LA{}class Xa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Xa;let l;const a=e;return n?l=vA(a):l=_A(a),Object.assign(o,l),o}}class Y_{}class J_{}class K_{}class Q_{}class PA{}class OA{}class HA{}class Xd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Xd,a=NA(e);return Object.assign(o,a),o}}class BA{}class GA{}class VA{}class X_{}class FA{get text(){var e,n,o;let l="",a=!1;const c=[];for(const h of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,l+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?l:void 0}get data(){var e,n,o;let l="";const a=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(l+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class qA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class $d{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new $d,a=v0(e);return Object.assign(o,a),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ve(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function E0(t,e){const n=Ve(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function T0(t){return Array.isArray(t)?t.map(e=>$a(e)):[$a(t)]}function $a(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function S0(t){const e=$a(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function C0(t){const e=$a(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function A0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>$_(e)):[$_(t)]}function _d(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function W_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Z_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gt(t){if(t==null)throw new Error("ContentUnion is required");return _d(t)?t:{role:"user",parts:A0(t)}}function Wd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Gt(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Gt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Gt(n)):[Gt(e)]}function Nn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(W_(t)||Z_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gt(t)]}const e=[],n=[],o=_d(t[0]);for(const l of t){const a=_d(l);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(W_(l)||Z_(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return o||e.push({role:"user",parts:A0(n)}),e}function zA(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(tn).includes(n[0].toUpperCase())?n[0].toUpperCase():tn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(tn).includes(o.toUpperCase())?o.toUpperCase():tn.TYPE_UNSPECIFIED})}}function bs(t){const e={},n=["items"],o=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&zA(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(tn).includes(h.toUpperCase())?h.toUpperCase():tn.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=bs(h);else if(o.includes(c)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(bs(m))}e[c]=g}else if(l.includes(c)){const g={};for(const[m,_]of Object.entries(h))g[m]=bs(_);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Zd(t){return bs(t)}function jd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function eh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Os(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=bs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=bs(e.response));return t}function Hs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function YA(t,e,n,o=1){const l=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:l?`${n}/${e}`:e}function Ai(t,e){if(typeof e!="string")throw new Error("name must be a string");return YA(t,e,"cachedContents")}function x0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function oo(t){return Qd(t)}function JA(t){return t!=null&&typeof t=="object"&&"name"in t}function KA(t){return t!=null&&typeof t=="object"&&"video"in t}function QA(t){return t!=null&&typeof t=="object"&&"uri"in t}function N0(t){var e;let n;if(JA(t)&&(n=t.name),!(QA(t)&&(n=t.uri,n===void 0))&&!(KA(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function b0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function R0(t){for(const e of["models","tunedModels","publisherModels"])if(XA(t,e))return t[e];return[]}function XA(t,e){return t!==null&&typeof t=="object"&&e in t}function $A(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function WA(t,e={}){const n=[],o=new Set;for(const l of t){const a=l.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const c=$A(l,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function I0(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,l=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ZA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function w0(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const l=n.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let a=!1;for(const c of l){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Bs(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function M0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jA(t){const e={},n=f(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Ux(c))),d(e,["inlinedResponses"],a)}const l=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["inlinedEmbedContentResponses"],a)}return e}function ex(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const l=f(t,["bigqueryDestination","outputUri"]);return l!=null&&d(e,["bigqueryUri"],l),e}function tx(t){const e={},n=f(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const o=f(t,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const l=f(t,["bigqueryUri"]);if(l!=null&&d(e,["bigqueryDestination","outputUri"],l),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ya(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const l=f(t,["metadata","state"]);l!=null&&d(e,["state"],M0(l));const a=f(t,["metadata","createTime"]);a!=null&&d(e,["createTime"],a);const c=f(t,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const h=f(t,["metadata","updateTime"]);h!=null&&d(e,["updateTime"],h);const g=f(t,["metadata","model"]);g!=null&&d(e,["model"],g);const m=f(t,["metadata","output"]);return m!=null&&d(e,["dest"],jA(w0(m))),e}function vd(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["displayName"]);o!=null&&d(e,["displayName"],o);const l=f(t,["state"]);l!=null&&d(e,["state"],M0(l));const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["createTime"]);c!=null&&d(e,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(e,["startTime"],h);const g=f(t,["endTime"]);g!=null&&d(e,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const _=f(t,["model"]);_!=null&&d(e,["model"],_);const v=f(t,["inputConfig"]);v!=null&&d(e,["src"],nx(v));const E=f(t,["outputConfig"]);E!=null&&d(e,["dest"],ex(w0(E)));const A=f(t,["completionStats"]);return A!=null&&d(e,["completionStats"],A),e}function nx(t){const e={},n=f(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const o=f(t,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const l=f(t,["bigquerySource","inputUri"]);return l!=null&&d(e,["bigqueryUri"],l),e}function ix(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&d(n,["fileName"],o);const l=f(e,["inlinedRequests"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Dx(t,c))),d(n,["requests","requests"],a)}return n}function ox(t){const e={},n=f(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const o=f(t,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const l=f(t,["bigqueryUri"]);if(l!=null&&d(e,["bigquerySource","inputUri"],l),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function sx(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function lx(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Bs(t,o)),n}function rx(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Bs(t,o)),n}function ax(t){const e={},n=f(t,["content"]);n!=null&&d(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],ux(o));const l=f(t,["tokenCount"]);l!=null&&d(e,["tokenCount"],l);const a=f(t,["finishReason"]);a!=null&&d(e,["finishReason"],a);const c=f(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(t,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const g=f(t,["index"]);g!=null&&d(e,["index"],g);const m=f(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const _=f(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>A)),d(e,["safetyRatings"],E)}const v=f(t,["urlContextMetadata"]);return v!=null&&d(e,["urlContextMetadata"],v),e}function ux(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),d(e,["citations"],o)}return e}function D0(t){const e={},n=f(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Gx(a))),d(e,["parts"],l)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function cx(t,e){const n={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function fx(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const l=f(t,["dest"]);return e!==void 0&&l!=null&&d(e,["outputConfig"],tx(ZA(l))),n}function j_(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["src"]);l!=null&&d(n,["batch","inputConfig"],ix(t,I0(t,l)));const a=f(e,["config"]);return a!=null&&cx(a,n),n}function dx(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],Ve(t,o));const l=f(e,["src"]);l!=null&&d(n,["inputConfig"],ox(I0(t,l)));const a=f(e,["config"]);return a!=null&&fx(a,n),n}function hx(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),n}function px(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["src"]);l!=null&&d(n,["batch","inputConfig"],Tx(t,l));const a=f(e,["config"]);return a!=null&&hx(a,n),n}function mx(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Bs(t,o)),n}function gx(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Bs(t,o)),n}function yx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);return a!=null&&d(e,["error"],a),e}function _x(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);return a!=null&&d(e,["error"],a),e}function vx(t,e){const n={},o=f(e,["contents"]);if(o!=null){let a=Wd(t,o);Array.isArray(a)&&(a=a.map(c=>c)),d(n,["requests[]","request","content"],a)}const l=f(e,["config"]);return l!=null&&(d(n,["_self"],Ex(l,n)),gA(n,{"requests[].*":"requests[].request.*"})),n}function Ex(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const l=f(t,["title"]);e!==void 0&&l!=null&&d(e,["requests[]","title"],l);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&d(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Tx(t,e){const n={},o=f(e,["fileName"]);o!=null&&d(n,["file_name"],o);const l=f(e,["inlinedRequests"]);return l!=null&&d(n,["requests"],vx(t,l)),n}function Sx(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Cx(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ax(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&d(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xx(t,e,n){const o={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&d(n,["systemInstruction"],D0(Gt(l)));const a=f(e,["temperature"]);a!=null&&d(o,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&d(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const _=f(e,["stopSequences"]);_!=null&&d(o,["stopSequences"],_);const v=f(e,["responseLogprobs"]);v!=null&&d(o,["responseLogprobs"],v);const E=f(e,["logprobs"]);E!=null&&d(o,["logprobs"],E);const A=f(e,["presencePenalty"]);A!=null&&d(o,["presencePenalty"],A);const b=f(e,["frequencyPenalty"]);b!=null&&d(o,["frequencyPenalty"],b);const k=f(e,["seed"]);k!=null&&d(o,["seed"],k);const M=f(e,["responseMimeType"]);M!=null&&d(o,["responseMimeType"],M);const q=f(e,["responseSchema"]);q!=null&&d(o,["responseSchema"],Zd(q));const Q=f(e,["responseJsonSchema"]);if(Q!=null&&d(o,["responseJsonSchema"],Q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=f(e,["safetySettings"]);if(n!==void 0&&J!=null){let Oe=J;Array.isArray(Oe)&&(Oe=Oe.map(st=>Vx(st))),d(n,["safetySettings"],Oe)}const j=f(e,["tools"]);if(n!==void 0&&j!=null){let Oe=Hs(j);Array.isArray(Oe)&&(Oe=Oe.map(st=>qx(Os(st)))),d(n,["tools"],Oe)}const ae=f(e,["toolConfig"]);if(n!==void 0&&ae!=null&&d(n,["toolConfig"],Fx(ae)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);n!==void 0&&le!=null&&d(n,["cachedContent"],Ai(t,le));const X=f(e,["responseModalities"]);X!=null&&d(o,["responseModalities"],X);const Ne=f(e,["mediaResolution"]);Ne!=null&&d(o,["mediaResolution"],Ne);const ne=f(e,["speechConfig"]);if(ne!=null&&d(o,["speechConfig"],jd(ne)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _e=f(e,["thinkingConfig"]);_e!=null&&d(o,["thinkingConfig"],_e);const Le=f(e,["imageConfig"]);Le!=null&&d(o,["imageConfig"],Mx(Le));const Xe=f(e,["enableEnhancedCivicAnswers"]);return Xe!=null&&d(o,["enableEnhancedCivicAnswers"],Xe),o}function Nx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>ax(m))),d(e,["candidates"],g)}const l=f(t,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const a=f(t,["promptFeedback"]);a!=null&&d(e,["promptFeedback"],a);const c=f(t,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function bx(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Bs(t,o)),n}function Rx(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Bs(t,o)),n}function Ix(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function wx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Mx(t){const e={},n=f(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Dx(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["request","model"],Ve(t,o));const l=f(e,["contents"]);if(l!=null){let h=Nn(l);Array.isArray(h)&&(h=h.map(g=>D0(g))),d(n,["request","contents"],h)}const a=f(e,["metadata"]);a!=null&&d(n,["metadata"],a);const c=f(e,["config"]);return c!=null&&d(n,["request","generationConfig"],xx(t,c,f(n,["request"],{}))),n}function Ux(t){const e={},n=f(t,["response"]);n!=null&&d(e,["response"],Nx(n));const o=f(t,["error"]);return o!=null&&d(e,["error"],o),e}function kx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const l=f(t,["pageToken"]);if(e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Lx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const a=f(t,["filter"]);return e!==void 0&&a!=null&&d(e,["_query","filter"],a),n}function Px(t){const e={},n=f(t,["config"]);return n!=null&&kx(n,e),e}function Ox(t){const e={},n=f(t,["config"]);return n!=null&&Lx(n,e),e}function Hx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["operations"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Ya(c))),d(e,["batchJobs"],a)}return e}function Bx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["batchPredictionJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>vd(c))),d(e,["batchJobs"],a)}return e}function Gx(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],Sx(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],Cx(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],sx(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const _=f(t,["thought"]);_!=null&&d(e,["thought"],_);const v=f(t,["thoughtSignature"]);v!=null&&d(e,["thoughtSignature"],v);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function Vx(t){const e={},n=f(t,["category"]);if(n!=null&&d(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function Fx(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],Ax(o)),e}function qx(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(v=>v)),d(e,["functionDeclarations"],_)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],Ix(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],wx(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(vi||(vi={}));class ko{constructor(e,n,o,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,l)}init(e,n,o){var l,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(l=c.config)===null||l===void 0?void 0:l.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zx extends Ci{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ko(vi.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=j_(this.apiClient,e),o=n._url,l=ee("{model}:batchGenerateContent",o),h=n.batch.inputConfig.requests,g=h.requests,m=[];for(const _ of g){const v=Object.assign({},_);if(v.systemInstruction){const E=v.systemInstruction;delete v.systemInstruction;const A=v.request;A.systemInstruction=E,v.request=A}m.push(v)}return h.requests=m,delete n.config,delete n._url,delete n._query,{path:l,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},l=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${l}`),o.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?o.dest=`${a.slice(0,-6)}/dest`:o.dest=`${a}_dest_${l}`;else if(c)o.dest=`${c}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=dx(this.apiClient,e);return h=ee("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>vd(_))}else{const m=j_(this.apiClient,e);return h=ee("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Ya(_))}}async createEmbeddingsInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=px(this.apiClient,e);return a=ee("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>Ya(g))}}async get(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Rx(this.apiClient,e);return h=ee("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>vd(_))}else{const m=bx(this.apiClient,e);return h=ee("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Ya(_))}}async cancel(e){var n,o,l,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=rx(this.apiClient,e);c=ee("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=lx(this.apiClient,e);c=ee("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Ox(e);return h=ee("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=Bx(_),E=new X_;return Object.assign(E,v),E})}else{const m=Px(e);return h=ee("batches",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=Hx(_),E=new X_;return Object.assign(E,v),E})}}async delete(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=gx(this.apiClient,e);return h=ee("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>_x(_))}else{const m=mx(this.apiClient,e);return h=ee("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>yx(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yx(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function ev(t){const e={},n=f(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>pN(a))),d(e,["parts"],l)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function Jx(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const l=f(t,["expireTime"]);e!==void 0&&l!=null&&d(e,["expireTime"],l);const a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let _=Nn(c);Array.isArray(_)&&(_=_.map(v=>ev(v))),d(e,["contents"],_)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],ev(Gt(h)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(v=>gN(v))),d(e,["tools"],_)}const m=f(t,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],mN(m)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Kx(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const l=f(t,["expireTime"]);e!==void 0&&l!=null&&d(e,["expireTime"],l);const a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let v=Nn(c);Array.isArray(v)&&(v=v.map(E=>E)),d(e,["contents"],v)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],Gt(h));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>yN(E))),d(e,["tools"],v)}const m=f(t,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],m);const _=f(t,["kmsKeyName"]);return e!==void 0&&_!=null&&d(e,["encryption_spec","kmsKeyName"],_),n}function Qx(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],E0(t,o));const l=f(e,["config"]);return l!=null&&Jx(l,n),n}function Xx(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["model"],E0(t,o));const l=f(e,["config"]);return l!=null&&Kx(l,n),n}function $x(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Ai(t,o)),n}function Wx(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Ai(t,o)),n}function Zx(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function jx(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function eN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function tN(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nN(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&d(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iN(t){const e={},n=f(t,["description"]);n!=null&&d(e,["description"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const l=f(t,["parameters"]);l!=null&&d(e,["parameters"],l);const a=f(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function oN(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Ai(t,o)),n}function sN(t,e){const n={},o=f(e,["name"]);return o!=null&&d(n,["_url","name"],Ai(t,o)),n}function lN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function rN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function aN(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),n}function uN(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),n}function cN(t){const e={},n=f(t,["config"]);return n!=null&&aN(n,e),e}function fN(t){const e={},n=f(t,["config"]);return n!=null&&uN(n,e),e}function dN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["cachedContents"],a)}return e}function hN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["cachedContents"],a)}return e}function pN(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],eN(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],tN(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],Yx(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const _=f(t,["thought"]);_!=null&&d(e,["thought"],_);const v=f(t,["thoughtSignature"]);v!=null&&d(e,["thoughtSignature"],v);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function mN(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],nN(o)),e}function gN(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(v=>v)),d(e,["functionDeclarations"],_)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],lN(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],rN(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function yN(t){const e={},n=f(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&d(e,["codeExecution"],l);const a=f(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const c=f(t,["functionDeclarations"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>iN(E))),d(e,["functionDeclarations"],v)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const _=f(t,["urlContext"]);return _!=null&&d(e,["urlContext"],_),e}function _N(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const l=f(t,["expireTime"]);return e!==void 0&&l!=null&&d(e,["expireTime"],l),n}function vN(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const l=f(t,["expireTime"]);return e!==void 0&&l!=null&&d(e,["expireTime"],l),n}function EN(t,e){const n={},o=f(e,["name"]);o!=null&&d(n,["_url","name"],Ai(t,o));const l=f(e,["config"]);return l!=null&&_N(l,n),n}function TN(t,e){const n={},o=f(e,["name"]);o!=null&&d(n,["_url","name"],Ai(t,o));const l=f(e,["config"]);return l!=null&&vN(l,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SN extends Ci{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ko(vi.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Xx(this.apiClient,e);return h=ee("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const m=Qx(this.apiClient,e);return h=ee("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async get(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=sN(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const m=oN(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async delete(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Wx(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=jx(_),E=new K_;return Object.assign(E,v),E})}else{const m=$x(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=Zx(_),E=new K_;return Object.assign(E,v),E})}}async update(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=TN(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const m=EN(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async listInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=fN(e);return h=ee("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=hN(_),E=new Q_;return Object.assign(E,v),E})}else{const m=cN(e);return h=ee("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=dN(_),E=new Q_;return Object.assign(E,v),E})}}}function Wa(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(t);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(t,o[l])&&(n[o[l]]=t[o[l]]);return n}function tv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t){return this instanceof ve?(this.v=t,this):new ve(t)}function Hn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(A){return function(b){return Promise.resolve(b).then(A,v)}}function h(A,b){o[A]&&(l[A]=function(k){return new Promise(function(M,q){a.push([A,k,M,q])>1||g(A,k)})},b&&(l[A]=b(l[A])))}function g(A,b){try{m(o[A](b))}catch(k){E(a[0][3],k)}}function m(A){A.value instanceof ve?Promise.resolve(A.value.v).then(_,v):E(a[0][2],A)}function _(A){g("next",A)}function v(A){g("throw",A)}function E(A,b){A(b),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Bn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof tv=="function"?tv(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=t[a]&&function(c){return new Promise(function(h,g){c=t[a](c),l(h,g,c.done,c.value)})}}function l(a,c,h,g){Promise.resolve(g).then(function(m){a({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CN(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:U0(n)}function U0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function AN(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function nv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const l=[];let a=!0;for(;o<n&&t[o].role==="model";)l.push(t[o]),a&&!U0(t[o])&&(a=!1),o++;a?e.push(...l):e.pop()}return e}class xN{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new NN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class NN{constructor(e,n,o,l={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=l,this.history=a,this.sendPromise=Promise.resolve(),AN(a)}async sendMessage(e){var n;await this.sendPromise;const o=Gt(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const g=await l,m=(c=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,_=g.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let E=[];_!=null&&(E=(h=_.slice(v))!==null&&h!==void 0?h:[]);const A=m?[m]:[];this.recordHistory(o,A,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var n;await this.sendPromise;const o=Gt(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const a=await l;return this.processStreamResponse(a,o)}getHistory(e=!1){const n=e?nv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Hn(this,arguments,function*(){var l,a,c,h,g,m;const _=[];try{for(var v=!0,E=Bn(e),A;A=yield ve(E.next()),l=A.done,!l;v=!0){h=A.value,v=!1;const b=h;if(CN(b)){const k=(m=(g=b.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;k!==void 0&&_.push(k)}yield yield ve(b)}}catch(b){a={error:b}}finally{try{!v&&!l&&(c=E.return)&&(yield ve(c.call(E)))}finally{if(a)throw a.error}}this.recordHistory(n,_)})}recordHistory(e,n,o){let l=[];n.length>0&&n.every(a=>a.role!==void 0)?l=n:l.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...nv(o)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _u extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_u.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bN(t){const e={},n=f(t,["file"]);return n!=null&&d(e,["file"],n),e}function RN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function IN(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","file"],N0(n)),e}function wN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function MN(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","file"],N0(n)),e}function DN(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),n}function UN(t){const e={},n=f(t,["config"]);return n!=null&&DN(n,e),e}function kN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["files"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LN extends Ci{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ko(vi.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=UN(e);return a=ee("files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const m=kN(g),_=new BA;return Object.assign(_,m),_})}}async createInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bN(e);return a=ee("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=RN(g),_=new GA;return Object.assign(_,m),_})}}async get(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MN(e);return a=ee("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=IN(e);return a=ee("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const m=wN(g),_=new VA;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ja(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function PN(t){const e={},n=f(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ZN(a))),d(e,["parts"],l)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function ON(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function HN(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BN(t){const e={},n=f(t,["description"]);n!=null&&d(e,["description"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const l=f(t,["parameters"]);l!=null&&d(e,["parameters"],l);const a=f(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function GN(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const l=f(t,["audioTimestamp"]);l!=null&&d(e,["audioTimestamp"],l);const a=f(t,["candidateCount"]);a!=null&&d(e,["candidateCount"],a);const c=f(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(t,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const g=f(t,["logprobs"]);g!=null&&d(e,["logprobs"],g);const m=f(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const _=f(t,["mediaResolution"]);_!=null&&d(e,["mediaResolution"],_);const v=f(t,["presencePenalty"]);v!=null&&d(e,["presencePenalty"],v);const E=f(t,["responseLogprobs"]);E!=null&&d(e,["responseLogprobs"],E);const A=f(t,["responseMimeType"]);A!=null&&d(e,["responseMimeType"],A);const b=f(t,["responseModalities"]);b!=null&&d(e,["responseModalities"],b);const k=f(t,["responseSchema"]);k!=null&&d(e,["responseSchema"],k);const M=f(t,["routingConfig"]);M!=null&&d(e,["routingConfig"],M);const q=f(t,["seed"]);q!=null&&d(e,["seed"],q);const Q=f(t,["speechConfig"]);Q!=null&&d(e,["speechConfig"],Q);const J=f(t,["stopSequences"]);J!=null&&d(e,["stopSequences"],J);const j=f(t,["temperature"]);j!=null&&d(e,["temperature"],j);const ae=f(t,["thinkingConfig"]);ae!=null&&d(e,["thinkingConfig"],ae);const le=f(t,["topK"]);le!=null&&d(e,["topK"],le);const X=f(t,["topP"]);if(X!=null&&d(e,["topP"],X),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function VN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function FN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function qN(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const l=f(t,["responseModalities"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","responseModalities"],l);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const _=f(t,["seed"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","seed"],_);const v=f(t,["speechConfig"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","speechConfig"],eh(v));const E=f(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const A=f(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],PN(Gt(b)));const k=f(t,["tools"]);if(e!==void 0&&k!=null){let le=Hs(k);Array.isArray(le)&&(le=le.map(X=>eb(Os(X)))),d(e,["setup","tools"],le)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&d(e,["setup","sessionResumption"],jN(M));const q=f(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","inputAudioTranscription"],q);const Q=f(t,["outputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","outputAudioTranscription"],Q);const J=f(t,["realtimeInputConfig"]);e!==void 0&&J!=null&&d(e,["setup","realtimeInputConfig"],J);const j=f(t,["contextWindowCompression"]);e!==void 0&&j!=null&&d(e,["setup","contextWindowCompression"],j);const ae=f(t,["proactivity"]);if(e!==void 0&&ae!=null&&d(e,["setup","proactivity"],ae),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function zN(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],GN(o));const l=f(t,["responseModalities"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","responseModalities"],l);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const _=f(t,["seed"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","seed"],_);const v=f(t,["speechConfig"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","speechConfig"],eh(v));const E=f(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const A=f(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],Gt(b));const k=f(t,["tools"]);if(e!==void 0&&k!=null){let X=Hs(k);Array.isArray(X)&&(X=X.map(Ne=>tb(Os(Ne)))),d(e,["setup","tools"],X)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&d(e,["setup","sessionResumption"],M);const q=f(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","inputAudioTranscription"],q);const Q=f(t,["outputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","outputAudioTranscription"],Q);const J=f(t,["realtimeInputConfig"]);e!==void 0&&J!=null&&d(e,["setup","realtimeInputConfig"],J);const j=f(t,["contextWindowCompression"]);e!==void 0&&j!=null&&d(e,["setup","contextWindowCompression"],j);const ae=f(t,["proactivity"]);e!==void 0&&ae!=null&&d(e,["setup","proactivity"],ae);const le=f(t,["explicitVadSignal"]);return e!==void 0&&le!=null&&d(e,["setup","explicitVadSignal"],le),n}function YN(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ve(t,o));const l=f(e,["config"]);return l!=null&&d(n,["config"],qN(l,n)),n}function JN(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ve(t,o));const l=f(e,["config"]);return l!=null&&d(n,["config"],zN(l,n)),n}function KN(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function QN(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),d(e,["weightedPrompts"],o)}return e}function XN(t){const e={},n=f(t,["media"]);if(n!=null){let m=T0(n);Array.isArray(m)&&(m=m.map(_=>Ja(_))),d(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&d(e,["audio"],Ja(C0(o)));const l=f(t,["audioStreamEnd"]);l!=null&&d(e,["audioStreamEnd"],l);const a=f(t,["video"]);a!=null&&d(e,["video"],Ja(S0(a)));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&d(e,["activityEnd"],g),e}function $N(t){const e={},n=f(t,["media"]);if(n!=null){let m=T0(n);Array.isArray(m)&&(m=m.map(_=>_)),d(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&d(e,["audio"],C0(o));const l=f(t,["audioStreamEnd"]);l!=null&&d(e,["audioStreamEnd"],l);const a=f(t,["video"]);a!=null&&d(e,["video"],S0(a));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&d(e,["activityEnd"],g),e}function WN(t){const e={},n=f(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const o=f(t,["serverContent"]);o!=null&&d(e,["serverContent"],o);const l=f(t,["toolCall"]);l!=null&&d(e,["toolCall"],l);const a=f(t,["toolCallCancellation"]);a!=null&&d(e,["toolCallCancellation"],a);const c=f(t,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],nb(c));const h=f(t,["goAway"]);h!=null&&d(e,["goAway"],h);const g=f(t,["sessionResumptionUpdate"]);g!=null&&d(e,["sessionResumptionUpdate"],g);const m=f(t,["voiceActivityDetectionSignal"]);m!=null&&d(e,["voiceActivityDetectionSignal"],m);const _=f(t,["voiceActivity"]);return _!=null&&d(e,["voiceActivity"],ib(_)),e}function ZN(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],ON(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],HN(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],Ja(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const _=f(t,["thought"]);_!=null&&d(e,["thought"],_);const v=f(t,["thoughtSignature"]);v!=null&&d(e,["thoughtSignature"],v);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function jN(t){const e={},n=f(t,["handle"]);if(n!=null&&d(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function eb(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(v=>v)),d(e,["functionDeclarations"],_)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],VN(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],FN(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function tb(t){const e={},n=f(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&d(e,["codeExecution"],l);const a=f(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const c=f(t,["functionDeclarations"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>BN(E))),d(e,["functionDeclarations"],v)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const _=f(t,["urlContext"]);return _!=null&&d(e,["urlContext"],_),e}function nb(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const o=f(t,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const l=f(t,["candidatesTokenCount"]);l!=null&&d(e,["responseTokenCount"],l);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&d(e,["toolUsePromptTokenCount"],a);const c=f(t,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const h=f(t,["totalTokenCount"]);h!=null&&d(e,["totalTokenCount"],h);const g=f(t,["promptTokensDetails"]);if(g!=null){let A=g;Array.isArray(A)&&(A=A.map(b=>b)),d(e,["promptTokensDetails"],A)}const m=f(t,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(b=>b)),d(e,["cacheTokensDetails"],A)}const _=f(t,["candidatesTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(b=>b)),d(e,["responseTokensDetails"],A)}const v=f(t,["toolUsePromptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>b)),d(e,["toolUsePromptTokensDetails"],A)}const E=f(t,["trafficType"]);return E!=null&&d(e,["trafficType"],E),e}function ib(t){const e={},n=f(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ob(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function sb(t){const e={},n=f(t,["content"]);n!=null&&d(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],lb(o));const l=f(t,["tokenCount"]);l!=null&&d(e,["tokenCount"],l);const a=f(t,["finishReason"]);a!=null&&d(e,["finishReason"],a);const c=f(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(t,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const g=f(t,["index"]);g!=null&&d(e,["index"],g);const m=f(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const _=f(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>A)),d(e,["safetyRatings"],E)}const v=f(t,["urlContextMetadata"]);return v!=null&&d(e,["urlContextMetadata"],v),e}function lb(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),d(e,["citations"],o)}return e}function rb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["contents"]);if(l!=null){let a=Nn(l);Array.isArray(a)&&(a=a.map(c=>c)),d(n,["contents"],a)}return n}function ab(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["tokensInfo"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["tokensInfo"],l)}return e}function ub(t){const e={},n=f(t,["values"]);n!=null&&d(e,["values"],n);const o=f(t,["statistics"]);return o!=null&&d(e,["statistics"],cb(o)),e}function cb(t){const e={},n=f(t,["truncated"]);n!=null&&d(e,["truncated"],n);const o=f(t,["token_count"]);return o!=null&&d(e,["tokenCount"],o),e}function vu(t){const e={},n=f(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>vR(a))),d(e,["parts"],l)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function fb(t){const e={},n=f(t,["controlType"]);n!=null&&d(e,["controlType"],n);const o=f(t,["enableControlImageComputation"]);return o!=null&&d(e,["computeControl"],o),e}function db(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function hb(t,e){const n={},o=f(t,["systemInstruction"]);e!==void 0&&o!=null&&d(e,["systemInstruction"],Gt(o));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>O0(h))),d(e,["tools"],c)}const a=f(t,["generationConfig"]);return e!==void 0&&a!=null&&d(e,["generationConfig"],oR(a)),n}function pb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["contents"]);if(l!=null){let c=Nn(l);Array.isArray(c)&&(c=c.map(h=>vu(h))),d(n,["contents"],c)}const a=f(e,["config"]);return a!=null&&db(a),n}function mb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["contents"]);if(l!=null){let c=Nn(l);Array.isArray(c)&&(c=c.map(h=>h)),d(n,["contents"],c)}const a=f(e,["config"]);return a!=null&&hb(a,n),n}function gb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["totalTokens"]);o!=null&&d(e,["totalTokens"],o);const l=f(t,["cachedContentTokenCount"]);return l!=null&&d(e,["cachedContentTokenCount"],l),e}function yb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["totalTokens"]);return o!=null&&d(e,["totalTokens"],o),e}function _b(t,e){const n={},o=f(e,["model"]);return o!=null&&d(n,["_url","name"],Ve(t,o)),n}function vb(t,e){const n={},o=f(e,["model"]);return o!=null&&d(n,["_url","name"],Ve(t,o)),n}function Eb(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Tb(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Sb(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(t,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&d(e,["parameters","seed"],g);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const v=f(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&d(e,["parameters","includeSafetyAttributes"],v);const E=f(t,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);const A=f(t,["language"]);e!==void 0&&A!=null&&d(e,["parameters","language"],A);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","mimeType"],b);const k=f(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&d(e,["parameters","outputOptions","compressionQuality"],k);const M=f(t,["addWatermark"]);e!==void 0&&M!=null&&d(e,["parameters","addWatermark"],M);const q=f(t,["labels"]);e!==void 0&&q!=null&&d(e,["labels"],q);const Q=f(t,["editMode"]);e!==void 0&&Q!=null&&d(e,["parameters","editMode"],Q);const J=f(t,["baseSteps"]);return e!==void 0&&J!=null&&d(e,["parameters","editConfig","baseSteps"],J),n}function Cb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const a=f(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>xR(g))),d(n,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&Sb(c,n),n}function Ab(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Eu(a))),d(e,["generatedImages"],l)}return e}function xb(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const l=f(t,["title"]);e!==void 0&&l!=null&&d(e,["requests[]","title"],l);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&d(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Nb(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&d(e,["instances[]","task_type"],o);const l=f(t,["title"]);e!==void 0&&l!=null&&d(e,["instances[]","title"],l);const a=f(t,["outputDimensionality"]);e!==void 0&&a!=null&&d(e,["parameters","outputDimensionality"],a);const c=f(t,["mimeType"]);e!==void 0&&c!=null&&d(e,["instances[]","mimeType"],c);const h=f(t,["autoTruncate"]);return e!==void 0&&h!=null&&d(e,["parameters","autoTruncate"],h),n}function bb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["contents"]);if(l!=null){let h=Wd(t,l);Array.isArray(h)&&(h=h.map(g=>g)),d(n,["requests[]","content"],h)}const a=f(e,["config"]);a!=null&&xb(a,n);const c=f(e,["model"]);return c!==void 0&&d(n,["requests[]","model"],Ve(t,c)),n}function Rb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["contents"]);if(l!=null){let c=Wd(t,l);Array.isArray(c)&&(c=c.map(h=>h)),d(n,["instances[]","content"],c)}const a=f(e,["config"]);return a!=null&&Nb(a,n),n}function Ib(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["embeddings"],a)}const l=f(t,["metadata"]);return l!=null&&d(e,["metadata"],l),e}function wb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions[]","embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>ub(c))),d(e,["embeddings"],a)}const l=f(t,["metadata"]);return l!=null&&d(e,["metadata"],l),e}function Mb(t){const e={},n=f(t,["endpoint"]);n!=null&&d(e,["name"],n);const o=f(t,["deployedModelId"]);return o!=null&&d(e,["deployedModelId"],o),e}function Db(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Ub(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kb(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&d(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Lb(t){const e={},n=f(t,["description"]);n!=null&&d(e,["description"],n);const o=f(t,["name"]);o!=null&&d(e,["name"],o);const l=f(t,["parameters"]);l!=null&&d(e,["parameters"],l);const a=f(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Pb(t,e,n){const o={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&d(n,["systemInstruction"],vu(Gt(l)));const a=f(e,["temperature"]);a!=null&&d(o,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&d(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const _=f(e,["stopSequences"]);_!=null&&d(o,["stopSequences"],_);const v=f(e,["responseLogprobs"]);v!=null&&d(o,["responseLogprobs"],v);const E=f(e,["logprobs"]);E!=null&&d(o,["logprobs"],E);const A=f(e,["presencePenalty"]);A!=null&&d(o,["presencePenalty"],A);const b=f(e,["frequencyPenalty"]);b!=null&&d(o,["frequencyPenalty"],b);const k=f(e,["seed"]);k!=null&&d(o,["seed"],k);const M=f(e,["responseMimeType"]);M!=null&&d(o,["responseMimeType"],M);const q=f(e,["responseSchema"]);q!=null&&d(o,["responseSchema"],Zd(q));const Q=f(e,["responseJsonSchema"]);if(Q!=null&&d(o,["responseJsonSchema"],Q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=f(e,["safetySettings"]);if(n!==void 0&&J!=null){let Oe=J;Array.isArray(Oe)&&(Oe=Oe.map(st=>NR(st))),d(n,["safetySettings"],Oe)}const j=f(e,["tools"]);if(n!==void 0&&j!=null){let Oe=Hs(j);Array.isArray(Oe)&&(Oe=Oe.map(st=>UR(Os(st)))),d(n,["tools"],Oe)}const ae=f(e,["toolConfig"]);if(n!==void 0&&ae!=null&&d(n,["toolConfig"],DR(ae)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);n!==void 0&&le!=null&&d(n,["cachedContent"],Ai(t,le));const X=f(e,["responseModalities"]);X!=null&&d(o,["responseModalities"],X);const Ne=f(e,["mediaResolution"]);Ne!=null&&d(o,["mediaResolution"],Ne);const ne=f(e,["speechConfig"]);if(ne!=null&&d(o,["speechConfig"],jd(ne)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _e=f(e,["thinkingConfig"]);_e!=null&&d(o,["thinkingConfig"],_e);const Le=f(e,["imageConfig"]);Le!=null&&d(o,["imageConfig"],uR(Le));const Xe=f(e,["enableEnhancedCivicAnswers"]);return Xe!=null&&d(o,["enableEnhancedCivicAnswers"],Xe),o}function Ob(t,e,n){const o={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&d(n,["systemInstruction"],Gt(l));const a=f(e,["temperature"]);a!=null&&d(o,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&d(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const _=f(e,["stopSequences"]);_!=null&&d(o,["stopSequences"],_);const v=f(e,["responseLogprobs"]);v!=null&&d(o,["responseLogprobs"],v);const E=f(e,["logprobs"]);E!=null&&d(o,["logprobs"],E);const A=f(e,["presencePenalty"]);A!=null&&d(o,["presencePenalty"],A);const b=f(e,["frequencyPenalty"]);b!=null&&d(o,["frequencyPenalty"],b);const k=f(e,["seed"]);k!=null&&d(o,["seed"],k);const M=f(e,["responseMimeType"]);M!=null&&d(o,["responseMimeType"],M);const q=f(e,["responseSchema"]);q!=null&&d(o,["responseSchema"],Zd(q));const Q=f(e,["responseJsonSchema"]);Q!=null&&d(o,["responseJsonSchema"],Q);const J=f(e,["routingConfig"]);J!=null&&d(o,["routingConfig"],J);const j=f(e,["modelSelectionConfig"]);j!=null&&d(o,["modelConfig"],j);const ae=f(e,["safetySettings"]);if(n!==void 0&&ae!=null){let H=ae;Array.isArray(H)&&(H=H.map($=>$)),d(n,["safetySettings"],H)}const le=f(e,["tools"]);if(n!==void 0&&le!=null){let H=Hs(le);Array.isArray(H)&&(H=H.map($=>O0(Os($)))),d(n,["tools"],H)}const X=f(e,["toolConfig"]);n!==void 0&&X!=null&&d(n,["toolConfig"],X);const Ne=f(e,["labels"]);n!==void 0&&Ne!=null&&d(n,["labels"],Ne);const ne=f(e,["cachedContent"]);n!==void 0&&ne!=null&&d(n,["cachedContent"],Ai(t,ne));const _e=f(e,["responseModalities"]);_e!=null&&d(o,["responseModalities"],_e);const Le=f(e,["mediaResolution"]);Le!=null&&d(o,["mediaResolution"],Le);const Xe=f(e,["speechConfig"]);Xe!=null&&d(o,["speechConfig"],jd(Xe));const Oe=f(e,["audioTimestamp"]);Oe!=null&&d(o,["audioTimestamp"],Oe);const st=f(e,["thinkingConfig"]);st!=null&&d(o,["thinkingConfig"],st);const It=f(e,["imageConfig"]);if(It!=null&&d(o,["imageConfig"],cR(It)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function iv(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["contents"]);if(l!=null){let c=Nn(l);Array.isArray(c)&&(c=c.map(h=>vu(h))),d(n,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(n,["generationConfig"],Pb(t,a,n)),n}function ov(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["contents"]);if(l!=null){let c=Nn(l);Array.isArray(c)&&(c=c.map(h=>h)),d(n,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(n,["generationConfig"],Ob(t,a,n)),n}function sv(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>sb(m))),d(e,["candidates"],g)}const l=f(t,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const a=f(t,["promptFeedback"]);a!=null&&d(e,["promptFeedback"],a);const c=f(t,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function lv(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(_=>_)),d(e,["candidates"],m)}const l=f(t,["createTime"]);l!=null&&d(e,["createTime"],l);const a=f(t,["modelVersion"]);a!=null&&d(e,["modelVersion"],a);const c=f(t,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const h=f(t,["responseId"]);h!=null&&d(e,["responseId"],h);const g=f(t,["usageMetadata"]);return g!=null&&d(e,["usageMetadata"],g),e}function Hb(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const a=f(t,["guidanceScale"]);if(e!==void 0&&a!=null&&d(e,["parameters","guidanceScale"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const h=f(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const g=f(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&d(e,["parameters","includeSafetyAttributes"],g);const m=f(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const _=f(t,["language"]);e!==void 0&&_!=null&&d(e,["parameters","language"],_);const v=f(t,["outputMimeType"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","mimeType"],v);const E=f(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=f(t,["imageSize"]);if(e!==void 0&&A!=null&&d(e,["parameters","sampleImageSize"],A),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Bb(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(t,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&d(e,["parameters","seed"],g);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const v=f(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&d(e,["parameters","includeSafetyAttributes"],v);const E=f(t,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);const A=f(t,["language"]);e!==void 0&&A!=null&&d(e,["parameters","language"],A);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","mimeType"],b);const k=f(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&d(e,["parameters","outputOptions","compressionQuality"],k);const M=f(t,["addWatermark"]);e!==void 0&&M!=null&&d(e,["parameters","addWatermark"],M);const q=f(t,["labels"]);e!==void 0&&q!=null&&d(e,["labels"],q);const Q=f(t,["imageSize"]);e!==void 0&&Q!=null&&d(e,["parameters","sampleImageSize"],Q);const J=f(t,["enhancePrompt"]);return e!==void 0&&J!=null&&d(e,["parameters","enhancePrompt"],J),n}function Gb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const a=f(e,["config"]);return a!=null&&Hb(a,n),n}function Vb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const a=f(e,["config"]);return a!=null&&Bb(a,n),n}function Fb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>eR(c))),d(e,["generatedImages"],a)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&d(e,["positivePromptSafetyAttributes"],L0(l)),e}function qb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Eu(c))),d(e,["generatedImages"],a)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&d(e,["positivePromptSafetyAttributes"],P0(l)),e}function zb(t,e){const n={},o=f(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(t,["durationSeconds"]);if(e!==void 0&&l!=null&&d(e,["parameters","durationSeconds"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const c=f(t,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const h=f(t,["personGeneration"]);if(e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(t,["negativePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","negativePrompt"],g);const m=f(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(t,["lastFrame"]);e!==void 0&&_!=null&&d(e,["instances[0]","lastFrame"],Tu(_));const v=f(t,["referenceImages"]);if(e!==void 0&&v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>JR(A))),d(e,["instances[0]","referenceImages"],E)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Yb(t,e){const n={},o=f(t,["numberOfVideos"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const a=f(t,["fps"]);e!==void 0&&a!=null&&d(e,["parameters","fps"],a);const c=f(t,["durationSeconds"]);e!==void 0&&c!=null&&d(e,["parameters","durationSeconds"],c);const h=f(t,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const g=f(t,["aspectRatio"]);e!==void 0&&g!=null&&d(e,["parameters","aspectRatio"],g);const m=f(t,["resolution"]);e!==void 0&&m!=null&&d(e,["parameters","resolution"],m);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const v=f(t,["pubsubTopic"]);e!==void 0&&v!=null&&d(e,["parameters","pubsubTopic"],v);const E=f(t,["negativePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","negativePrompt"],E);const A=f(t,["enhancePrompt"]);e!==void 0&&A!=null&&d(e,["parameters","enhancePrompt"],A);const b=f(t,["generateAudio"]);e!==void 0&&b!=null&&d(e,["parameters","generateAudio"],b);const k=f(t,["lastFrame"]);e!==void 0&&k!=null&&d(e,["instances[0]","lastFrame"],Vn(k));const M=f(t,["referenceImages"]);if(e!==void 0&&M!=null){let J=M;Array.isArray(J)&&(J=J.map(j=>KR(j))),d(e,["instances[0]","referenceImages"],J)}const q=f(t,["mask"]);e!==void 0&&q!=null&&d(e,["instances[0]","mask"],YR(q));const Q=f(t,["compressionQuality"]);return e!==void 0&&Q!=null&&d(e,["parameters","compressionQuality"],Q),n}function Jb(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],$b(c)),e}function Kb(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],Wb(c)),e}function Qb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const a=f(e,["image"]);a!=null&&d(n,["instances[0]","image"],Tu(a));const c=f(e,["video"]);c!=null&&d(n,["instances[0]","video"],H0(c));const h=f(e,["source"]);h!=null&&Zb(h,n);const g=f(e,["config"]);return g!=null&&zb(g,n),n}function Xb(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const a=f(e,["image"]);a!=null&&d(n,["instances[0]","image"],Vn(a));const c=f(e,["video"]);c!=null&&d(n,["instances[0]","video"],B0(c));const h=f(e,["source"]);h!=null&&jb(h,n);const g=f(e,["config"]);return g!=null&&Yb(g,n),n}function $b(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>nR(c))),d(e,["generatedVideos"],a)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(e,["raiMediaFilteredReasons"],l),e}function Wb(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>iR(c))),d(e,["generatedVideos"],a)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(e,["raiMediaFilteredReasons"],l),e}function Zb(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],Tu(l));const a=f(t,["video"]);return e!==void 0&&a!=null&&d(e,["instances[0]","video"],H0(a)),n}function jb(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],Vn(l));const a=f(t,["video"]);return e!==void 0&&a!=null&&d(e,["instances[0]","video"],B0(a)),n}function eR(t){const e={},n=f(t,["_self"]);n!=null&&d(e,["image"],fR(n));const o=f(t,["raiFilteredReason"]);o!=null&&d(e,["raiFilteredReason"],o);const l=f(t,["_self"]);return l!=null&&d(e,["safetyAttributes"],L0(l)),e}function Eu(t){const e={},n=f(t,["_self"]);n!=null&&d(e,["image"],k0(n));const o=f(t,["raiFilteredReason"]);o!=null&&d(e,["raiFilteredReason"],o);const l=f(t,["_self"]);l!=null&&d(e,["safetyAttributes"],P0(l));const a=f(t,["prompt"]);return a!=null&&d(e,["enhancedPrompt"],a),e}function tR(t){const e={},n=f(t,["_self"]);n!=null&&d(e,["mask"],k0(n));const o=f(t,["labels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),d(e,["labels"],l)}return e}function nR(t){const e={},n=f(t,["video"]);return n!=null&&d(e,["video"],qR(n)),e}function iR(t){const e={},n=f(t,["_self"]);return n!=null&&d(e,["video"],zR(n)),e}function oR(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const l=f(t,["audioTimestamp"]);l!=null&&d(e,["audioTimestamp"],l);const a=f(t,["candidateCount"]);a!=null&&d(e,["candidateCount"],a);const c=f(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(t,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const g=f(t,["logprobs"]);g!=null&&d(e,["logprobs"],g);const m=f(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const _=f(t,["mediaResolution"]);_!=null&&d(e,["mediaResolution"],_);const v=f(t,["presencePenalty"]);v!=null&&d(e,["presencePenalty"],v);const E=f(t,["responseLogprobs"]);E!=null&&d(e,["responseLogprobs"],E);const A=f(t,["responseMimeType"]);A!=null&&d(e,["responseMimeType"],A);const b=f(t,["responseModalities"]);b!=null&&d(e,["responseModalities"],b);const k=f(t,["responseSchema"]);k!=null&&d(e,["responseSchema"],k);const M=f(t,["routingConfig"]);M!=null&&d(e,["routingConfig"],M);const q=f(t,["seed"]);q!=null&&d(e,["seed"],q);const Q=f(t,["speechConfig"]);Q!=null&&d(e,["speechConfig"],Q);const J=f(t,["stopSequences"]);J!=null&&d(e,["stopSequences"],J);const j=f(t,["temperature"]);j!=null&&d(e,["temperature"],j);const ae=f(t,["thinkingConfig"]);ae!=null&&d(e,["thinkingConfig"],ae);const le=f(t,["topK"]);le!=null&&d(e,["topK"],le);const X=f(t,["topP"]);if(X!=null&&d(e,["topP"],X),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sR(t,e){const n={},o=f(e,["model"]);return o!=null&&d(n,["_url","name"],Ve(t,o)),n}function lR(t,e){const n={},o=f(e,["model"]);return o!=null&&d(n,["_url","name"],Ve(t,o)),n}function rR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function aR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function uR(t){const e={},n=f(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function cR(t){const e={},n=f(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=f(t,["imageSize"]);o!=null&&d(e,["imageSize"],o);const l=f(t,["personGeneration"]);l!=null&&d(e,["personGeneration"],l);const a=f(t,["outputMimeType"]);a!=null&&d(e,["imageOutputOptions","mimeType"],a);const c=f(t,["outputCompressionQuality"]);return c!=null&&d(e,["imageOutputOptions","compressionQuality"],c),e}function fR(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],oo(n));const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function k0(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&d(e,["imageBytes"],oo(o));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}function Tu(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],oo(n));const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Vn(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const o=f(t,["imageBytes"]);o!=null&&d(e,["bytesBase64Encoded"],oo(o));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}function dR(t,e,n){const o={},l=f(e,["pageSize"]);n!==void 0&&l!=null&&d(n,["_query","pageSize"],l);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&d(n,["_query","pageToken"],a);const c=f(e,["filter"]);n!==void 0&&c!=null&&d(n,["_query","filter"],c);const h=f(e,["queryBase"]);return n!==void 0&&h!=null&&d(n,["_url","models_url"],b0(t,h)),o}function hR(t,e,n){const o={},l=f(e,["pageSize"]);n!==void 0&&l!=null&&d(n,["_query","pageSize"],l);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&d(n,["_query","pageToken"],a);const c=f(e,["filter"]);n!==void 0&&c!=null&&d(n,["_query","filter"],c);const h=f(e,["queryBase"]);return n!==void 0&&h!=null&&d(n,["_url","models_url"],b0(t,h)),o}function pR(t,e){const n={},o=f(e,["config"]);return o!=null&&dR(t,o,n),n}function mR(t,e){const n={},o=f(e,["config"]);return o!=null&&hR(t,o,n),n}function gR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["_self"]);if(l!=null){let a=R0(l);Array.isArray(a)&&(a=a.map(c=>Ed(c))),d(e,["models"],a)}return e}function yR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["_self"]);if(l!=null){let a=R0(l);Array.isArray(a)&&(a=a.map(c=>Td(c))),d(e,["models"],a)}return e}function _R(t){const e={},n=f(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const o=f(t,["segmentationClasses"]);o!=null&&d(e,["maskClasses"],o);const l=f(t,["maskDilation"]);return l!=null&&d(e,["dilation"],l),e}function Ed(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["displayName"]);o!=null&&d(e,["displayName"],o);const l=f(t,["description"]);l!=null&&d(e,["description"],l);const a=f(t,["version"]);a!=null&&d(e,["version"],a);const c=f(t,["_self"]);c!=null&&d(e,["tunedModelInfo"],kR(c));const h=f(t,["inputTokenLimit"]);h!=null&&d(e,["inputTokenLimit"],h);const g=f(t,["outputTokenLimit"]);g!=null&&d(e,["outputTokenLimit"],g);const m=f(t,["supportedGenerationMethods"]);m!=null&&d(e,["supportedActions"],m);const _=f(t,["temperature"]);_!=null&&d(e,["temperature"],_);const v=f(t,["maxTemperature"]);v!=null&&d(e,["maxTemperature"],v);const E=f(t,["topP"]);E!=null&&d(e,["topP"],E);const A=f(t,["topK"]);A!=null&&d(e,["topK"],A);const b=f(t,["thinking"]);return b!=null&&d(e,["thinking"],b),e}function Td(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["displayName"]);o!=null&&d(e,["displayName"],o);const l=f(t,["description"]);l!=null&&d(e,["description"],l);const a=f(t,["versionId"]);a!=null&&d(e,["version"],a);const c=f(t,["deployedModels"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>Mb(E))),d(e,["endpoints"],v)}const h=f(t,["labels"]);h!=null&&d(e,["labels"],h);const g=f(t,["_self"]);g!=null&&d(e,["tunedModelInfo"],LR(g));const m=f(t,["defaultCheckpointId"]);m!=null&&d(e,["defaultCheckpointId"],m);const _=f(t,["checkpoints"]);if(_!=null){let v=_;Array.isArray(v)&&(v=v.map(E=>E)),d(e,["checkpoints"],v)}return e}function vR(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],Db(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],Ub(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],ob(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const _=f(t,["thought"]);_!=null&&d(e,["thought"],_);const v=f(t,["thoughtSignature"]);v!=null&&d(e,["thoughtSignature"],v);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function ER(t){const e={},n=f(t,["productImage"]);return n!=null&&d(e,["image"],Vn(n)),e}function TR(t,e){const n={},o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const l=f(t,["baseSteps"]);e!==void 0&&l!=null&&d(e,["parameters","baseSteps"],l);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const c=f(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);const m=f(t,["addWatermark"]);e!==void 0&&m!=null&&d(e,["parameters","addWatermark"],m);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","mimeType"],_);const v=f(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","compressionQuality"],v);const E=f(t,["enhancePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E);const A=f(t,["labels"]);return e!==void 0&&A!=null&&d(e,["labels"],A),n}function SR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["source"]);l!=null&&AR(l,n);const a=f(e,["config"]);return a!=null&&TR(a,n),n}function CR(t){const e={},n=f(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Eu(l))),d(e,["generatedImages"],o)}return e}function AR(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const l=f(t,["personImage"]);e!==void 0&&l!=null&&d(e,["instances[0]","personImage","image"],Vn(l));const a=f(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>ER(h))),d(e,["instances[0]","productImages"],c)}return n}function xR(t){const e={},n=f(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],Vn(n));const o=f(t,["referenceId"]);o!=null&&d(e,["referenceId"],o);const l=f(t,["referenceType"]);l!=null&&d(e,["referenceType"],l);const a=f(t,["maskImageConfig"]);a!=null&&d(e,["maskImageConfig"],_R(a));const c=f(t,["controlImageConfig"]);c!=null&&d(e,["controlImageConfig"],fb(c));const h=f(t,["styleImageConfig"]);h!=null&&d(e,["styleImageConfig"],h);const g=f(t,["subjectImageConfig"]);return g!=null&&d(e,["subjectImageConfig"],g),e}function L0(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const o=f(t,["safetyAttributes","scores"]);o!=null&&d(e,["scores"],o);const l=f(t,["contentType"]);return l!=null&&d(e,["contentType"],l),e}function P0(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const o=f(t,["safetyAttributes","scores"]);o!=null&&d(e,["scores"],o);const l=f(t,["contentType"]);return l!=null&&d(e,["contentType"],l),e}function NR(t){const e={},n=f(t,["category"]);if(n!=null&&d(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function bR(t){const e={},n=f(t,["image"]);return n!=null&&d(e,["image"],Vn(n)),e}function RR(t,e){const n={},o=f(t,["mode"]);e!==void 0&&o!=null&&d(e,["parameters","mode"],o);const l=f(t,["maxPredictions"]);e!==void 0&&l!=null&&d(e,["parameters","maxPredictions"],l);const a=f(t,["confidenceThreshold"]);e!==void 0&&a!=null&&d(e,["parameters","confidenceThreshold"],a);const c=f(t,["maskDilation"]);e!==void 0&&c!=null&&d(e,["parameters","maskDilation"],c);const h=f(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&d(e,["parameters","binaryColorThreshold"],h);const g=f(t,["labels"]);return e!==void 0&&g!=null&&d(e,["labels"],g),n}function IR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["source"]);l!=null&&MR(l,n);const a=f(e,["config"]);return a!=null&&RR(a,n),n}function wR(t){const e={},n=f(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>tR(l))),d(e,["generatedMasks"],o)}return e}function MR(t,e){const n={},o=f(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],Vn(l));const a=f(t,["scribbleImage"]);return e!==void 0&&a!=null&&d(e,["instances[0]","scribble"],bR(a)),n}function DR(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],kb(o)),e}function UR(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(v=>v)),d(e,["functionDeclarations"],_)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],rR(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],aR(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function O0(t){const e={},n=f(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&d(e,["codeExecution"],l);const a=f(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const c=f(t,["functionDeclarations"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>Lb(E))),d(e,["functionDeclarations"],v)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const _=f(t,["urlContext"]);return _!=null&&d(e,["urlContext"],_),e}function kR(t){const e={},n=f(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const o=f(t,["createTime"]);o!=null&&d(e,["createTime"],o);const l=f(t,["updateTime"]);return l!=null&&d(e,["updateTime"],l),e}function LR(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const o=f(t,["createTime"]);o!=null&&d(e,["createTime"],o);const l=f(t,["updateTime"]);return l!=null&&d(e,["updateTime"],l),e}function PR(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const l=f(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&d(e,["defaultCheckpointId"],a),n}function OR(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const l=f(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&d(e,["defaultCheckpointId"],a),n}function HR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","name"],Ve(t,o));const l=f(e,["config"]);return l!=null&&PR(l,n),n}function BR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["config"]);return l!=null&&OR(l,n),n}function GR(t,e){const n={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const l=f(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&d(e,["parameters","personGeneration"],a);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const h=f(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const g=f(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&d(e,["parameters","outputOptions","compressionQuality"],g);const m=f(t,["enhanceInputImage"]);e!==void 0&&m!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],m);const _=f(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const v=f(t,["labels"]);e!==void 0&&v!=null&&d(e,["labels"],v);const E=f(t,["numberOfImages"]);e!==void 0&&E!=null&&d(e,["parameters","sampleCount"],E);const A=f(t,["mode"]);return e!==void 0&&A!=null&&d(e,["parameters","mode"],A),n}function VR(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["_url","model"],Ve(t,o));const l=f(e,["image"]);l!=null&&d(n,["instances[0]","image"],Vn(l));const a=f(e,["upscaleFactor"]);a!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=f(e,["config"]);return c!=null&&GR(c,n),n}function FR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Eu(a))),d(e,["generatedImages"],l)}return e}function qR(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],oo(o));const l=f(t,["encoding"]);return l!=null&&d(e,["mimeType"],l),e}function zR(t){const e={},n=f(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],oo(o));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}function YR(t){const e={},n=f(t,["image"]);n!=null&&d(e,["_self"],Vn(n));const o=f(t,["maskMode"]);return o!=null&&d(e,["maskMode"],o),e}function JR(t){const e={},n=f(t,["image"]);n!=null&&d(e,["image"],Tu(n));const o=f(t,["referenceType"]);return o!=null&&d(e,["referenceType"],o),e}function KR(t){const e={},n=f(t,["image"]);n!=null&&d(e,["image"],Vn(n));const o=f(t,["referenceType"]);return o!=null&&d(e,["referenceType"],o),e}function H0(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["uri"],n);const o=f(t,["videoBytes"]);o!=null&&d(e,["encodedVideo"],oo(o));const l=f(t,["mimeType"]);return l!=null&&d(e,["encoding"],l),e}function B0(t){const e={},n=f(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const o=f(t,["videoBytes"]);o!=null&&d(e,["bytesBase64Encoded"],oo(o));const l=f(t,["mimeType"]);return l!=null&&d(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QR(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),n}function XR(t){const e={},n=f(t,["config"]);return n!=null&&QR(n,e),e}function $R(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function WR(t){const e={},n=f(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&$R(o,e),e}function ZR(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function jR(t,e){const n={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["customMetadata"],a)}const l=f(t,["chunkingConfig"]);return e!==void 0&&l!=null&&d(e,["chunkingConfig"],l),n}function eI(t){const e={},n=f(t,["name"]);n!=null&&d(e,["name"],n);const o=f(t,["metadata"]);o!=null&&d(e,["metadata"],o);const l=f(t,["done"]);l!=null&&d(e,["done"],l);const a=f(t,["error"]);a!=null&&d(e,["error"],a);const c=f(t,["response"]);return c!=null&&d(e,["response"],nI(c)),e}function tI(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=f(t,["fileName"]);o!=null&&d(e,["fileName"],o);const l=f(t,["config"]);return l!=null&&jR(l,e),e}function nI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&d(e,["parent"],o);const l=f(t,["documentName"]);return l!=null&&d(e,["documentName"],l),e}function iI(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),n}function oI(t){const e={},n=f(t,["config"]);return n!=null&&iI(n,e),e}function sI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["fileSearchStores"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["fileSearchStores"],a)}return e}function G0(t,e){const n={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const l=f(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>g)),d(e,["customMetadata"],h)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),n}function lI(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=f(t,["config"]);return o!=null&&G0(o,e),e}function rI(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aI="Content-Type",uI="X-Server-Timeout",cI="User-Agent",Sd="x-goog-api-client",fI="1.36.0",dI=`google-genai-sdk/${fI}`,hI="v1beta1",pI="v1beta";class mI{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:hI,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:pI,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const l=[this.getRequestUrlInternal(n)];return o&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))l.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,l.toString(),e.abortSignal),this.unaryApiCall(l,a,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[l,a]of Object.entries(n))typeof a=="object"?o[l]=Object.assign(Object.assign({},o[l]),a):a!==void 0&&(o[l]=a);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,n,o);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,l.toString(),e.abortSignal),this.streamApiCall(l,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,l){if(n&&n.timeout||l){const a=new AbortController,c=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>a.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}l&&l.addEventListener("abort",()=>{a.abort()}),e.signal=c}return n&&n.extraBody!==null&&gI(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async l=>(await rv(l),new yd(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async l=>(await rv(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){return Hn(this,arguments,function*(){var o;const l=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),a=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:_}=yield ve(l.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=a.decode(_,{stream:!0});try{const b=JSON.parse(v);if("error"in b){const k=JSON.parse(JSON.stringify(b.error)),M=k.status,q=k.code,Q=`got status: ${M}. ${JSON.stringify(b)}`;if(q>=400&&q<600)throw new _u({message:Q,status:q})}}catch(b){if(b.name==="ApiError")throw b}c+=v;let E=-1,A=0;for(;;){E=-1,A=0;for(const M of g){const q=c.indexOf(M);q!==-1&&(E===-1||q<E)&&(E=q,A=M.length)}if(E===-1)break;const b=c.substring(0,E);c=c.substring(E+A);const k=b.trim();if(k.startsWith(h)){const M=k.substring(h.length).trim();try{const q=new Response(M,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ve(new yd(q))}catch(q){throw new Error(`exception parsing stream chunk ${M}. ${q}`)}}}}}finally{l.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=dI+" "+this.clientOptions.userAgentExtra;return e[cI]=n,e[Sd]=n,e[aI]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[l,a]of Object.entries(e.headers))o.append(l,a);e.timeout&&e.timeout>0&&o.append(uI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);l.sizeBytes=String(c.size);const h=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=h;const g={file:l},m=this.getFileName(e),_=ee("upload/v1beta/files",g._url),v=await this.fetchUploadUrl(_,l.sizeBytes,l.mimeType,m,g,n==null?void 0:n.httpOptions);return a.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,o){var l;const a=this.clientOptions.uploader,c=await a.stat(n),h=String(c.size),g=(l=o==null?void 0:o.mimeType)!==null&&l!==void 0?l:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),v={};o!=null&&G0(o,v);const E=await this.fetchUploadUrl(m,h,g,_,v,o==null?void 0:o.httpOptions);return a.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,l,a,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},l?{"X-Goog-Upload-File-Name":l}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function rv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(o);throw n>=400&&n<600?new _u({message:l,status:n}):new Error(l)}}function gI(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,c){const h=Object.assign({},a);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const m=c[g],_=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&_&&typeof _=="object"&&!Array.isArray(_)?h[g]=o(_,m):(_&&m&&typeof _!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const l=o(n,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yI="mcp_used/unknown";let _I=!1;function V0(t){for(const e of t)if(vI(e)||typeof e=="object"&&"inputSchema"in e)return!0;return _I}function F0(t){var e;const n=(e=t[Sd])!==null&&e!==void 0?e:"";t[Sd]=(n+` ${yI}`).trimStart()}function vI(t){return t!==null&&typeof t=="object"&&t instanceof th}function EI(t){return Hn(this,arguments,function*(n,o=100){let l,a=0;for(;a<o;){const c=yield ve(n.listTools({cursor:l}));for(const h of c.tools)yield yield ve(h),a++;if(!c.nextCursor)break;l=c.nextCursor}})}class th{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new th(e,n)}async initialize(){var e,n,o,l;if(this.mcpTools.length>0)return;const a={},c=[];for(const _ of this.mcpClients)try{for(var h=!0,g=(n=void 0,Bn(EI(_))),m;m=await g.next(),e=m.done,!e;h=!0){l=m.value,h=!1;const v=l;c.push(v);const E=v.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=_}}catch(v){n={error:v}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),WA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await l.callTool({name:o.name,arguments:o.args},void 0,a);n.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function TI(t,e,n){const o=new qA;let l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data),Object.assign(o,l),e(o)}class SI{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=xI(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const _=new Promise(J=>{m=J}),v=e.callbacks,E=function(){m({})},A=this.apiClient,b={onopen:E,onmessage:J=>{TI(A,v.onmessage,J)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(J){},onclose:(o=v==null?void 0:v.onclose)!==null&&o!==void 0?o:function(J){}},k=this.webSocketFactory.create(g,AI(c),b);k.connect(),await _;const Q={setup:{model:Ve(this.apiClient,e.model)}};return k.send(JSON.stringify(Q)),new CI(k,this.apiClient)}}class CI{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=QN(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=KN(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(As.PLAY)}pause(){this.sendPlaybackControl(As.PAUSE)}stop(){this.sendPlaybackControl(As.STOP)}resetContext(){this.sendPlaybackControl(As.RESET_CONTEXT)}close(){this.conn.close()}}function AI(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function xI(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function bI(t,e,n){const o=new FA;let l;n.data instanceof Blob?l=await n.data.text():n.data instanceof ArrayBuffer?l=new TextDecoder().decode(n.data):l=n.data;const a=JSON.parse(l);if(t.isVertexAI()){const c=WN(a);Object.assign(o,c)}else Object.assign(o,a);e(o)}class RI{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new SI(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,l,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let _;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&V0(e.config.tools)&&F0(v);const E=DI(v);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,_);else{const ne=this.apiClient.getApiKey();let _e="BidiGenerateContent",Le="key";ne!=null&&ne.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),_e="BidiGenerateContentConstrained",Le="access_token"),_=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${_e}?${Le}=${ne}`}let A=()=>{};const b=new Promise(ne=>{A=ne}),k=e.callbacks,M=function(){var ne;(ne=k==null?void 0:k.onopen)===null||ne===void 0||ne.call(k),A({})},q=this.apiClient,Q={onopen:M,onmessage:ne=>{bI(q,k.onmessage,ne)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(ne){},onclose:(o=k==null?void 0:k.onclose)!==null&&o!==void 0?o:function(ne){}},J=this.webSocketFactory.create(_,MI(E),Q);J.connect(),await b;let j=Ve(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const ne=this.apiClient.getProject(),_e=this.apiClient.getLocation();j=`projects/${ne}/locations/${_e}/`+j}let ae={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qa.AUDIO]}:e.config.responseModalities=[Qa.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],X=[];for(const ne of le)if(this.isCallableTool(ne)){const _e=ne;X.push(await _e.tool())}else X.push(ne);X.length>0&&(e.config.tools=X);const Ne={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=JN(this.apiClient,Ne):ae=YN(this.apiClient,Ne),delete ae.config,J.send(JSON.stringify(ae)),new wI(J,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const II={turnComplete:!0};class wI{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Nn(n.turns),e.isVertexAI()||(o=o.map(l=>vu(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(NI)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},II),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:$N(e)}:n={realtimeInput:XN(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function MI(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function DI(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const av=10;function uv(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Rs(c)){l=!0;break}if(!l)return!0;const a=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Rs(t){return"callTool"in t&&typeof t.callTool=="function"}function UI(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>Rs(l)))!==null&&o!==void 0?o:!1}function cv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,l)=>{if(Rs(o))return;const a=o;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(l)}),n}function fv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kI extends Ci{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,l,a,c,h;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!UI(n)||uv(n.config))return await this.generateContentInternal(g);const m=cv(n);if(m.length>0){const k=m.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let _,v;const E=Nn(g.contents),A=(a=(l=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&a!==void 0?a:av;let b=0;for(;b<A&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const k=_.candidates[0].content,M=[];for(const q of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Rs(q)){const J=await q.callTool(_.functionCalls);M.push(...J)}b++,v={role:"user",parts:M},g.contents=Nn(g.contents),g.contents.push(k),g.contents.push(v),fv(g.config)&&(E.push(k),E.push(v))}return fv(g.config)&&(_.automaticFunctionCallingHistory=E),_},this.generateContentStream=async n=>{var o,l,a,c,h;if(this.maybeMoveToResponseJsonSchem(n),uv(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const g=cv(n);if(g.length>0){const v=g.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(l=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||l===void 0?void 0:l.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(h=(c=n==null?void 0:n.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var l;let a;const c=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:c.push(g);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async n=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new ko(vi.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const l={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(l)},this.generateVideos=async n=>{var o,l,a,c,h,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((l=n.video)===null||l===void 0)&&l.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((g=(h=n.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,l;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async g=>Rs(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&V0(e.config.tools)){const g=(l=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),F0(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var n,o,l;const a=new Map;for(const c of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Rs(c)){const h=c,g=await h.tool();for(const m of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,h)}}return a}async processAfcStream(e){var n,o,l;const a=(l=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:av;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,_,v){return Hn(this,arguments,function*(){for(var E,A,b,k,M,q;h<a;){c&&(h++,c=!1);const ae=yield ve(m.processParamsMaybeAddMcpUsage(v)),le=yield ve(m.generateContentStreamInternal(ae)),X=[],Ne=[];try{for(var Q=!0,J=(A=void 0,Bn(le)),j;j=yield ve(J.next()),E=j.done,!E;Q=!0){k=j.value,Q=!1;const ne=k;if(yield yield ve(ne),ne.candidates&&(!((M=ne.candidates[0])===null||M===void 0)&&M.content)){Ne.push(ne.candidates[0].content);for(const _e of(q=ne.candidates[0].content.parts)!==null&&q!==void 0?q:[])if(h<a&&_e.functionCall){if(!_e.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(_e.functionCall.name)){const Le=yield ve(_.get(_e.functionCall.name).callTool([_e.functionCall]));X.push(...Le)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${_e.functionCall.name}`)}}}}catch(ne){A={error:ne}}finally{try{!Q&&!E&&(b=J.return)&&(yield ve(b.call(J)))}finally{if(A)throw A.error}}if(X.length>0){c=!0;const ne=new Hl;ne.candidates=[{content:{role:"user",parts:X}}],yield yield ve(ne);const _e=[];_e.push(...Ne),_e.push({role:"user",parts:X});const Le=Nn(v.contents).concat(_e);v.contents=Le}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ov(this.apiClient,e);return h=ee("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=lv(_),E=new Hl;return Object.assign(E,v),E})}else{const m=iv(this.apiClient,e);return h=ee("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=sv(_),E=new Hl;return Object.assign(E,v),E})}}async generateContentStreamInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ov(this.apiClient,e);return h=ee("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(v){return Hn(this,arguments,function*(){var E,A,b,k;try{for(var M=!0,q=Bn(v),Q;Q=yield ve(q.next()),E=Q.done,!E;M=!0){k=Q.value,M=!1;const J=k,j=lv(yield ve(J.json()));j.sdkHttpResponse={headers:J.headers};const ae=new Hl;Object.assign(ae,j),yield yield ve(ae)}}catch(J){A={error:J}}finally{try{!M&&!E&&(b=q.return)&&(yield ve(b.call(q)))}finally{if(A)throw A.error}}})})}else{const m=iv(this.apiClient,e);return h=ee("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(v){return Hn(this,arguments,function*(){var E,A,b,k;try{for(var M=!0,q=Bn(v),Q;Q=yield ve(q.next()),E=Q.done,!E;M=!0){k=Q.value,M=!1;const J=k,j=sv(yield ve(J.json()));j.sdkHttpResponse={headers:J.headers};const ae=new Hl;Object.assign(ae,j),yield yield ve(ae)}}catch(J){A={error:J}}finally{try{!M&&!E&&(b=q.return)&&(yield ve(b.call(q)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Rb(this.apiClient,e);return h=ee("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=wb(_),E=new G_;return Object.assign(E,v),E})}else{const m=bb(this.apiClient,e);return h=ee("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=Ib(_),E=new G_;return Object.assign(E,v),E})}}async generateImagesInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Vb(this.apiClient,e);return h=ee("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=qb(_),E=new V_;return Object.assign(E,v),E})}else{const m=Gb(this.apiClient,e);return h=ee("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=Fb(_),E=new V_;return Object.assign(E,v),E})}}async editImageInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=Cb(this.apiClient,e);return a=ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const m=Ab(g),_=new MA;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=VR(this.apiClient,e);return a=ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const m=FR(g),_=new DA;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=SR(this.apiClient,e);return a=ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=CR(g),_=new UA;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=IR(this.apiClient,e);return a=ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=wR(g),_=new kA;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=lR(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>Td(_))}else{const m=sR(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Ed(_))}}async listInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mR(this.apiClient,e);return h=ee("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=yR(_),E=new F_;return Object.assign(E,v),E})}else{const m=pR(this.apiClient,e);return h=ee("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=gR(_),E=new F_;return Object.assign(E,v),E})}}async update(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=BR(this.apiClient,e);return h=ee("{model}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>Td(_))}else{const m=HR(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Ed(_))}}async delete(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=vb(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=Tb(_),E=new q_;return Object.assign(E,v),E})}else{const m=_b(this.apiClient,e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=Eb(_),E=new q_;return Object.assign(E,v),E})}}async countTokens(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mb(this.apiClient,e);return h=ee("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=yb(_),E=new z_;return Object.assign(E,v),E})}else{const m=pb(this.apiClient,e);return h=ee("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=gb(_),E=new z_;return Object.assign(E,v),E})}}async computeTokens(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=rb(this.apiClient,e);return a=ee("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const m=ab(g),_=new LA;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Xb(this.apiClient,e);return h=ee("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>{const v=Kb(_),E=new Xa;return Object.assign(E,v),E})}else{const m=Qb(this.apiClient,e);return h=ee("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const v=Jb(_),E=new Xa;return Object.assign(E,v),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LI extends Ci{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=xA(e);return h=ee("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c}else{const m=AA(e);return h=ee("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c}}async fetchPredictVideosOperationInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=yA(e);return a=ee("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PI(t){const e={},n=f(t,["data"]);if(n!=null&&d(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function OI(t){const e={},n=f(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>JI(a))),d(e,["parts"],l)}const o=f(t,["role"]);return o!=null&&d(e,["role"],o),e}function HI(t,e,n){const o={},l=f(e,["expireTime"]);n!==void 0&&l!=null&&d(n,["expireTime"],l);const a=f(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&d(n,["newSessionExpireTime"],a);const c=f(e,["uses"]);n!==void 0&&c!=null&&d(n,["uses"],c);const h=f(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&d(n,["bidiGenerateContentSetup"],YI(t,h));const g=f(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&d(n,["fieldMask"],g),o}function BI(t,e){const n={},o=f(e,["config"]);return o!=null&&d(n,["config"],HI(t,o,n)),n}function GI(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function VI(t){const e={},n=f(t,["id"]);n!=null&&d(e,["id"],n);const o=f(t,["args"]);o!=null&&d(e,["args"],o);const l=f(t,["name"]);if(l!=null&&d(e,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FI(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function qI(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function zI(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const l=f(t,["responseModalities"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","responseModalities"],l);const a=f(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const _=f(t,["seed"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","seed"],_);const v=f(t,["speechConfig"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","speechConfig"],eh(v));const E=f(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const A=f(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],OI(Gt(b)));const k=f(t,["tools"]);if(e!==void 0&&k!=null){let le=Hs(k);Array.isArray(le)&&(le=le.map(X=>QI(Os(X)))),d(e,["setup","tools"],le)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&d(e,["setup","sessionResumption"],KI(M));const q=f(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","inputAudioTranscription"],q);const Q=f(t,["outputAudioTranscription"]);e!==void 0&&Q!=null&&d(e,["setup","outputAudioTranscription"],Q);const J=f(t,["realtimeInputConfig"]);e!==void 0&&J!=null&&d(e,["setup","realtimeInputConfig"],J);const j=f(t,["contextWindowCompression"]);e!==void 0&&j!=null&&d(e,["setup","contextWindowCompression"],j);const ae=f(t,["proactivity"]);if(e!==void 0&&ae!=null&&d(e,["setup","proactivity"],ae),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function YI(t,e){const n={},o=f(e,["model"]);o!=null&&d(n,["setup","model"],Ve(t,o));const l=f(e,["config"]);return l!=null&&d(n,["config"],zI(l,n)),n}function JI(t){const e={},n=f(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const l=f(t,["executableCode"]);l!=null&&d(e,["executableCode"],l);const a=f(t,["fileData"]);a!=null&&d(e,["fileData"],GI(a));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],VI(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],PI(g));const m=f(t,["text"]);m!=null&&d(e,["text"],m);const _=f(t,["thought"]);_!=null&&d(e,["thought"],_);const v=f(t,["thoughtSignature"]);v!=null&&d(e,["thoughtSignature"],v);const E=f(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function KI(t){const e={},n=f(t,["handle"]);if(n!=null&&d(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QI(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const l=f(t,["codeExecution"]);if(l!=null&&d(e,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(v=>v)),d(e,["functionDeclarations"],_)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],FI(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],qI(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XI(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const l=Object.keys(o).map(a=>`${n}.${a}`);e.push(...l)}else e.push(n)}return e.join(",")}function $I(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(n){const a=XI(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];l.length>0&&(h=l.map(m=>c.includes(m)?`generationConfig.${m}`:m));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class WI extends Ci{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=BI(this.apiClient,e);a=ee("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=$I(h,e.config);return l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZI(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function jI(t){const e={},n=f(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&ZI(o,e),e}function e1(t){const e={},n=f(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function t1(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const l=f(t,["pageToken"]);return e!==void 0&&l!=null&&d(e,["_query","pageToken"],l),n}function n1(t){const e={},n=f(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const o=f(t,["config"]);return o!=null&&t1(o,e),e}function i1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const l=f(t,["documents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o1 extends Ci{constructor(e){super(),this.apiClient=e,this.list=async n=>new ko(vi.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=e1(e);return a=ee("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,o;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=jI(e);l=ee("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=n1(e);return a=ee("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=i1(g),_=new PA;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s1 extends Ci{constructor(e,n=new o1(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new ko(vi.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=XR(e);return a=ee("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZR(e);return a=ee("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,o;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WR(e);l=ee("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=oI(e);return a=ee("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=sI(g),_=new OA;return Object.assign(_,m),_})}}async uploadToFileSearchStoreInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=lI(e);return a=ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=rI(g),_=new HA;return Object.assign(_,m),_})}}async importFile(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tI(e);return a=ee("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const m=eI(g),_=new Xd;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let q0=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return q0=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const l1=()=>q0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cd(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ad=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bn extends Error{}class Kt extends bn{constructor(e,n,o,l){super(`${Kt.makeMessage(e,n,o)}`),this.status=e,this.headers=l,this.error=n}static makeMessage(e,n,o){const l=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,n,o,l){if(!e||!l)return new Su({message:o,cause:Ad(n)});const a=n;return e===400?new Y0(e,a,o,l):e===401?new J0(e,a,o,l):e===403?new K0(e,a,o,l):e===404?new Q0(e,a,o,l):e===409?new X0(e,a,o,l):e===422?new $0(e,a,o,l):e===429?new W0(e,a,o,l):e>=500?new Z0(e,a,o,l):new Kt(e,a,o,l)}}class xd extends Kt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Su extends Kt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class z0 extends Su{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Y0 extends Kt{}class J0 extends Kt{}class K0 extends Kt{}class Q0 extends Kt{}class X0 extends Kt{}class $0 extends Kt{}class W0 extends Kt{}class Z0 extends Kt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r1=/^[a-z][a-z0-9+.-]*:/i,a1=t=>r1.test(t);let Nd=t=>(Nd=Array.isArray,Nd(t));const u1=Nd;let c1=u1;const dv=c1;function f1(t){if(!t)return!0;for(const e in t)return!1;return!0}function d1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const h1=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bn(`${t} must be an integer`);if(e<0)throw new bn(`${t} must be a positive integer`);return e},p1=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m1=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cs="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const y1=()=>{var t,e,n,o,l;const a=g1();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cs,"X-Stainless-OS":pv(Deno.build.os),"X-Stainless-Arch":hv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cs,"X-Stainless-OS":pv((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":hv((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(l=globalThis.process.version)!==null&&l!==void 0?l:"unknown"};const c=_1();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function _1(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const l=o[1]||0,a=o[2]||0,c=o[3]||0;return{browser:e,version:`${l}.${a}.${c}`}}}return null}const hv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",pv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Pa;const v1=()=>Pa??(Pa=y1());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function j0(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function T1(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return j0({start(){},async pull(n){const{done:o,value:l}=await e.next();o?n.close():n.enqueue(l)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function eE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function S1(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),l=o.cancel();o.releaseLock(),await l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C1=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tE=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function jf(t,e,n){return tE(),new File(t,e??"unknown_file",n)}function A1(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const x1=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",N1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&nE(t),b1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function R1(t,e,n){if(tE(),t=await t,N1(t))return t instanceof File?t:jf([await t.arrayBuffer()],t.name);if(b1(t)){const l=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),jf(await bd(l),e,n)}const o=await bd(t);if(e||(e=A1(t)),!(n!=null&&n.type)){const l=o.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof l=="string"&&(n=Object.assign(Object.assign({},n),{type:l}))}return jf(o,e,n)}async function bd(t){var e,n,o,l,a;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(nE(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(x1(t))try{for(var h=!0,g=Bn(t),m;m=await g.next(),e=m.done,!e;h=!0){l=m.value,h=!1;const _=l;c.push(...await bd(_))}}catch(_){n={error:_}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const _=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${I1(t)}`)}return c}function I1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iE{constructor(e){this._client=e}}iE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const mv=Object.freeze(Object.create(null)),w1=(t=oE)=>(function(n,...o){if(n.length===1)return n[0];let l=!1;const a=[],c=n.reduce((_,v,E)=>{var A,b,k;/[?#]/.test(v)&&(l=!0);const M=o[E];let q=(l?encodeURIComponent:t)(""+M);return E!==o.length&&(M==null||typeof M=="object"&&M.toString===((k=Object.getPrototypeOf((b=Object.getPrototypeOf((A=M.hasOwnProperty)!==null&&A!==void 0?A:mv))!==null&&b!==void 0?b:mv))===null||k===void 0?void 0:k.toString))&&(q=M+"",a.push({start:_.length+v.length,length:q.length,error:`Value of type ${Object.prototype.toString.call(M).slice(8,-1)} is not a valid path parameter`})),_+v+(E===o.length?"":q)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)a.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(a.sort((_,v)=>_.start-v.start),a.length>0){let _=0;const v=a.reduce((E,A)=>{const b=" ".repeat(A.start-_),k="^".repeat(A.length);return _=A.start+A.length,E+b+k},"");throw new bn(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${c}
${v}`)}return c}),Oa=w1(oE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sE extends iE{create(e,n){var o;const{api_version:l=this._client.apiVersion}=e,a=Wa(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Oa`/${l}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:l=this._client.apiVersion}=n??{};return this._client.delete(Oa`/${l}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:l=this._client.apiVersion}=n??{};return this._client.post(Oa`/${l}/interactions/${e}/cancel`,o)}get(e,n={},o){var l;const a=n??{},{api_version:c=this._client.apiVersion}=a,h=Wa(a,["api_version"]);return this._client.get(Oa`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(l=n==null?void 0:n.stream)!==null&&l!==void 0?l:!1}))}}sE._key=Object.freeze(["interactions"]);class lE extends sE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M1(t){let e=0;for(const l of t)e+=l.length;const n=new Uint8Array(e);let o=0;for(const l of t)n.set(l,o),o+=l.length;return n}let Ha;function nh(t){let e;return(Ha??(e=new globalThis.TextEncoder,Ha=e.encode.bind(e)))(t)}let Ba;function gv(t){let e;return(Ba??(e=new globalThis.TextDecoder,Ba=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cu{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?nh(e):e;this.buffer=M1([this.buffer,n]);const o=[];let l;for(;(l=D1(this.buffer,this.carriageReturnIndex))!=null;){if(l.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=l.index;continue}if(this.carriageReturnIndex!=null&&(l.index!==this.carriageReturnIndex+1||l.carriage)){o.push(gv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?l.preceding-1:l.preceding,c=gv(this.buffer.subarray(0,a));o.push(c),this.buffer=this.buffer.subarray(l.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Cu.NEWLINE_CHARS=new Set([`
`,"\r"]);Cu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function D1(t,e){for(let l=e??0;l<t.length;l++){if(t[l]===10)return{preceding:l,index:l+1,carriage:!1};if(t[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function U1(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Za={off:0,error:200,warn:300,info:400,debug:500},yv=(t,e,n)=>{if(t){if(d1(Za,t))return t;Jt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Za))}`)}};function Yl(){}function Ga(t,e,n){return!e||Za[t]>Za[n]?Yl:e[t].bind(e)}const k1={error:Yl,warn:Yl,info:Yl,debug:Yl};let _v=new WeakMap;function Jt(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return k1;const l=_v.get(n);if(l&&l[0]===o)return l[1];const a={error:Ga("error",n,o),warn:Ga("warn",n,o),info:Ga("info",n,o),debug:Ga("debug",n,o)};return _v.set(n,[o,a]),a}const xo=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xs{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let l=!1;const a=o?Jt(o):console;function c(){return Hn(this,arguments,function*(){var g,m,_,v;if(l)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var A=!0,b=Bn(L1(e,n)),k;k=yield ve(b.next()),g=k.done,!g;A=!0){v=k.value,A=!1;const M=v;if(!E)if(M.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield ve(JSON.parse(M.data))}catch(q){throw a.error("Could not parse message into JSON:",M.data),a.error("From chunk:",M.raw),q}}}catch(M){m={error:M}}finally{try{!A&&!g&&(_=b.return)&&(yield ve(_.call(b)))}finally{if(m)throw m.error}}E=!0}catch(M){if(Cd(M))return yield ve(void 0);throw M}finally{E||n.abort()}})}return new xs(c,n,o)}static fromReadableStream(e,n,o){let l=!1;function a(){return Hn(this,arguments,function*(){var g,m,_,v;const E=new Cu,A=eE(e);try{for(var b=!0,k=Bn(A),M;M=yield ve(k.next()),g=M.done,!g;b=!0){v=M.value,b=!1;const q=v;for(const Q of E.decode(q))yield yield ve(Q)}}catch(q){m={error:q}}finally{try{!b&&!g&&(_=k.return)&&(yield ve(_.call(k)))}finally{if(m)throw m.error}}for(const q of E.flush())yield yield ve(q)})}function c(){return Hn(this,arguments,function*(){var g,m,_,v;if(l)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var A=!0,b=Bn(a()),k;k=yield ve(b.next()),g=k.done,!g;A=!0){v=k.value,A=!1;const M=v;E||M&&(yield yield ve(JSON.parse(M)))}}catch(M){m={error:M}}finally{try{!A&&!g&&(_=b.return)&&(yield ve(_.call(b)))}finally{if(m)throw m.error}}E=!0}catch(M){if(Cd(M))return yield ve(void 0);throw M}finally{E||n.abort()}})}return new xs(c,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),l=a=>({next:()=>{if(a.length===0){const c=o.next();e.push(c),n.push(c)}return a.shift()}});return[new xs(()=>l(e),this.controller,this.client),new xs(()=>l(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return j0({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:l,done:a}=await n.next();if(a)return o.close();const c=nh(JSON.stringify(l)+`
`);o.enqueue(c)}catch(l){o.error(l)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function L1(t,e){return Hn(this,arguments,function*(){var o,l,a,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bn("Attempted to iterate over a response with no body");const h=new O1,g=new Cu,m=eE(t.body);try{for(var _=!0,v=Bn(P1(m)),E;E=yield ve(v.next()),o=E.done,!o;_=!0){c=E.value,_=!1;const A=c;for(const b of g.decode(A)){const k=h.decode(b);k&&(yield yield ve(k))}}}catch(A){l={error:A}}finally{try{!_&&!o&&(a=v.return)&&(yield ve(a.call(v)))}finally{if(l)throw l.error}}for(const A of g.flush()){const b=h.decode(A);b&&(yield yield ve(b))}})}function P1(t){return Hn(this,arguments,function*(){var n,o,l,a;let c=new Uint8Array;try{for(var h=!0,g=Bn(t),m;m=yield ve(g.next()),n=m.done,!n;h=!0){a=m.value,h=!1;const _=a;if(_==null)continue;const v=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?nh(_):_;let E=new Uint8Array(c.length+v.length);E.set(c),E.set(v,c.length),c=E;let A;for(;(A=U1(c))!==-1;)yield yield ve(c.slice(0,A)),c=c.slice(A)}}catch(_){o={error:_}}finally{try{!h&&!n&&(l=g.return)&&(yield ve(l.call(g)))}finally{if(o)throw o.error}}c.length>0&&(yield yield ve(c))})}class O1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,l]=H1(e,":");return l.startsWith(" ")&&(l=l.substring(1)),n==="event"?this.event=l:n==="data"&&this.data.push(l),null}}function H1(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function B1(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:l,startTime:a}=e,c=await(async()=>{var h;if(e.options.stream)return Jt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):xs.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),m=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await n.json():await n.text()})();return Jt(t).debug(`[${o}] response parsed`,xo({retryOfRequestLogID:l,url:n.url,status:n.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ih extends Promise{constructor(e,n,o=B1){super(l=>{l(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new ih(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rE=Symbol("brand.privateNullableHeaders");function*G1(t){if(!t)return;if(rE in t){const{values:o,nulls:l}=t;yield*o.entries();for(const a of l)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():dv(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const l=o[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const a=dv(o[1])?o[1]:[o[1]];let c=!1;for(const h of a)h!==void 0&&(e&&!c&&(c=!0,yield[l,null]),yield[l,h])}}const Bl=t=>{const e=new Headers,n=new Set;for(const o of t){const l=new Set;for(const[a,c]of G1(o)){const h=a.toLowerCase();l.has(h)||(e.delete(a),l.add(h)),c===null?(e.delete(a),n.add(h)):(e.append(a,c),n.delete(h))}}return{[rE]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ed=t=>{var e,n,o,l,a,c;if(typeof globalThis.process<"u")return(o=(n=(e=fA)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(l=globalThis.Deno.env)===null||l===void 0?void 0:l.get)===null||a===void 0?void 0:a.call(l,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var aE;class Au{constructor(e){var n,o,l,a,c,h,g,{baseURL:m=ed("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=ed("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:v="v1beta"}=e,E=Wa(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:_,apiVersion:v},E),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(o=A.timeout)!==null&&o!==void 0?o:Au.DEFAULT_TIMEOUT,this.logger=(l=A.logger)!==null&&l!==void 0?l:console;const b="warn";this.logLevel=b,this.logLevel=(c=(a=yv(A.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:yv(ed("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:b,this.fetchOptions=A.fetchOptions,this.maxRetries=(h=A.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=A.fetch)!==null&&g!==void 0?g:E1(),this.encoder=C1,this._options=A,this.apiKey=_,this.apiVersion=v,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Bl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Bl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Bl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new bn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Cs}`}defaultIdempotencyKey(){return`stainless-node-retry-${l1()}`}makeStatusError(e,n,o,l){return Kt.generate(e,n,o,l)}buildURL(e,n,o){const l=!this.baseURLOverridden()&&o||this.baseURL,a=a1(e)?new URL(e):new URL(l+(l.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return f1(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(l=>Object.assign({method:e,path:n},l)))}request(e,n=null){return new ih(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var l,a,c;const h=await e,g=(l=h.maxRetries)!==null&&l!==void 0?l:this.maxRetries;n==null&&(n=g),await this.prepareOptions(h);const{req:m,url:_,timeout:v}=await this.buildRequest(h,{retryCount:g-n});await this.prepareRequest(m,{url:_,options:h});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=o===void 0?"":`, retryOf: ${o}`,b=Date.now();if(Jt(this).debug(`[${E}] sending request`,xo({retryOfRequestLogID:o,method:h.method,url:_,options:h,headers:m.headers})),!((a=h.signal)===null||a===void 0)&&a.aborted)throw new xd;const k=new AbortController,M=await this.fetchWithTimeout(_,m,v,k).catch(Ad),q=Date.now();if(M instanceof globalThis.Error){const J=`retrying, ${n} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new xd;const j=Cd(M)||/timed? ?out/i.test(String(M)+("cause"in M?String(M.cause):""));if(n)return Jt(this).info(`[${E}] connection ${j?"timed out":"failed"} - ${J}`),Jt(this).debug(`[${E}] connection ${j?"timed out":"failed"} (${J})`,xo({retryOfRequestLogID:o,url:_,durationMs:q-b,message:M.message})),this.retryRequest(h,n,o??E);throw Jt(this).info(`[${E}] connection ${j?"timed out":"failed"} - error; no more retries left`),Jt(this).debug(`[${E}] connection ${j?"timed out":"failed"} (error; no more retries left)`,xo({retryOfRequestLogID:o,url:_,durationMs:q-b,message:M.message})),j?new z0:new Su({cause:M})}const Q=`[${E}${A}] ${m.method} ${_} ${M.ok?"succeeded":"failed"} with status ${M.status} in ${q-b}ms`;if(!M.ok){const J=await this.shouldRetry(M);if(n&&J){const ne=`retrying, ${n} attempts remaining`;return await S1(M.body),Jt(this).info(`${Q} - ${ne}`),Jt(this).debug(`[${E}] response error (${ne})`,xo({retryOfRequestLogID:o,url:M.url,status:M.status,headers:M.headers,durationMs:q-b})),this.retryRequest(h,n,o??E,M.headers)}const j=J?"error; no more retries left":"error; not retryable";Jt(this).info(`${Q} - ${j}`);const ae=await M.text().catch(ne=>Ad(ne).message),le=p1(ae),X=le?void 0:ae;throw Jt(this).debug(`[${E}] response error (${j})`,xo({retryOfRequestLogID:o,url:M.url,status:M.status,headers:M.headers,message:X,durationMs:Date.now()-b})),this.makeStatusError(M.status,le,X,M.headers)}return Jt(this).info(Q),Jt(this).debug(`[${E}] response start`,xo({retryOfRequestLogID:o,url:M.url,status:M.status,headers:M.headers,durationMs:q-b})),{response:M,options:h,controller:k,requestLogID:E,retryOfRequestLogID:o,startTime:b}}async fetchWithTimeout(e,n,o,l){const a=n||{},{signal:c,method:h}=a,g=Wa(a,["signal","method"]);c&&c.addEventListener("abort",()=>l.abort());const m=setTimeout(()=>l.abort(),o),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,v=Object.assign(Object.assign(Object.assign({signal:l.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);h&&(v.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(m)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,l){var a;let c;const h=l==null?void 0:l.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(c=m)}const g=l==null?void 0:l.get("retry-after");if(g&&!c){const m=parseFloat(g);Number.isNaN(m)?c=Date.parse(g)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,m)}return await m1(c),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,c=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,l,a;const c=Object.assign({},e),{method:h,path:g,query:m,defaultBaseURL:_}=c,v=this.buildURL(g,m,_);"timeout"in c&&h1("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:E,body:A}=this.buildBody({options:c}),b=await this.buildHeaders({options:e,method:h,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:b},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:v,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:l}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=Bl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),v1()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Bl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:T1(e)}:this.encoder({body:e,headers:o})}}Au.DEFAULT_TIMEOUT=6e4;class Rt extends Au{constructor(){super(...arguments),this.interactions=new lE(this)}}aE=Rt;Rt.GeminiNextGenAPIClient=aE;Rt.GeminiNextGenAPIClientError=bn;Rt.APIError=Kt;Rt.APIConnectionError=Su;Rt.APIConnectionTimeoutError=z0;Rt.APIUserAbortError=xd;Rt.NotFoundError=Q0;Rt.ConflictError=X0;Rt.RateLimitError=W0;Rt.BadRequestError=Y0;Rt.AuthenticationError=J0;Rt.InternalServerError=Z0;Rt.PermissionDeniedError=K0;Rt.UnprocessableEntityError=$0;Rt.toFile=R1;Rt.Interactions=lE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V1(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function F1(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function q1(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function z1(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function Y1(t,e,n){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=f(t,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&d(e,["displayName"],l),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","epochCount"],a);const c=f(t,["learningRateMultiplier"]);if(c!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(t,["batchSize"]);e!==void 0&&h!=null&&d(e,["tuningTask","hyperparameters","batchSize"],h);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&d(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function J1(t,e,n){const o={};let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const A=f(t,["validationDataset"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec"],vv(A))}else if(l==="PREFERENCE_TUNING"){const A=f(t,["validationDataset"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec"],vv(A))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&d(e,["tunedModelDisplayName"],a);const c=f(t,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const A=f(t,["epochCount"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(h==="PREFERENCE_TUNING"){const A=f(t,["epochCount"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let g=f(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=f(t,["learningRateMultiplier"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(g==="PREFERENCE_TUNING"){const A=f(t,["learningRateMultiplier"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=f(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=f(t,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=f(t,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let _=f(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const A=f(t,["adapterSize"]);e!==void 0&&A!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(_==="PREFERENCE_TUNING"){const A=f(t,["adapterSize"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=f(t,["labels"]);e!==void 0&&v!=null&&d(e,["labels"],v);const E=f(t,["beta"]);return e!==void 0&&E!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),o}function K1(t,e){const n={},o=f(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const l=f(t,["preTunedModel"]);l!=null&&d(n,["preTunedModel"],l);const a=f(t,["trainingDataset"]);a!=null&&ow(a);const c=f(t,["config"]);return c!=null&&Y1(c,n),n}function Q1(t,e){const n={},o=f(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const l=f(t,["preTunedModel"]);l!=null&&d(n,["preTunedModel"],l);const a=f(t,["trainingDataset"]);a!=null&&sw(a,n,e);const c=f(t,["config"]);return c!=null&&J1(c,n,e),n}function X1(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function $1(t,e){const n={},o=f(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function W1(t,e,n){const o={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&d(e,["_query","pageSize"],l);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function Z1(t,e,n){const o={},l=f(t,["pageSize"]);e!==void 0&&l!=null&&d(e,["_query","pageSize"],l);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function j1(t,e){const n={},o=f(t,["config"]);return o!=null&&W1(o,n),n}function ew(t,e){const n={},o=f(t,["config"]);return o!=null&&Z1(o,n),n}function tw(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const l=f(t,["nextPageToken"]);l!=null&&d(n,["nextPageToken"],l);const a=f(t,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>uE(h))),d(n,["tuningJobs"],c)}return n}function nw(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const l=f(t,["nextPageToken"]);l!=null&&d(n,["nextPageToken"],l);const a=f(t,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>Rd(h))),d(n,["tuningJobs"],c)}return n}function iw(t,e){const n={},o=f(t,["name"]);o!=null&&d(n,["model"],o);const l=f(t,["name"]);return l!=null&&d(n,["endpoint"],l),n}function ow(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),d(n,["examples","examples"],l)}return n}function sw(t,e,n){const o={};let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function uE(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const l=f(t,["name"]);l!=null&&d(n,["name"],l);const a=f(t,["state"]);a!=null&&d(n,["state"],x0(a));const c=f(t,["createTime"]);c!=null&&d(n,["createTime"],c);const h=f(t,["tuningTask","startTime"]);h!=null&&d(n,["startTime"],h);const g=f(t,["tuningTask","completeTime"]);g!=null&&d(n,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(n,["updateTime"],m);const _=f(t,["description"]);_!=null&&d(n,["description"],_);const v=f(t,["baseModel"]);v!=null&&d(n,["baseModel"],v);const E=f(t,["_self"]);return E!=null&&d(n,["tunedModel"],iw(E)),n}function Rd(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const l=f(t,["name"]);l!=null&&d(n,["name"],l);const a=f(t,["state"]);a!=null&&d(n,["state"],x0(a));const c=f(t,["createTime"]);c!=null&&d(n,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(n,["startTime"],h);const g=f(t,["endTime"]);g!=null&&d(n,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&d(n,["updateTime"],m);const _=f(t,["error"]);_!=null&&d(n,["error"],_);const v=f(t,["description"]);v!=null&&d(n,["description"],v);const E=f(t,["baseModel"]);E!=null&&d(n,["baseModel"],E);const A=f(t,["tunedModel"]);A!=null&&d(n,["tunedModel"],A);const b=f(t,["preTunedModel"]);b!=null&&d(n,["preTunedModel"],b);const k=f(t,["supervisedTuningSpec"]);k!=null&&d(n,["supervisedTuningSpec"],k);const M=f(t,["preferenceOptimizationSpec"]);M!=null&&d(n,["preferenceOptimizationSpec"],M);const q=f(t,["tuningDataStats"]);q!=null&&d(n,["tuningDataStats"],q);const Q=f(t,["encryptionSpec"]);Q!=null&&d(n,["encryptionSpec"],Q);const J=f(t,["partnerModelTuningSpec"]);J!=null&&d(n,["partnerModelTuningSpec"],J);const j=f(t,["customBaseModel"]);j!=null&&d(n,["customBaseModel"],j);const ae=f(t,["experiment"]);ae!=null&&d(n,["experiment"],ae);const le=f(t,["labels"]);le!=null&&d(n,["labels"],le);const X=f(t,["outputUri"]);X!=null&&d(n,["outputUri"],X);const Ne=f(t,["pipelineJob"]);Ne!=null&&d(n,["pipelineJob"],Ne);const ne=f(t,["serviceAccount"]);ne!=null&&d(n,["serviceAccount"],ne);const _e=f(t,["tunedModelDisplayName"]);_e!=null&&d(n,["tunedModelDisplayName"],_e);const Le=f(t,["veoTuningSpec"]);return Le!=null&&d(n,["veoTuningSpec"],Le),n}function lw(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const l=f(t,["name"]);l!=null&&d(n,["name"],l);const a=f(t,["metadata"]);a!=null&&d(n,["metadata"],a);const c=f(t,["done"]);c!=null&&d(n,["done"],c);const h=f(t,["error"]);return h!=null&&d(n,["error"],h),n}function vv(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&d(n,["validationDatasetUri"],o);const l=f(t,["vertexDatasetResource"]);return l!=null&&d(n,["validationDatasetUri"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rw extends Ci{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ko(vi.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const l={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(l.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:l});return a.baseModel=void 0,await this.tuneInternal(a)}else{const l=Object.assign({},n);return await this.tuneInternal(l)}else{const l=Object.assign({},n),a=await this.tuneMldevInternal(l);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:gd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=$1(e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>Rd(_))}else{const m=X1(e);return h=ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>uE(_))}}async listInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ew(e);return h=ee("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=nw(_),E=new Y_;return Object.assign(E,v),E})}else{const m=j1(e);return h=ee("tunedModels",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=tw(_),E=new Y_;return Object.assign(E,v),E})}}async cancel(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=F1(e);return h=ee("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=z1(_),E=new J_;return Object.assign(E,v),E})}else{const m=V1(e);return h=ee("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=q1(_),E=new J_;return Object.assign(E,v),E})}}async tuneInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=Q1(e,e);return a=ee("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>Rd(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=K1(e);return a=ee("tunedModels",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>lw(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aw{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uw=1024*1024*8,cw=3,fw=1e3,dw=2,ja="x-goog-upload-status";async function hw(t,e,n){var o;const l=await cE(t,e,n),a=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[ja])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function pw(t,e,n){var o;const l=await cE(t,e,n),a=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[ja])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=v0(a),h=new $d;return Object.assign(h,c),h}async function cE(t,e,n){var o,l;let a=0,c=0,h=new yd(new Response),g="upload";for(a=t.size;c<a;){const m=Math.min(uw,a-c),_=t.slice(c,c+m);c+m>=a&&(g+=", finalize");let v=0,E=fw;for(;v<cw&&(h=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[ja]));)v++,await gw(E),E=E*dw;if(c+=m,((l=h==null?void 0:h.headers)===null||l===void 0?void 0:l[ja])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function mw(t){return{size:t.size,type:t.type}}function gw(t){return new Promise(e=>setTimeout(e,t))}class yw{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hw(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pw(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mw(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _w{create(e,n,o){return new vw(e,n,o)}}class vw{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ev="x-goog-api-key";class Ew{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Ev)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ev,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tw="gl-node/";class Sw{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Rt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=mA(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const l=new Ew(this.apiKey);this.apiClient=new mI({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Tw+"web",uploader:new yw,downloader:new aw}),this.models=new kI(this.apiClient),this.live=new RI(this.apiClient,l,new _w),this.batches=new zx(this.apiClient),this.chats=new xN(this.models,this.apiClient),this.caches=new SN(this.apiClient),this.files=new LN(this.apiClient),this.operations=new LI(this.apiClient),this.authTokens=new WI(this.apiClient),this.tunings=new rw(this.apiClient),this.fileSearchStores=new s1(this.apiClient)}}const Cw=async(t,e)=>{const n=new Sw({apiKey:"AIzaSyC8XDyBWWF3JnxXdHTx5QAHrHFNxkDZk9Q"}),o=e&&e.length>0?`Current trip members: ${e.join(", ")}. If "", "all", "everyone" is mentioned, include ALL these members.`:"";try{const l=await n.models.generateContent({model:"gemini-3-flash-preview",contents:`Parse the following expense description into structured data.
      The input might be in English, Cantonese (), or Mandarin.
      ${o}

      Cantonese hints:
      - "" or "" means "paid by"
      - "" or "share" means "shared by everyone/all"
      - Numbers followed by "" means currency amount

      Example: "Dinner at Mong Kok, 800 HKD, paid by Alan, shared with Bob and Charlie"
      Example: " 500 Long " means "Buy clothes, 500, paid by Long, shared by all"

      Input: "${t}"`,config:{responseMimeType:"application/json",responseSchema:{type:tn.OBJECT,properties:{description:{type:tn.STRING},amount:{type:tn.NUMBER},payerName:{type:tn.STRING},participantNames:{type:tn.ARRAY,items:{type:tn.STRING}}},propertyOrdering:["description","amount","payerName","participantNames"]}}});return l.text?JSON.parse(l.text.trim()):null}catch(l){return console.error("Gemini Parsing Error:",l),null}},Aw=[{name:"Fion",image:"/VIP/Fion.png"},{name:"Sally",image:"/VIP/Sally.png"},{name:"Eun",image:"/VIP/Eun.png"},{name:"Vennie",image:"/VIP/Vennie.png"},{name:"Jake",image:"/VIP/Jake.png"},{name:"Long",image:"/VIP/Long.png"},{name:"Han",image:"/VIP/Han.png"},{name:"Kaka",image:"/VIP/Kaka.png"},{name:"Rex",image:"/VIP/Rex.png"}],fE="hk-vip-list",xw=()=>{try{const t=localStorage.getItem(fE);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load VIP list:",t)}return Aw},td=t=>{try{localStorage.setItem(fE,JSON.stringify(t))}catch(e){console.error("Failed to save VIP list:",e)}},Nw=()=>{};var Tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw Gs(e)},Gs=function(t){return new Error("Firebase Database ("+dE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let l=t.charCodeAt(o);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},bw=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const l=t[n++];if(l<128)e[o++]=String.fromCharCode(l);else if(l>191&&l<224){const a=t[n++];e[o++]=String.fromCharCode((l&31)<<6|a&63)}else if(l>239&&l<365){const a=t[n++],c=t[n++],h=t[n++],g=((l&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const a=t[n++],c=t[n++];e[o++]=String.fromCharCode((l&15)<<12|(a&63)<<6|c&63)}}return e.join("")},oh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let l=0;l<t.length;l+=3){const a=t[l],c=l+1<t.length,h=c?t[l+1]:0,g=l+2<t.length,m=g?t[l+2]:0,_=a>>2,v=(a&3)<<4|h>>4;let E=(h&15)<<2|m>>6,A=m&63;g||(A=64,c||(E=64)),o.push(n[_],n[v],n[E],n[A])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let l=0;l<t.length;){const a=n[t.charAt(l++)],h=l<t.length?n[t.charAt(l)]:0;++l;const m=l<t.length?n[t.charAt(l)]:64;++l;const v=l<t.length?n[t.charAt(l)]:64;if(++l,a==null||h==null||m==null||v==null)throw new Rw;const E=a<<2|h>>4;if(o.push(E),m!==64){const A=h<<4&240|m>>2;if(o.push(A),v!==64){const b=m<<6&192|v;o.push(b)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Rw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pE=function(t){const e=hE(t);return oh.encodeByteArray(e,!0)},eu=function(t){return pE(t).replace(/\./g,"")},Id=function(t){try{return oh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){return mE(void 0,t)}function mE(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!ww(n)||(t[n]=mE(t[n],e[n]));return t}function ww(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=()=>Mw().__FIREBASE_DEFAULTS__,Uw=()=>{if(typeof process>"u"||typeof Tv>"u")return;const t=Tv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Id(t[1]);return e&&JSON.parse(e)},gE=()=>{try{return Nw()||Dw()||Uw()||kw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lw=t=>{var e,n;return(n=(e=gE())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Pw=t=>{const e=Lw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},yE=()=>{var t;return(t=gE())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ow(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",l=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:l,exp:l+3600,auth_time:l,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[eu(JSON.stringify(n)),eu(JSON.stringify(c)),""].join(".")}const Jl={};function Bw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?t.emulator.push(e):t.prod.push(e);return t}function Gw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Sv=!1;function Vw(t,e){if(typeof window>"u"||typeof document>"u"||!sh(window.location.host)||Jl[t]===e||Jl[t]||Sv)return;Jl[t]=e;function n(E){return`__firebase__banner__${E}`}const o="__firebase__banner",a=Bw().prod.length>0;function c(){const E=document.getElementById(o);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Sv=!0,c()},E}function _(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=Gw(o),A=n("text"),b=document.getElementById(A)||document.createElement("span"),k=n("learnmore"),M=document.getElementById(k)||document.createElement("a"),q=n("preprendIcon"),Q=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const J=E.element;h(J),_(M,k);const j=m();g(Q,q),J.append(Q,b,M,j),document.body.appendChild(J)}a?(b.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _E(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fw())}function qw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zw(){return dE.NODE_ADMIN===!0}function Yw(){try{return typeof indexedDB=="object"}catch{return!1}}function Jw(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(o);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var a;e(((a=l.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="FirebaseError";class ar extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=Kw,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vE.prototype.create)}}class vE{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},l=`${this.service}/${e}`,a=this.errors[e],c=a?Qw(a,o):"Error",h=`${this.serviceName}: ${c} (${l}).`;return new ar(l,h,o)}}function Qw(t,e){return t.replace(Xw,(n,o)=>{const l=e[o];return l!=null?String(l):`<${o}?>`})}const Xw=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){return JSON.parse(t)}function bt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(t){let e={},n={},o={},l="";try{const a=t.split(".");e=Zl(Id(a[0])||""),n=Zl(Id(a[1])||""),l=a[2],o=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:o,signature:l}},$w=function(t){const e=EE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Ww=function(t){const e=EE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Us(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Cv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tu(t,e,n){const o={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(o[l]=e.call(n,t[l],l,t));return o}function nu(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const l of n){if(!o.includes(l))return!1;const a=t[l],c=e[l];if(Av(a)&&Av(c)){if(!nu(a,c))return!1}else if(a!==c)return!1}for(const l of o)if(!n.includes(l))return!1;return!0}function Av(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){const e=[];for(const[n,o]of Object.entries(t))Array.isArray(o)?o.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const o=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)o[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)o[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const E=o[v-3]^o[v-8]^o[v-14]^o[v-16];o[v]=(E<<1|E>>>31)&4294967295}let l=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,_;for(let v=0;v<80;v++){v<40?v<20?(m=h^a&(c^h),_=1518500249):(m=a^c^h,_=1859775393):v<60?(m=a&c|h&(a|c),_=2400959708):(m=a^c^h,_=3395469782);const E=(l<<5|l>>>27)+m+g+_+o[v]&4294967295;g=h,h=c,c=(a<<30|a>>>2)&4294967295,a=l,l=E}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const o=n-this.blockSize;let l=0;const a=this.buf_;let c=this.inbuf_;for(;l<n;){if(c===0)for(;l<=o;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(a[c]=e.charCodeAt(l),++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}else for(;l<n;)if(a[c]=e[l],++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let o=0;for(let l=0;l<5;l++)for(let a=24;a>=0;a-=8)e[o]=this.chain_[l]>>a&255,++o;return e}}function lh(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let l=t.charCodeAt(o);if(l>=55296&&l<=56319){const a=l-55296;o++,K(o<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(o)-56320;l=65536+(a<<10)+c}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Nu=function(t){let e=0;for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);o<128?e++:o<2048?e+=2:o>=55296&&o<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t){return t&&t._delegate?t._delegate:t}class jl{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new xu;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&o.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iM(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:l});o.resolve(a)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);o===h&&c.resolve(l)}return l}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(o)??new Set;l.add(e),this.onInitCallbacks.set(o,l);const a=this.instances.get(o);return a&&e(a,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const l of o)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:nM(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nM(t){return t===No?void 0:t}function iM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(it||(it={}));const sM={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},lM=it.INFO,rM={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},aM=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),l=rM[e];if(l)console[l](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class TE{constructor(e){this.name=e,this._logLevel=lM,this._logHandler=aM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const uM=(t,e)=>e.some(n=>t instanceof n);let xv,Nv;function cM(){return xv||(xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fM(){return Nv||(Nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,wd=new WeakMap,CE=new WeakMap,nd=new WeakMap,rh=new WeakMap;function dM(t){const e=new Promise((n,o)=>{const l=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(ji(t.result)),l()},c=()=>{o(t.error),l()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&SE.set(n,t)}).catch(()=>{}),rh.set(e,t),e}function hM(t){if(wd.has(t))return;const e=new Promise((n,o)=>{const l=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),l()},c=()=>{o(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});wd.set(t,e)}let Md={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pM(t){Md=t(Md)}function mM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(id(this),e,...n);return CE.set(o,e.sort?e.sort():[e]),ji(o)}:fM().includes(t)?function(...e){return t.apply(id(this),e),ji(SE.get(this))}:function(...e){return ji(t.apply(id(this),e))}}function gM(t){return typeof t=="function"?mM(t):(t instanceof IDBTransaction&&hM(t),uM(t,cM())?new Proxy(t,Md):t)}function ji(t){if(t instanceof IDBRequest)return dM(t);if(nd.has(t))return nd.get(t);const e=gM(t);return e!==t&&(nd.set(t,e),rh.set(e,t)),e}const id=t=>rh.get(t);function yM(t,e,{blocked:n,upgrade:o,blocking:l,terminated:a}={}){const c=indexedDB.open(t,e),h=ji(c);return o&&c.addEventListener("upgradeneeded",g=>{o(ji(c.result),g.oldVersion,g.newVersion,ji(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{a&&g.addEventListener("close",()=>a()),l&&g.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const _M=["get","getKey","getAll","getAllKeys","count"],vM=["put","add","delete","clear"],od=new Map;function bv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(od.get(e))return od.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,l=vM.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(l||_M.includes(n)))return;const a=async function(c,...h){const g=this.transaction(c,l?"readwrite":"readonly");let m=g.store;return o&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),l&&g.done]))[0]};return od.set(e,a),a}pM(t=>({...t,get:(e,n,o)=>bv(e,n)||t.get(e,n,o),has:(e,n)=>!!bv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TM(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function TM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dd="@firebase/app",Rv="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new TE("@firebase/app"),SM="@firebase/app-compat",CM="@firebase/analytics-compat",AM="@firebase/analytics",xM="@firebase/app-check-compat",NM="@firebase/app-check",bM="@firebase/auth",RM="@firebase/auth-compat",IM="@firebase/database",wM="@firebase/data-connect",MM="@firebase/database-compat",DM="@firebase/functions",UM="@firebase/functions-compat",kM="@firebase/installations",LM="@firebase/installations-compat",PM="@firebase/messaging",OM="@firebase/messaging-compat",HM="@firebase/performance",BM="@firebase/performance-compat",GM="@firebase/remote-config",VM="@firebase/remote-config-compat",FM="@firebase/storage",qM="@firebase/storage-compat",zM="@firebase/firestore",YM="@firebase/ai",JM="@firebase/firestore-compat",KM="firebase",QM="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="[DEFAULT]",XM={[Dd]:"fire-core",[SM]:"fire-core-compat",[AM]:"fire-analytics",[CM]:"fire-analytics-compat",[NM]:"fire-app-check",[xM]:"fire-app-check-compat",[bM]:"fire-auth",[RM]:"fire-auth-compat",[IM]:"fire-rtdb",[wM]:"fire-data-connect",[MM]:"fire-rtdb-compat",[DM]:"fire-fn",[UM]:"fire-fn-compat",[kM]:"fire-iid",[LM]:"fire-iid-compat",[PM]:"fire-fcm",[OM]:"fire-fcm-compat",[HM]:"fire-perf",[BM]:"fire-perf-compat",[GM]:"fire-rc",[VM]:"fire-rc-compat",[FM]:"fire-gcs",[qM]:"fire-gcs-compat",[zM]:"fire-fst",[JM]:"fire-fst-compat",[YM]:"fire-vertex","fire-js":"fire-js",[KM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Map,$M=new Map,kd=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ou(t){const e=t.name;if(kd.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;kd.set(e,t);for(const n of iu.values())Iv(n,t);for(const n of $M.values())Iv(n,t);return!0}function WM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ZM(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new vE("app","Firebase",jM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new jl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=QM;function AE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o={name:Ud,automaticDataCollectionEnabled:!0,...e},l=o.name;if(typeof l!="string"||!l)throw eo.create("bad-app-name",{appName:String(l)});if(n||(n=yE()),!n)throw eo.create("no-options");const a=iu.get(l);if(a){if(nu(n,a.options)&&nu(o,a.config))return a;throw eo.create("duplicate-app",{appName:l})}const c=new oM(l);for(const g of kd.values())c.addComponent(g);const h=new eD(n,o,c);return iu.set(l,h),h}function nD(t=Ud){const e=iu.get(t);if(!e&&t===Ud&&yE())return AE();if(!e)throw eo.create("no-app",{appName:t});return e}function Is(t,e,n){let o=XM[t]??t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),a=e.match(/\s|\//);if(l||a){const c=[`Unable to register library "${o}" with version "${e}":`];l&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(c.join(" "));return}ou(new jl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="firebase-heartbeat-database",oD=1,er="firebase-heartbeat-store";let sd=null;function xE(){return sd||(sd=yM(iD,oD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(er)}catch(n){console.warn(n)}}}}).catch(t=>{throw eo.create("idb-open",{originalErrorMessage:t.message})})),sd}async function sD(t){try{const n=(await xE()).transaction(er),o=await n.objectStore(er).get(NE(t));return await n.done,o}catch(e){if(e instanceof ar)Ei.warn(e.message);else{const n=eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ei.warn(n.message)}}}async function wv(t,e){try{const o=(await xE()).transaction(er,"readwrite");await o.objectStore(er).put(e,NE(t)),await o.done}catch(n){if(n instanceof ar)Ei.warn(n.message);else{const o=eo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ei.warn(o.message)}}}function NE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=1024,rD=30;class aD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cD(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Mv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats.length>rD){const c=fD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Ei.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mv(),{heartbeatsToSend:o,unsentEntries:l}=uD(this._heartbeatsCache.heartbeats),a=eu(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ei.warn(n),""}}}function Mv(){return new Date().toISOString().substring(0,10)}function uD(t,e=lD){const n=[];let o=t.slice();for(const l of t){const a=n.find(c=>c.agent===l.agent);if(a){if(a.dates.push(l.date),Dv(n)>e){a.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Dv(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class cD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yw()?Jw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Dv(t){return eu(JSON.stringify({version:2,heartbeats:t})).length}function fD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let o=1;o<t.length;o++)t[o].date<n&&(n=t[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){ou(new jl("platform-logger",e=>new EM(e),"PRIVATE")),ou(new jl("heartbeat",e=>new aD(e),"PRIVATE")),Is(Dd,Rv,t),Is(Dd,Rv,"esm2020"),Is("fire-js","")}dD("");var hD="firebase",pD="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(hD,pD,"app");var Uv={};const kv="@firebase/database",Lv="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bE="";function mD(t){bE=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Zl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return xi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gD(e)}}catch{}return new yD},Ro=RE("localStorage"),_D=RE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new TE("@firebase/database"),vD=(function(){let t=1;return function(){return t++}})(),IE=function(t){const e=eM(t),n=new jw;n.update(e);const o=n.digest();return oh.encodeByteArray(o)},ur=function(...t){let e="";for(let n=0;n<t.length;n++){const o=t[n];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?e+=ur.apply(null,o):typeof o=="object"?e+=bt(o):e+=o,e+=" "}return e};let Kl=null,Pv=!0;const ED=function(t,e){K(!0,"Can't turn on custom loggers persistently."),ws.logLevel=it.VERBOSE,Kl=ws.log.bind(ws)},Bt=function(...t){if(Pv===!0&&(Pv=!1,Kl===null&&_D.get("logging_enabled")===!0&&ED()),Kl){const e=ur.apply(null,t);Kl(e)}},cr=function(t){return function(...e){Bt(t,...e)}},Ld=function(...t){const e="FIREBASE INTERNAL ERROR: "+ur(...t);ws.error(e)},Ti=function(...t){const e=`FIREBASE FATAL ERROR: ${ur(...t)}`;throw ws.error(e),new Error(e)},sn=function(...t){const e="FIREBASE WARNING: "+ur(...t);ws.warn(e)},TD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&sn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wE=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},SD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ks="[MIN_NAME]",wo="[MAX_NAME]",Fs=function(t,e){if(t===e)return 0;if(t===ks||e===wo)return-1;if(e===ks||t===wo)return 1;{const n=Ov(t),o=Ov(e);return n!==null?o!==null?n-o===0?t.length-e.length:n-o:-1:o!==null?1:t<e?-1:1}},CD=function(t,e){return t===e?0:t<e?-1:1},Gl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+bt(e))},ah=function(t){if(typeof t!="object"||t===null)return bt(t);const e=[];for(const o in t)e.push(o);e.sort();let n="{";for(let o=0;o<e.length;o++)o!==0&&(n+=","),n+=bt(e[o]),n+=":",n+=ah(t[e[o]]);return n+="}",n},ME=function(t,e){const n=t.length;if(n<=e)return[t];const o=[];for(let l=0;l<n;l+=e)l+e>n?o.push(t.substring(l,n)):o.push(t.substring(l,l+e));return o};function ln(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const DE=function(t){K(!wE(t),"Invalid JSON number");const e=11,n=52,o=(1<<e-1)-1;let l,a,c,h,g;t===0?(a=0,c=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-o)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),o),a=h+o,c=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-o-n))));const m=[];for(g=n;g;g-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(g=e;g;g-=1)m.push(a%2?1:0),a=Math.floor(a/2);m.push(l?1:0),m.reverse();const _=m.join("");let v="";for(g=0;g<64;g+=8){let E=parseInt(_.substr(g,8),2).toString(16);E.length===1&&(E="0"+E),v=v+E}return v.toLowerCase()},AD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xD=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ND(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const o=new Error(t+" at "+e._path.toString()+": "+n);return o.code=t.toUpperCase(),o}const bD=new RegExp("^-?(0*)\\d{1,10}$"),RD=-2147483648,ID=2147483647,Ov=function(t){if(bD.test(t)){const e=Number(t);if(e>=RD&&e<=ID)return e}return null},qs=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw sn("Exception was thrown by user callback.",n),e},Math.floor(0))}},wD=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ql=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,ZM(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(o=>this.appCheck=o)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){sn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,o){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',sn(e)}}class Ka{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ka.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="5",UE="v",kE="s",LE="r",PE="f",OE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,HE="ls",BE="p",Pd="ac",GE="websocket",VE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,o,l,a=!1,c="",h=!1,g=!1,m=null){this.secure=n,this.namespace=o,this.webSocketOnly=l,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ro.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ro.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function UD(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function qE(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let o;if(e===GE)o=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===VE)o=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);UD(t)&&(n.ns=t.namespace);const l=[];return ln(n,(a,c)=>{l.push(a+"="+c)}),o+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.counters_={}}incrementCounter(e,n=1){xi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Iw(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld={},rd={};function ch(t){const e=t.toString();return ld[e]||(ld[e]=new kD),ld[e]}function LD(t,e){const n=t.toString();return rd[n]||(rd[n]=e()),rd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<o.length;++l)o[l]&&qs(()=>{this.onMessage_(o[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="start",OD="close",HD="pLPCommand",BD="pRTLPCB",zE="id",YE="pw",JE="ser",GD="cb",VD="seg",FD="ts",qD="d",zD="dframe",KE=1870,QE=30,YD=KE-QE,JD=25e3,KD=3e4;class Ns{constructor(e,n,o,l,a,c,h){this.connId=e,this.repoInfo=n,this.applicationId=o,this.appCheckToken=l,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cr(e),this.stats_=ch(n),this.urlFn=g=>(this.appCheckToken&&(g[Pd]=this.appCheckToken),qE(n,VE,g))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new PD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(KD)),SD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fh((...a)=>{const[c,h,g,m,_]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Hv)this.id=h,this.password=g;else if(c===OD)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const o={};o[Hv]="t",o[JE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[GD]=this.scriptTagHolder.uniqueCallbackIdentifier),o[UE]=uh,this.transportSessionId&&(o[kE]=this.transportSessionId),this.lastSessionId&&(o[HE]=this.lastSessionId),this.applicationId&&(o[BE]=this.applicationId),this.appCheckToken&&(o[Pd]=this.appCheckToken),typeof location<"u"&&location.hostname&&OE.test(location.hostname)&&(o[LE]=PE);const l=this.urlFn(o);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ns.forceAllow_=!0}static forceDisallow(){Ns.forceDisallow_=!0}static isAvailable(){return Ns.forceAllow_?!0:!Ns.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!AD()&&!xD()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=pE(n),l=ME(o,YD);for(let a=0;a<l.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const o={};o[zD]="t",o[zE]=e,o[YE]=n,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=bt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class fh{constructor(e,n,o,l){this.onDisconnect=o,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=vD(),window[HD+this.uniqueCallbackIdentifier]=e,window[BD+this.uniqueCallbackIdentifier]=n,this.myIFrame=fh.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Bt("frame writing exception"),h.stack&&Bt(h.stack),Bt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Bt("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[zE]=this.myID,e[YE]=this.myPW,e[JE]=this.currentSerial;let n=this.urlFn(e),o="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+QE+o.length<=KE;){const c=this.pendingSegs.shift();o=o+"&"+VD+l+"="+c.seg+"&"+FD+l+"="+c.ts+"&"+qD+l+"="+c.d,l++}return n=n+o,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,o){this.pendingSegs.push({seg:e,ts:n,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const o=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(o,Math.floor(JD)),a=()=>{clearTimeout(l),o()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const l=o.readyState;(!l||l==="loaded"||l==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),n())},o.onerror=()=>{Bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=16384,XD=45e3;let su=null;typeof MozWebSocket<"u"?su=MozWebSocket:typeof WebSocket<"u"&&(su=WebSocket);class Ln{constructor(e,n,o,l,a,c,h){this.connId=e,this.applicationId=o,this.appCheckToken=l,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cr(this.connId),this.stats_=ch(n),this.connURL=Ln.connectionURL_(n,c,h,l,o),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,o,l,a){const c={};return c[UE]=uh,typeof location<"u"&&location.hostname&&OE.test(location.hostname)&&(c[LE]=PE),n&&(c[kE]=n),o&&(c[HE]=o),l&&(c[Pd]=l),a&&(c[BE]=a),qE(e,GE,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ro.set("previous_websocket_failure",!0);try{let o;zw(),this.mySock=new su(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){Ln.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(n);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&su!==null&&!Ln.forceDisallow_}static previouslyFailed(){return Ro.isInMemoryStorage||Ro.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ro.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const o=Zl(n);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const o=this.extractFrameCount_(n);o!==null&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const n=bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=ME(n,QD);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(XD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ln.responsesRequiredToBeHealthy=2;Ln.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{static get ALL_TRANSPORTS(){return[Ns,Ln]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Ln&&Ln.isAvailable();let o=n&&!Ln.previouslyFailed();if(e.webSocketOnly&&(n||sn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Ln];else{const l=this.transports_=[];for(const a of tr.ALL_TRANSPORTS)a&&a.isAvailable()&&l.push(a);tr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tr.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=6e4,WD=5e3,ZD=10*1024,jD=100*1024,ad="t",Bv="d",e2="s",Gv="r",t2="e",Vv="o",Fv="a",qv="n",zv="p",n2="h";class i2{constructor(e,n,o,l,a,c,h,g,m,_){this.id=e,this.repoInfo_=n,this.applicationId_=o,this.appCheckToken_=l,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cr("c:"+this.id+":"),this.transportManager_=new tr(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,o)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Ql(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>jD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>ZD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ad in e){const n=e[ad];n===Fv?this.upgradeIfSecondaryHealthy_():n===Gv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Vv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Gl("t",e),o=Gl("d",e);if(n==="c")this.onSecondaryControl_(o);else if(n==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:zv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Fv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:qv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Gl("t",e),o=Gl("d",e);n==="c"?this.onControl_(o):n==="d"&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Gl(ad,e);if(Bv in e){const o=e[Bv];if(n===n2){const l={...o};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===qv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===e2?this.onConnectionShutdown_(o):n===Gv?this.onReset_(o):n===t2?Ld("Server Error: "+o):n===Vv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ld("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,o=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),uh!==o&&sn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,o),Ql(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($D))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ql(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(WD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:zv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ro.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{put(e,n,o,l){}merge(e,n,o,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,o){}onDisconnectMerge(e,n,o){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let l=0;l<o.length;l++)o[l].callback.apply(o[l].context,n)}}on(e,n,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:o});const l=this.getInitialEvent(e);l&&n.apply(o,l)}off(e,n,o){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let a=0;a<l.length;a++)if(l[a].callback===n&&(!o||o===l[a].context)){l.splice(a,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends $E{static getInstance(){return new lu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_E()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=32,Jv=768;class tt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let o=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[o]=this.pieces_[l],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function qe(){return new tt("")}function Ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function no(t){return t.pieces_.length-t.pieceNum_}function ot(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new tt(t.pieces_,e)}function WE(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function o2(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ZE(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function jE(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new tt(e,0)}function Ct(t,e){const n=[];for(let o=t.pieceNum_;o<t.pieces_.length;o++)n.push(t.pieces_[o]);if(e instanceof tt)for(let o=e.pieceNum_;o<e.pieces_.length;o++)n.push(e.pieces_[o]);else{const o=e.split("/");for(let l=0;l<o.length;l++)o[l].length>0&&n.push(o[l])}return new tt(n,0)}function we(t){return t.pieceNum_>=t.pieces_.length}function nn(t,e){const n=Ae(t),o=Ae(e);if(n===null)return e;if(n===o)return nn(ot(t),ot(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function dh(t,e){if(no(t)!==no(e))return!1;for(let n=t.pieceNum_,o=e.pieceNum_;n<=t.pieces_.length;n++,o++)if(t.pieces_[n]!==e.pieces_[o])return!1;return!0}function Pn(t,e){let n=t.pieceNum_,o=e.pieceNum_;if(no(t)>no(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[o])return!1;++n,++o}return!0}class s2{constructor(e,n){this.errorPrefix_=n,this.parts_=ZE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=Nu(this.parts_[o]);eT(this)}}function l2(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Nu(e),eT(t)}function r2(t){const e=t.parts_.pop();t.byteLength_-=Nu(e),t.parts_.length>0&&(t.byteLength_-=1)}function eT(t){if(t.byteLength_>Jv)throw new Error(t.errorPrefix_+"has a key path longer than "+Jv+" bytes ("+t.byteLength_+").");if(t.parts_.length>Yv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Yv+") or object contains a cycle "+bo(t))}function bo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends $E{static getInstance(){return new hh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=1e3,a2=300*1e3,Kv=30*1e3,u2=1.3,c2=3e4,f2="server_kill",Qv=3;class _i extends XE{constructor(e,n,o,l,a,c,h,g){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=_i.nextPersistentConnectionId_++,this.log_=cr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vl,this.maxReconnectDelay_=a2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&lu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,o){const l=++this.requestNumber_,a={r:l,a:e,b:n};this.log_(bt(a)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),o&&(this.requestCBHash_[l]=o)}get(e){this.initConnection_();const n=new xu,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,o,l){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:l,hashFn:n,query:e,tag:o};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(o)})}sendListen_(e){const n=e.query,o=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+o+" for "+l);const a={p:o},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,h=>{const g=h.d,m=h.s;_i.warnOnListenWarnings_(g,n),(this.listens.get(o)&&this.listens.get(o).get(l))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(o,l),e.onComplete&&e.onComplete(m,g))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&xi(e,"w")){const o=Us(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();sn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Ww(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Kv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=$w(e)?"auth":"gauth",o={cred:e};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(n,o,l=>{const a=l.s,c=l.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,o=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,o)})}unlisten(e,n){const o=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,e._queryObject,n)}sendUnlisten_(e,n,o,l){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";l&&(a.q=o,a.t=l),this.sendRequest(c,a)}onDisconnectPut(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:o})}onDisconnectMerge(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:o})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,o,l){const a={p:n,d:o};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{l&&setTimeout(()=>{l(c.s,c.d)},Math.floor(0))})}put(e,n,o,l){this.putInternal("p",e,n,o,l)}merge(e,n,o,l){this.putInternal("m",e,n,o,l)}putInternal(e,n,o,l,a){this.initConnection_();const c={p:n,d:o};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:l}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,o,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,o=>{if(o.s!=="ok"){const a=o.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+bt(e));const n=e.r,o=this.requestCBHash_[n];o&&(delete this.requestCBHash_[n],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ld("Unrecognized action received from server: "+bt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Vl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>c2&&(this.reconnectDelay_=Vl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*u2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+_i.nextConnectionId_++,a=this.lastSessionId;let c=!1,h=null;const g=function(){h?h.close():(c=!0,o())},m=function(v){K(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:g,sendRequest:m};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,E]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?Bt("getToken() completed but was canceled"):(Bt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=E&&E.token,h=new i2(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,o,A=>{sn(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(f2)},a))}catch(v){this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&sn(v),g())}}}interrupt(e){Bt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Bt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Cv(this.interruptReasons_)&&(this.reconnectDelay_=Vl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let o;n?o=n.map(a=>ah(a)).join("$"):o="default";const l=this.removeListen_(e,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const o=new tt(e).toString();let l;if(this.listens.has(o)){const a=this.listens.get(o);l=a.get(n),a.delete(n),a.size===0&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(e,n){Bt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Qv&&(this.reconnectDelay_=Kv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Bt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Qv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+bE.replace(/\./g,"-")]=1,_E()?e["framework.cordova"]=1:qw()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=lu.getInstance().currentlyOnline();return Cv(this.interruptReasons_)&&e}}_i.nextPersistentConnectionId_=0;_i.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new xe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const o=new xe(ks,e),l=new xe(ks,n);return this.compare(o,l)!==0}minPost(){return xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va;class tT extends bu{static get __EMPTY_NODE(){return Va}static set __EMPTY_NODE(e){Va=e}compare(e,n){return Fs(e.name,n.name)}isDefinedOn(e){throw Gs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return xe.MIN}maxPost(){return new xe(wo,Va)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new xe(e,Va)}toString(){return".key"}}const Ms=new tT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n,o,l,a=null){this.isReverse_=l,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?o(e.key,n):1,l&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Nt{constructor(e,n,o,l,a){this.key=e,this.value=n,this.color=o??Nt.RED,this.left=l??on.EMPTY_NODE,this.right=a??on.EMPTY_NODE}copy(e,n,o,l,a){return new Nt(e??this.key,n??this.value,o??this.color,l??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let l=this;const a=o(e,l.key);return a<0?l=l.copy(null,null,null,l.left.insert(e,n,o),null):a===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return on.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let o,l;if(o=this,n(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),n(e,o.key)===0){if(o.right.isEmpty())return on.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Nt.RED=!0;Nt.BLACK=!1;class d2{copy(e,n,o,l,a){return this}insert(e,n,o){return new Nt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class on{constructor(e,n=on.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new on(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nt.BLACK,null,null))}remove(e){return new on(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nt.BLACK,null,null))}get(e){let n,o=this.root_;for(;!o.isEmpty();){if(n=this.comparator_(e,o.key),n===0)return o.value;n<0?o=o.left:n>0&&(o=o.right)}return null}getPredecessorKey(e){let n,o=this.root_,l=null;for(;!o.isEmpty();)if(n=this.comparator_(e,o.key),n===0){if(o.left.isEmpty())return l?l.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else n<0?o=o.left:n>0&&(l=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Fa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Fa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Fa(this.root_,null,this.comparator_,!0,e)}}on.EMPTY_NODE=new d2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t,e){return Fs(t.name,e.name)}function ph(t,e){return Fs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od;function p2(t){Od=t}const nT=function(t){return typeof t=="number"?"number:"+DE(t):"string:"+t},iT=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xi(e,".sv"),"Priority must be a string or number.")}else K(t===Od||t.isEmpty(),"priority of unexpected type.");K(t===Od||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xv;class xt{static set __childrenNodeConstructor(e){Xv=e}static get __childrenNodeConstructor(){return Xv}constructor(e,n=xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),iT(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return we(e)?this:Ae(e)===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const o=Ae(e);return o===null?n:n.isEmpty()&&o!==".priority"?this:(K(o!==".priority"||no(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ot(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+nT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=DE(this.value_):e+=this.value_,this.lazyHash_=IE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof xt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,o=typeof this.value_,l=xt.VALUE_TYPE_ORDER.indexOf(n),a=xt.VALUE_TYPE_ORDER.indexOf(o);return K(l>=0,"Unknown leaf type: "+n),K(a>=0,"Unknown leaf type: "+o),l===a?o==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oT,sT;function m2(t){oT=t}function g2(t){sT=t}class y2 extends bu{compare(e,n){const o=e.node.getPriority(),l=n.node.getPriority(),a=o.compareTo(l);return a===0?Fs(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return xe.MIN}maxPost(){return new xe(wo,new xt("[PRIORITY-POST]",sT))}makePost(e,n){const o=oT(e);return new xe(n,new xt("[PRIORITY-POST]",o))}toString(){return".priority"}}const dt=new y2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=Math.log(2);class v2{constructor(e){const n=a=>parseInt(Math.log(a)/_2,10),o=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=o(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ru=function(t,e,n,o){t.sort(e);const l=function(g,m){const _=m-g;let v,E;if(_===0)return null;if(_===1)return v=t[g],E=n?n(v):v,new Nt(E,v.node,Nt.BLACK,null,null);{const A=parseInt(_/2,10)+g,b=l(g,A),k=l(A+1,m);return v=t[A],E=n?n(v):v,new Nt(E,v.node,Nt.BLACK,b,k)}},a=function(g){let m=null,_=null,v=t.length;const E=function(b,k){const M=v-b,q=v;v-=b;const Q=l(M+1,q),J=t[M],j=n?n(J):J;A(new Nt(j,J.node,k,null,Q))},A=function(b){m?(m.left=b,m=b):(_=b,m=b)};for(let b=0;b<g.count;++b){const k=g.nextBitIsOne(),M=Math.pow(2,g.count-(b+1));k?E(M,Nt.BLACK):(E(M,Nt.BLACK),E(M,Nt.RED))}return _},c=new v2(t.length),h=a(c);return new on(o||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud;const Ss={};class yi{static get Default(){return K(Ss&&dt,"ChildrenNode.ts has not been loaded"),ud=ud||new yi({".priority":Ss},{".priority":dt}),ud}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Us(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof on?n:null}hasIndex(e){return xi(this.indexSet_,e.toString())}addIndex(e,n){K(e!==Ms,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let l=!1;const a=n.getIterator(xe.Wrap);let c=a.getNext();for(;c;)l=l||e.isDefinedOn(c.node),o.push(c),c=a.getNext();let h;l?h=ru(o,e.getCompare()):h=Ss;const g=e.toString(),m={...this.indexSet_};m[g]=e;const _={...this.indexes_};return _[g]=h,new yi(_,m)}addToIndexes(e,n){const o=tu(this.indexes_,(l,a)=>{const c=Us(this.indexSet_,a);if(K(c,"Missing index implementation for "+a),l===Ss)if(c.isDefinedOn(e.node)){const h=[],g=n.getIterator(xe.Wrap);let m=g.getNext();for(;m;)m.name!==e.name&&h.push(m),m=g.getNext();return h.push(e),ru(h,c.getCompare())}else return Ss;else{const h=n.get(e.name);let g=l;return h&&(g=g.remove(new xe(e.name,h))),g.insert(e,e.node)}});return new yi(o,this.indexSet_)}removeFromIndexes(e,n){const o=tu(this.indexes_,l=>{if(l===Ss)return l;{const a=n.get(e.name);return a?l.remove(new xe(e.name,a)):l}});return new yi(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl;class me{static get EMPTY_NODE(){return Fl||(Fl=new me(new on(ph),null,yi.Default))}constructor(e,n,o){this.children_=e,this.priorityNode_=n,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&iT(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fl}updatePriority(e){return this.children_.isEmpty()?this:new me(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Fl:n}}getChild(e){const n=Ae(e);return n===null?this:this.getImmediateChild(n).getChild(ot(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const o=new xe(e,n);let l,a;n.isEmpty()?(l=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(o,this.children_));const c=l.isEmpty()?Fl:this.priorityNode_;return new me(l,c,a)}}updateChild(e,n){const o=Ae(e);if(o===null)return n;{K(Ae(e)!==".priority"||no(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(ot(e),n);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let o=0,l=0,a=!0;if(this.forEachChild(dt,(c,h)=>{n[c]=h.val(e),o++,a&&me.INTEGER_REGEXP_.test(c)?l=Math.max(l,Number(c)):a=!1}),!e&&a&&l<2*o){const c=[];for(const h in n)c[h]=n[h];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+nT(this.getPriority().val())+":"),this.forEachChild(dt,(n,o)=>{const l=o.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":IE(e)}return this.lazyHash_}getPredecessorChildName(e,n,o){const l=this.resolveIndex_(o);if(l){const a=l.getPredecessorKey(new xe(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new xe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new xe(n,this.children_.get(n)):null}forEachChild(e,n){const o=this.resolveIndex_(e);return o?o.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,xe.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)<0;)l.getNext(),a=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,xe.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)>0;)l.getNext(),a=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fr?-1:0}withIndex(e){if(e===Ms||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new me(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ms||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const o=this.getIterator(dt),l=n.getIterator(dt);let a=o.getNext(),c=l.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=o.getNext(),c=l.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Ms?null:this.indexMap_.get(e.toString())}}me.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class E2 extends me{constructor(){super(new on(ph),me.EMPTY_NODE,yi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return me.EMPTY_NODE}isEmpty(){return!1}}const fr=new E2;Object.defineProperties(xe,{MIN:{value:new xe(ks,me.EMPTY_NODE)},MAX:{value:new xe(wo,fr)}});tT.__EMPTY_NODE=me.EMPTY_NODE;xt.__childrenNodeConstructor=me;p2(fr);g2(fr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=!0;function Ot(t,e=null){if(t===null)return me.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new xt(n,Ot(e))}if(!(t instanceof Array)&&T2){const n=[];let o=!1;if(ln(t,(c,h)=>{if(c.substring(0,1)!=="."){const g=Ot(h);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),n.push(new xe(c,g)))}}),n.length===0)return me.EMPTY_NODE;const a=ru(n,h2,c=>c.name,ph);if(o){const c=ru(n,dt.getCompare());return new me(a,Ot(e),new yi({".priority":c},{".priority":dt}))}else return new me(a,Ot(e),yi.Default)}else{let n=me.EMPTY_NODE;return ln(t,(o,l)=>{if(xi(t,o)&&o.substring(0,1)!=="."){const a=Ot(l);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(o,a))}}),n.updatePriority(Ot(e))}}m2(Ot);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2 extends bu{constructor(e){super(),this.indexPath_=e,K(!we(e)&&Ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const o=this.extractChild(e.node),l=this.extractChild(n.node),a=o.compareTo(l);return a===0?Fs(e.name,n.name):a}makePost(e,n){const o=Ot(e),l=me.EMPTY_NODE.updateChild(this.indexPath_,o);return new xe(n,l)}maxPost(){const e=me.EMPTY_NODE.updateChild(this.indexPath_,fr);return new xe(wo,e)}toString(){return ZE(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2 extends bu{compare(e,n){const o=e.node.compareTo(n.node);return o===0?Fs(e.name,n.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return xe.MIN}maxPost(){return xe.MAX}makePost(e,n){const o=Ot(e);return new xe(n,o)}toString(){return".value"}}const A2=new C2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t){return{type:"value",snapshotNode:t}}function Ls(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function nr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ir(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function x2(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this.index_=e}updateChild(e,n,o,l,a,c){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(l).equals(o.getChild(l))&&h.isEmpty()===o.isEmpty()||(c!=null&&(o.isEmpty()?e.hasChild(n)?c.trackChildChange(nr(n,h)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Ls(n,o)):c.trackChildChange(ir(n,o,h))),e.isLeafNode()&&o.isEmpty())?e:e.updateImmediateChild(n,o).withIndex(this.index_)}updateFullNode(e,n,o){return o!=null&&(e.isLeafNode()||e.forEachChild(dt,(l,a)=>{n.hasChild(l)||o.trackChildChange(nr(l,a))}),n.isLeafNode()||n.forEachChild(dt,(l,a)=>{if(e.hasChild(l)){const c=e.getImmediateChild(l);c.equals(a)||o.trackChildChange(ir(l,a,c))}else o.trackChildChange(Ls(l,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?me.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.indexedFilter_=new mh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=or.getStartPost_(e),this.endPost_=or.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,o=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&o}updateChild(e,n,o,l,a,c){return this.matches(new xe(n,o))||(o=me.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,o,l,a,c)}updateFullNode(e,n,o){n.isLeafNode()&&(n=me.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(me.EMPTY_NODE);const a=this;return n.forEachChild(dt,(c,h)=>{a.matches(new xe(c,h))||(l=l.updateImmediateChild(c,me.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,o)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=n=>{const o=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new or(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,o,l,a,c){return this.rangedFilter_.matches(new xe(n,o))||(o=me.EMPTY_NODE),e.getImmediateChild(n).equals(o)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,o,l,a,c):this.fullLimitUpdateChild_(e,n,o,a,c)}updateFullNode(e,n,o){let l;if(n.isLeafNode()||n.isEmpty())l=me.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=me.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))l=l.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(me.EMPTY_NODE);let a;this.reverse_?a=l.getReverseIterator(this.index_):a=l.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:l=l.updateImmediateChild(h.name,me.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,o)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,o,l,a){let c;if(this.reverse_){const v=this.index_.getCompare();c=(E,A)=>v(A,E)}else c=this.index_.getCompare();const h=e;K(h.numChildren()===this.limit_,"");const g=new xe(n,o),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),_=this.rangedFilter_.matches(g);if(h.hasChild(n)){const v=h.getImmediateChild(n);let E=l.getChildAfterChild(this.index_,m,this.reverse_);for(;E!=null&&(E.name===n||h.hasChild(E.name));)E=l.getChildAfterChild(this.index_,E,this.reverse_);const A=E==null?1:c(E,g);if(_&&!o.isEmpty()&&A>=0)return a!=null&&a.trackChildChange(ir(n,o,v)),h.updateImmediateChild(n,o);{a!=null&&a.trackChildChange(nr(n,v));const k=h.updateImmediateChild(n,me.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(a!=null&&a.trackChildChange(Ls(E.name,E.node)),k.updateImmediateChild(E.name,E.node)):k}}else return o.isEmpty()?e:_&&c(m,g)>=0?(a!=null&&(a.trackChildChange(nr(m.name,m.node)),a.trackChildChange(Ls(n,o))),h.updateImmediateChild(n,o).updateImmediateChild(m.name,me.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=dt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ks}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===dt}copy(){const e=new gh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function b2(t){return t.loadsAllData()?new mh(t.getIndex()):t.hasLimit()?new N2(t):new or(t)}function $v(t){const e={};if(t.isDefault())return e;let n;if(t.index_===dt?n="$priority":t.index_===A2?n="$value":t.index_===Ms?n="$key":(K(t.index_ instanceof S2,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=bt(n),t.startSet_){const o=t.startAfterSet_?"startAfter":"startAt";e[o]=bt(t.indexStartValue_),t.startNameSet_&&(e[o]+=","+bt(t.indexStartName_))}if(t.endSet_){const o=t.endBeforeSet_?"endBefore":"endAt";e[o]=bt(t.indexEndValue_),t.endNameSet_&&(e[o]+=","+bt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Wv(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==dt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends XE{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,o,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.log_=cr("p:rest:"),this.listens_={}}listen(e,n,o,l){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=au.getListenId_(e,o),h={};this.listens_[c]=h;const g=$v(e._queryParams);this.restRequest_(a+".json",g,(m,_)=>{let v=_;if(m===404&&(v=null,m=null),m===null&&this.onDataUpdate_(a,v,!1,o),Us(this.listens_,c)===h){let E;m?m===401?E="permission_denied":E="rest_error:"+m:E="ok",l(E,null)}})}unlisten(e,n){const o=au.getListenId_(e,n);delete this.listens_[o]}get(e){const n=$v(e._queryParams),o=e._path.toString(),l=new xu;return this.restRequest_(o+".json",n,(a,c)=>{let h=c;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(o,h,!1,null),l.resolve(h)):l.reject(new Error(h))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},o){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,a])=>{l&&l.accessToken&&(n.auth=l.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Zw(n);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(o&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Zl(h.responseText)}catch{sn("Failed to parse JSON response for "+c+": "+h.responseText)}o(null,g)}else h.status!==401&&h.status!==404&&sn("Got unsuccessful REST response for "+c+" Status: "+h.status),o(h.status);o=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.rootNode_=me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(){return{value:null,children:new Map}}function rT(t,e,n){if(we(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const o=Ae(e);t.children.has(o)||t.children.set(o,uu());const l=t.children.get(o);e=ot(e),rT(l,e,n)}}function Hd(t,e,n){t.value!==null?n(e,t.value):I2(t,(o,l)=>{const a=new tt(e.toString()+"/"+o);Hd(l,a,n)})}function I2(t,e){t.children.forEach((n,o)=>{e(o,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&ln(this.last_,(o,l)=>{n[o]=n[o]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=10*1e3,M2=30*1e3,D2=300*1e3;class U2{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new w2(e);const o=Zv+(M2-Zv)*Math.random();Ql(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),n={};let o=!1;ln(e,(l,a)=>{a>0&&xi(this.statsToReport_,l)&&(n[l]=a,o=!0)}),o&&this.server_.reportStats(n),Ql(this.reportStats_.bind(this),Math.floor(Math.random()*2*D2))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var On;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(On||(On={}));function aT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _h(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,o){this.path=e,this.affectedTree=n,this.revert=o,this.type=On.ACK_USER_WRITE,this.source=aT()}operationForChild(e){if(we(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new tt(e));return new cu(qe(),n,this.revert)}}else return K(Ae(this.path)===e,"operationForChild called for unrelated child."),new cu(ot(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){this.source=e,this.path=n,this.type=On.LISTEN_COMPLETE}operationForChild(e){return we(this.path)?new sr(this.source,qe()):new sr(this.source,ot(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,o){this.source=e,this.path=n,this.snap=o,this.type=On.OVERWRITE}operationForChild(e){return we(this.path)?new Mo(this.source,qe(),this.snap.getImmediateChild(e)):new Mo(this.source,ot(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,o){this.source=e,this.path=n,this.children=o,this.type=On.MERGE}operationForChild(e){if(we(this.path)){const n=this.children.subtree(new tt(e));return n.isEmpty()?null:n.value?new Mo(this.source,qe(),n.value):new lr(this.source,qe(),n)}else return K(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new lr(this.source,ot(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,o){this.node_=e,this.fullyInitialized_=n,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(we(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function L2(t,e,n,o){const l=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(x2(c.childName,c.snapshotNode))}),ql(t,l,"child_removed",e,o,n),ql(t,l,"child_added",e,o,n),ql(t,l,"child_moved",a,o,n),ql(t,l,"child_changed",e,o,n),ql(t,l,"value",e,o,n),l}function ql(t,e,n,o,l,a){const c=o.filter(h=>h.type===n);c.sort((h,g)=>O2(t,h,g)),c.forEach(h=>{const g=P2(t,h,a);l.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(g,t.query_))})})}function P2(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function O2(t,e,n){if(e.childName==null||n.childName==null)throw Gs("Should only compare child_ events.");const o=new xe(e.childName,e.snapshotNode),l=new xe(n.childName,n.snapshotNode);return t.index_.compare(o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t,e){return{eventCache:t,serverCache:e}}function Xl(t,e,n,o){return Ru(new Do(e,n,o),t.serverCache)}function uT(t,e,n,o){return Ru(t.eventCache,new Do(e,n,o))}function Bd(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Uo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd;const H2=()=>(cd||(cd=new on(CD)),cd);class at{static fromObject(e){let n=new at(null);return ln(e,(o,l)=>{n=n.set(new tt(o),l)}),n}constructor(e,n=H2()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:qe(),value:this.value};if(we(e))return null;{const o=Ae(e),l=this.children.get(o);if(l!==null){const a=l.findRootMostMatchingPathAndValue(ot(e),n);return a!=null?{path:Ct(new tt(o),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(we(e))return this;{const n=Ae(e),o=this.children.get(n);return o!==null?o.subtree(ot(e)):new at(null)}}set(e,n){if(we(e))return new at(n,this.children);{const o=Ae(e),a=(this.children.get(o)||new at(null)).set(ot(e),n),c=this.children.insert(o,a);return new at(this.value,c)}}remove(e){if(we(e))return this.children.isEmpty()?new at(null):new at(null,this.children);{const n=Ae(e),o=this.children.get(n);if(o){const l=o.remove(ot(e));let a;return l.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,l),this.value===null&&a.isEmpty()?new at(null):new at(this.value,a)}else return this}}get(e){if(we(e))return this.value;{const n=Ae(e),o=this.children.get(n);return o?o.get(ot(e)):null}}setTree(e,n){if(we(e))return n;{const o=Ae(e),a=(this.children.get(o)||new at(null)).setTree(ot(e),n);let c;return a.isEmpty()?c=this.children.remove(o):c=this.children.insert(o,a),new at(this.value,c)}}fold(e){return this.fold_(qe(),e)}fold_(e,n){const o={};return this.children.inorderTraversal((l,a)=>{o[l]=a.fold_(Ct(e,l),n)}),n(e,this.value,o)}findOnPath(e,n){return this.findOnPath_(e,qe(),n)}findOnPath_(e,n,o){const l=this.value?o(n,this.value):!1;if(l)return l;if(we(e))return null;{const a=Ae(e),c=this.children.get(a);return c?c.findOnPath_(ot(e),Ct(n,a),o):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,qe(),n)}foreachOnPath_(e,n,o){if(we(e))return this;{this.value&&o(n,this.value);const l=Ae(e),a=this.children.get(l);return a?a.foreachOnPath_(ot(e),Ct(n,l),o):new at(null)}}foreach(e){this.foreach_(qe(),e)}foreach_(e,n){this.children.inorderTraversal((o,l)=>{l.foreach_(Ct(e,o),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,o)=>{o.value&&e(n,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.writeTree_=e}static empty(){return new Gn(new at(null))}}function $l(t,e,n){if(we(e))return new Gn(new at(n));{const o=t.writeTree_.findRootMostValueAndPath(e);if(o!=null){const l=o.path;let a=o.value;const c=nn(l,e);return a=a.updateChild(c,n),new Gn(t.writeTree_.set(l,a))}else{const l=new at(n),a=t.writeTree_.setTree(e,l);return new Gn(a)}}}function jv(t,e,n){let o=t;return ln(n,(l,a)=>{o=$l(o,Ct(e,l),a)}),o}function e0(t,e){if(we(e))return Gn.empty();{const n=t.writeTree_.setTree(e,new at(null));return new Gn(n)}}function Gd(t,e){return Lo(t,e)!=null}function Lo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nn(n.path,e)):null}function t0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(dt,(o,l)=>{e.push(new xe(o,l))}):t.writeTree_.children.inorderTraversal((o,l)=>{l.value!=null&&e.push(new xe(o,l.value))}),e}function to(t,e){if(we(e))return t;{const n=Lo(t,e);return n!=null?new Gn(new at(n)):new Gn(t.writeTree_.subtree(e))}}function Vd(t){return t.writeTree_.isEmpty()}function Ps(t,e){return cT(qe(),t.writeTree_,e)}function cT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let o=null;return e.children.inorderTraversal((l,a)=>{l===".priority"?(K(a.value!==null,"Priority writes must always be leaf nodes"),o=a.value):n=cT(Ct(t,l),a,n)}),!n.getChild(t).isEmpty()&&o!==null&&(n=n.updateChild(Ct(t,".priority"),o)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t,e){return pT(e,t)}function B2(t,e,n,o,l){K(o>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:o,visible:l}),l&&(t.visibleWrites=$l(t.visibleWrites,e,n)),t.lastWriteId=o}function G2(t,e){for(let n=0;n<t.allWrites.length;n++){const o=t.allWrites[n];if(o.writeId===e)return o}return null}function V2(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const o=t.allWrites[n];t.allWrites.splice(n,1);let l=o.visible,a=!1,c=t.allWrites.length-1;for(;l&&c>=0;){const h=t.allWrites[c];h.visible&&(c>=n&&F2(h,o.path)?l=!1:Pn(o.path,h.path)&&(a=!0)),c--}if(l){if(a)return q2(t),!0;if(o.snap)t.visibleWrites=e0(t.visibleWrites,o.path);else{const h=o.children;ln(h,g=>{t.visibleWrites=e0(t.visibleWrites,Ct(o.path,g))})}return!0}else return!1}function F2(t,e){if(t.snap)return Pn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Pn(Ct(t.path,n),e))return!0;return!1}function q2(t){t.visibleWrites=fT(t.allWrites,z2,qe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function z2(t){return t.visible}function fT(t,e,n){let o=Gn.empty();for(let l=0;l<t.length;++l){const a=t[l];if(e(a)){const c=a.path;let h;if(a.snap)Pn(n,c)?(h=nn(n,c),o=$l(o,h,a.snap)):Pn(c,n)&&(h=nn(c,n),o=$l(o,qe(),a.snap.getChild(h)));else if(a.children){if(Pn(n,c))h=nn(n,c),o=jv(o,h,a.children);else if(Pn(c,n))if(h=nn(c,n),we(h))o=jv(o,qe(),a.children);else{const g=Us(a.children,Ae(h));if(g){const m=g.getChild(ot(h));o=$l(o,qe(),m)}}}else throw Gs("WriteRecord should have .snap or .children")}}return o}function dT(t,e,n,o,l){if(!o&&!l){const a=Lo(t.visibleWrites,e);if(a!=null)return a;{const c=to(t.visibleWrites,e);if(Vd(c))return n;if(n==null&&!Gd(c,qe()))return null;{const h=n||me.EMPTY_NODE;return Ps(c,h)}}}else{const a=to(t.visibleWrites,e);if(!l&&Vd(a))return n;if(!l&&n==null&&!Gd(a,qe()))return null;{const c=function(m){return(m.visible||l)&&(!o||!~o.indexOf(m.writeId))&&(Pn(m.path,e)||Pn(e,m.path))},h=fT(t.allWrites,c,e),g=n||me.EMPTY_NODE;return Ps(h,g)}}}function Y2(t,e,n){let o=me.EMPTY_NODE;const l=Lo(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(dt,(a,c)=>{o=o.updateImmediateChild(a,c)}),o;if(n){const a=to(t.visibleWrites,e);return n.forEachChild(dt,(c,h)=>{const g=Ps(to(a,new tt(c)),h);o=o.updateImmediateChild(c,g)}),t0(a).forEach(c=>{o=o.updateImmediateChild(c.name,c.node)}),o}else{const a=to(t.visibleWrites,e);return t0(a).forEach(c=>{o=o.updateImmediateChild(c.name,c.node)}),o}}function J2(t,e,n,o,l){K(o||l,"Either existingEventSnap or existingServerSnap must exist");const a=Ct(e,n);if(Gd(t.visibleWrites,a))return null;{const c=to(t.visibleWrites,a);return Vd(c)?l.getChild(n):Ps(c,l.getChild(n))}}function K2(t,e,n,o){const l=Ct(e,n),a=Lo(t.visibleWrites,l);if(a!=null)return a;if(o.isCompleteForChild(n)){const c=to(t.visibleWrites,l);return Ps(c,o.getNode().getImmediateChild(n))}else return null}function Q2(t,e){return Lo(t.visibleWrites,e)}function X2(t,e,n,o,l,a,c){let h;const g=to(t.visibleWrites,e),m=Lo(g,qe());if(m!=null)h=m;else if(n!=null)h=Ps(g,n);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const _=[],v=c.getCompare(),E=a?h.getReverseIteratorFrom(o,c):h.getIteratorFrom(o,c);let A=E.getNext();for(;A&&_.length<l;)v(A,o)!==0&&_.push(A),A=E.getNext();return _}else return[]}function $2(){return{visibleWrites:Gn.empty(),allWrites:[],lastWriteId:-1}}function fu(t,e,n,o){return dT(t.writeTree,t.treePath,e,n,o)}function Eh(t,e){return Y2(t.writeTree,t.treePath,e)}function n0(t,e,n,o){return J2(t.writeTree,t.treePath,e,n,o)}function du(t,e){return Q2(t.writeTree,Ct(t.treePath,e))}function W2(t,e,n,o,l,a){return X2(t.writeTree,t.treePath,e,n,o,l,a)}function Th(t,e,n){return K2(t.writeTree,t.treePath,e,n)}function hT(t,e){return pT(Ct(t.treePath,e),t.writeTree)}function pT(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,o=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(o!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(o);if(l){const a=l.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(o,ir(o,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(o);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(o,nr(o,l.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(o,Ls(o,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(o,ir(o,e.snapshotNode,l.oldSnap));else throw Gs("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{getCompleteChild(e){return null}getChildAfterChild(e,n,o){return null}}const mT=new j2;class Sh{constructor(e,n,o=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=o}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const o=this.optCompleteServerCache_!=null?new Do(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Th(this.writes_,e,o)}}getChildAfterChild(e,n,o){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Uo(this.viewCache_),a=W2(this.writes_,l,n,1,o,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){return{filter:t}}function t3(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function n3(t,e,n,o,l){const a=new Z2;let c,h;if(n.type===On.OVERWRITE){const m=n;m.source.fromUser?c=Fd(t,e,m.path,m.snap,o,l,a):(K(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!we(m.path),c=hu(t,e,m.path,m.snap,o,l,h,a))}else if(n.type===On.MERGE){const m=n;m.source.fromUser?c=o3(t,e,m.path,m.children,o,l,a):(K(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),c=qd(t,e,m.path,m.children,o,l,h,a))}else if(n.type===On.ACK_USER_WRITE){const m=n;m.revert?c=r3(t,e,m.path,o,l,a):c=s3(t,e,m.path,m.affectedTree,o,l,a)}else if(n.type===On.LISTEN_COMPLETE)c=l3(t,e,n.path,o,a);else throw Gs("Unknown operation type: "+n.type);const g=a.getChanges();return i3(e,c,g),{viewCache:c,changes:g}}function i3(t,e,n){const o=e.eventCache;if(o.isFullyInitialized()){const l=o.getNode().isLeafNode()||o.getNode().isEmpty(),a=Bd(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!o.getNode().equals(a)||!o.getNode().getPriority().equals(a.getPriority()))&&n.push(lT(Bd(e)))}}function gT(t,e,n,o,l,a){const c=e.eventCache;if(du(o,n)!=null)return e;{let h,g;if(we(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Uo(e),_=m instanceof me?m:me.EMPTY_NODE,v=Eh(o,_);h=t.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const m=fu(o,Uo(e));h=t.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const m=Ae(n);if(m===".priority"){K(no(n)===1,"Can't have a priority with additional path components");const _=c.getNode();g=e.serverCache.getNode();const v=n0(o,n,_,g);v!=null?h=t.filter.updatePriority(_,v):h=c.getNode()}else{const _=ot(n);let v;if(c.isCompleteForChild(m)){g=e.serverCache.getNode();const E=n0(o,n,c.getNode(),g);E!=null?v=c.getNode().getImmediateChild(m).updateChild(_,E):v=c.getNode().getImmediateChild(m)}else v=Th(o,m,e.serverCache);v!=null?h=t.filter.updateChild(c.getNode(),m,v,_,l,a):h=c.getNode()}}return Xl(e,h,c.isFullyInitialized()||we(n),t.filter.filtersNodes())}}function hu(t,e,n,o,l,a,c,h){const g=e.serverCache;let m;const _=c?t.filter:t.filter.getIndexedFilter();if(we(n))m=_.updateFullNode(g.getNode(),o,null);else if(_.filtersNodes()&&!g.isFiltered()){const A=g.getNode().updateChild(n,o);m=_.updateFullNode(g.getNode(),A,null)}else{const A=Ae(n);if(!g.isCompleteForPath(n)&&no(n)>1)return e;const b=ot(n),M=g.getNode().getImmediateChild(A).updateChild(b,o);A===".priority"?m=_.updatePriority(g.getNode(),M):m=_.updateChild(g.getNode(),A,M,b,mT,null)}const v=uT(e,m,g.isFullyInitialized()||we(n),_.filtersNodes()),E=new Sh(l,v,a);return gT(t,v,n,l,E,h)}function Fd(t,e,n,o,l,a,c){const h=e.eventCache;let g,m;const _=new Sh(l,e,a);if(we(n))m=t.filter.updateFullNode(e.eventCache.getNode(),o,c),g=Xl(e,m,!0,t.filter.filtersNodes());else{const v=Ae(n);if(v===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),o),g=Xl(e,m,h.isFullyInitialized(),h.isFiltered());else{const E=ot(n),A=h.getNode().getImmediateChild(v);let b;if(we(E))b=o;else{const k=_.getCompleteChild(v);k!=null?WE(E)===".priority"&&k.getChild(jE(E)).isEmpty()?b=k:b=k.updateChild(E,o):b=me.EMPTY_NODE}if(A.equals(b))g=e;else{const k=t.filter.updateChild(h.getNode(),v,b,E,_,c);g=Xl(e,k,h.isFullyInitialized(),t.filter.filtersNodes())}}}return g}function i0(t,e){return t.eventCache.isCompleteForChild(e)}function o3(t,e,n,o,l,a,c){let h=e;return o.foreach((g,m)=>{const _=Ct(n,g);i0(e,Ae(_))&&(h=Fd(t,h,_,m,l,a,c))}),o.foreach((g,m)=>{const _=Ct(n,g);i0(e,Ae(_))||(h=Fd(t,h,_,m,l,a,c))}),h}function o0(t,e,n){return n.foreach((o,l)=>{e=e.updateChild(o,l)}),e}function qd(t,e,n,o,l,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,m;we(n)?m=o:m=new at(null).setTree(n,o);const _=e.serverCache.getNode();return m.children.inorderTraversal((v,E)=>{if(_.hasChild(v)){const A=e.serverCache.getNode().getImmediateChild(v),b=o0(t,A,E);g=hu(t,g,new tt(v),b,l,a,c,h)}}),m.children.inorderTraversal((v,E)=>{const A=!e.serverCache.isCompleteForChild(v)&&E.value===null;if(!_.hasChild(v)&&!A){const b=e.serverCache.getNode().getImmediateChild(v),k=o0(t,b,E);g=hu(t,g,new tt(v),k,l,a,c,h)}}),g}function s3(t,e,n,o,l,a,c){if(du(l,n)!=null)return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(o.value!=null){if(we(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return hu(t,e,n,g.getNode().getChild(n),l,a,h,c);if(we(n)){let m=new at(null);return g.getNode().forEachChild(Ms,(_,v)=>{m=m.set(new tt(_),v)}),qd(t,e,n,m,l,a,h,c)}else return e}else{let m=new at(null);return o.foreach((_,v)=>{const E=Ct(n,_);g.isCompleteForPath(E)&&(m=m.set(_,g.getNode().getChild(E)))}),qd(t,e,n,m,l,a,h,c)}}function l3(t,e,n,o,l){const a=e.serverCache,c=uT(e,a.getNode(),a.isFullyInitialized()||we(n),a.isFiltered());return gT(t,c,n,o,mT,l)}function r3(t,e,n,o,l,a){let c;if(du(o,n)!=null)return e;{const h=new Sh(o,e,l),g=e.eventCache.getNode();let m;if(we(n)||Ae(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=fu(o,Uo(e));else{const v=e.serverCache.getNode();K(v instanceof me,"serverChildren would be complete if leaf node"),_=Eh(o,v)}_=_,m=t.filter.updateFullNode(g,_,a)}else{const _=Ae(n);let v=Th(o,_,e.serverCache);v==null&&e.serverCache.isCompleteForChild(_)&&(v=g.getImmediateChild(_)),v!=null?m=t.filter.updateChild(g,_,v,ot(n),h,a):e.eventCache.getNode().hasChild(_)?m=t.filter.updateChild(g,_,me.EMPTY_NODE,ot(n),h,a):m=g,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=fu(o,Uo(e)),c.isLeafNode()&&(m=t.filter.updateFullNode(m,c,a)))}return c=e.serverCache.isFullyInitialized()||du(o,qe())!=null,Xl(e,m,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const o=this.query_._queryParams,l=new mh(o.getIndex()),a=b2(o);this.processor_=e3(a);const c=n.serverCache,h=n.eventCache,g=l.updateFullNode(me.EMPTY_NODE,c.getNode(),null),m=a.updateFullNode(me.EMPTY_NODE,h.getNode(),null),_=new Do(g,c.isFullyInitialized(),l.filtersNodes()),v=new Do(m,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Ru(v,_),this.eventGenerator_=new k2(this.query_)}get query(){return this.query_}}function u3(t){return t.viewCache_.serverCache.getNode()}function c3(t,e){const n=Uo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!we(e)&&!n.getImmediateChild(Ae(e)).isEmpty())?n.getChild(e):null}function s0(t){return t.eventRegistrations_.length===0}function f3(t,e){t.eventRegistrations_.push(e)}function l0(t,e,n){const o=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const l=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,l);c&&o.push(c)})}if(e){let l=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))l.push(c);else if(e.hasAnyCallback()){l=l.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=l}else t.eventRegistrations_=[];return o}function r0(t,e,n,o){e.type===On.MERGE&&e.source.queryId!==null&&(K(Uo(t.viewCache_),"We should always have a full cache before handling merges"),K(Bd(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,a=n3(t.processor_,l,e,n,o);return t3(t.processor_,a.viewCache),K(a.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,yT(t,a.changes,a.viewCache.eventCache.getNode(),null)}function d3(t,e){const n=t.viewCache_.eventCache,o=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(dt,(a,c)=>{o.push(Ls(a,c))}),n.isFullyInitialized()&&o.push(lT(n.getNode())),yT(t,o,n.getNode(),e)}function yT(t,e,n,o){const l=o?[o]:t.eventRegistrations_;return L2(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu;class h3{constructor(){this.views=new Map}}function p3(t){K(!pu,"__referenceConstructor has already been defined"),pu=t}function m3(){return K(pu,"Reference.ts has not been loaded"),pu}function g3(t){return t.views.size===0}function Ch(t,e,n,o){const l=e.source.queryId;if(l!==null){const a=t.views.get(l);return K(a!=null,"SyncTree gave us an op for an invalid query."),r0(a,e,n,o)}else{let a=[];for(const c of t.views.values())a=a.concat(r0(c,e,n,o));return a}}function y3(t,e,n,o,l){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let h=fu(n,l?o:null),g=!1;h?g=!0:o instanceof me?(h=Eh(n,o),g=!1):(h=me.EMPTY_NODE,g=!1);const m=Ru(new Do(h,g,!1),new Do(o,l,!1));return new a3(e,m)}return c}function _3(t,e,n,o,l,a){const c=y3(t,e,o,l,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),f3(c,n),d3(c,n)}function v3(t,e,n,o){const l=e._queryIdentifier,a=[];let c=[];const h=io(t);if(l==="default")for(const[g,m]of t.views.entries())c=c.concat(l0(m,n,o)),s0(m)&&(t.views.delete(g),m.query._queryParams.loadsAllData()||a.push(m.query));else{const g=t.views.get(l);g&&(c=c.concat(l0(g,n,o)),s0(g)&&(t.views.delete(l),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!io(t)&&a.push(new(m3())(e._repo,e._path)),{removed:a,events:c}}function _T(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ds(t,e){let n=null;for(const o of t.views.values())n=n||c3(o,e);return n}function vT(t,e){if(e._queryParams.loadsAllData())return Iu(t);{const o=e._queryIdentifier;return t.views.get(o)}}function ET(t,e){return vT(t,e)!=null}function io(t){return Iu(t)!=null}function Iu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu;function E3(t){K(!mu,"__referenceConstructor has already been defined"),mu=t}function T3(){return K(mu,"Reference.ts has not been loaded"),mu}let S3=1;class a0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new at(null),this.pendingWriteTree_=$2(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TT(t,e,n,o,l){return B2(t.pendingWriteTree_,e,n,o,l),l?dr(t,new Mo(aT(),e,n)):[]}function Io(t,e,n=!1){const o=G2(t.pendingWriteTree_,e);if(V2(t.pendingWriteTree_,e)){let a=new at(null);return o.snap!=null?a=a.set(qe(),!0):ln(o.children,c=>{a=a.set(new tt(c),!0)}),dr(t,new cu(o.path,a,n))}else return[]}function wu(t,e,n){return dr(t,new Mo(yh(),e,n))}function C3(t,e,n){const o=at.fromObject(n);return dr(t,new lr(yh(),e,o))}function A3(t,e){return dr(t,new sr(yh(),e))}function x3(t,e,n){const o=xh(t,n);if(o){const l=Nh(o),a=l.path,c=l.queryId,h=nn(a,e),g=new sr(_h(c),h);return bh(t,a,g)}else return[]}function zd(t,e,n,o,l=!1){const a=e._path,c=t.syncPointTree_.get(a);let h=[];if(c&&(e._queryIdentifier==="default"||ET(c,e))){const g=v3(c,e,n,o);g3(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const m=g.removed;if(h=g.events,!l){const _=m.findIndex(E=>E._queryParams.loadsAllData())!==-1,v=t.syncPointTree_.findOnPath(a,(E,A)=>io(A));if(_&&!v){const E=t.syncPointTree_.subtree(a);if(!E.isEmpty()){const A=R3(E);for(let b=0;b<A.length;++b){const k=A[b],M=k.query,q=AT(t,k);t.listenProvider_.startListening(Wl(M),gu(t,M),q.hashFn,q.onComplete)}}}!v&&m.length>0&&!o&&(_?t.listenProvider_.stopListening(Wl(e),null):m.forEach(E=>{const A=t.queryToTagMap.get(Mu(E));t.listenProvider_.stopListening(Wl(E),A)}))}I3(t,m)}return h}function N3(t,e,n,o){const l=xh(t,o);if(l!=null){const a=Nh(l),c=a.path,h=a.queryId,g=nn(c,e),m=new Mo(_h(h),g,n);return bh(t,c,m)}else return[]}function b3(t,e,n,o){const l=xh(t,o);if(l){const a=Nh(l),c=a.path,h=a.queryId,g=nn(c,e),m=at.fromObject(n),_=new lr(_h(h),g,m);return bh(t,c,_)}else return[]}function u0(t,e,n,o=!1){const l=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(l,(E,A)=>{const b=nn(E,l);a=a||Ds(A,b),c=c||io(A)});let h=t.syncPointTree_.get(l);h?(c=c||io(h),a=a||Ds(h,qe())):(h=new h3,t.syncPointTree_=t.syncPointTree_.set(l,h));let g;a!=null?g=!0:(g=!1,a=me.EMPTY_NODE,t.syncPointTree_.subtree(l).foreachChild((A,b)=>{const k=Ds(b,qe());k&&(a=a.updateImmediateChild(A,k))}));const m=ET(h,e);if(!m&&!e._queryParams.loadsAllData()){const E=Mu(e);K(!t.queryToTagMap.has(E),"View does not exist, but we have a tag");const A=w3();t.queryToTagMap.set(E,A),t.tagToQueryMap.set(A,E)}const _=vh(t.pendingWriteTree_,l);let v=_3(h,e,n,_,a,g);if(!m&&!c&&!o){const E=vT(h,e);v=v.concat(M3(t,e,E))}return v}function Ah(t,e,n){const l=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,h)=>{const g=nn(c,e),m=Ds(h,g);if(m)return m});return dT(l,e,a,n,!0)}function dr(t,e){return ST(e,t.syncPointTree_,null,vh(t.pendingWriteTree_,qe()))}function ST(t,e,n,o){if(we(t.path))return CT(t,e,n,o);{const l=e.get(qe());n==null&&l!=null&&(n=Ds(l,qe()));let a=[];const c=Ae(t.path),h=t.operationForChild(c),g=e.children.get(c);if(g&&h){const m=n?n.getImmediateChild(c):null,_=hT(o,c);a=a.concat(ST(h,g,m,_))}return l&&(a=a.concat(Ch(l,t,o,n))),a}}function CT(t,e,n,o){const l=e.get(qe());n==null&&l!=null&&(n=Ds(l,qe()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=n?n.getImmediateChild(c):null,m=hT(o,c),_=t.operationForChild(c);_&&(a=a.concat(CT(_,h,g,m)))}),l&&(a=a.concat(Ch(l,t,o,n))),a}function AT(t,e){const n=e.query,o=gu(t,n);return{hashFn:()=>(u3(e)||me.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return o?x3(t,n._path,o):A3(t,n._path);{const a=ND(l,n);return zd(t,n,null,a)}}}}function gu(t,e){const n=Mu(e);return t.queryToTagMap.get(n)}function Mu(t){return t._path.toString()+"$"+t._queryIdentifier}function xh(t,e){return t.tagToQueryMap.get(e)}function Nh(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new tt(t.substr(0,e))}}function bh(t,e,n){const o=t.syncPointTree_.get(e);K(o,"Missing sync point for query tag that we're tracking");const l=vh(t.pendingWriteTree_,e);return Ch(o,n,l,null)}function R3(t){return t.fold((e,n,o)=>{if(n&&io(n))return[Iu(n)];{let l=[];return n&&(l=_T(n)),ln(o,(a,c)=>{l=l.concat(c)}),l}})}function Wl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(T3())(t._repo,t._path):t}function I3(t,e){for(let n=0;n<e.length;++n){const o=e[n];if(!o._queryParams.loadsAllData()){const l=Mu(o),a=t.queryToTagMap.get(l);t.queryToTagMap.delete(l),t.tagToQueryMap.delete(a)}}}function w3(){return S3++}function M3(t,e,n){const o=e._path,l=gu(t,e),a=AT(t,n),c=t.listenProvider_.startListening(Wl(e),l,a.hashFn,a.onComplete),h=t.syncPointTree_.subtree(o);if(l)K(!io(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((m,_,v)=>{if(!we(m)&&_&&io(_))return[Iu(_).query];{let E=[];return _&&(E=E.concat(_T(_).map(A=>A.query))),ln(v,(A,b)=>{E=E.concat(b)}),E}});for(let m=0;m<g.length;++m){const _=g[m];t.listenProvider_.stopListening(Wl(_),gu(t,_))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Rh(n)}node(){return this.node_}}class Ih{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ct(this.path_,e);return new Ih(this.syncTree_,n)}node(){return Ah(this.syncTree_,this.path_)}}const D3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},c0=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return U3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return k3(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},U3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},k3=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const o=t.increment;typeof o!="number"&&K(!1,"Unexpected increment value: "+o);const l=e.node();if(K(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return o;const c=l.getValue();return typeof c!="number"?o:c+o},L3=function(t,e,n,o){return wh(e,new Ih(n,t),o)},xT=function(t,e,n){return wh(t,new Rh(e),n)};function wh(t,e,n){const o=t.getPriority().val(),l=c0(o,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,h=c0(c.getValue(),e,n);return h!==c.getValue()||l!==c.getPriority().val()?new xt(h,Ot(l)):t}else{const c=t;return a=c,l!==c.getPriority().val()&&(a=a.updatePriority(new xt(l))),c.forEachChild(dt,(h,g)=>{const m=wh(g,e.getImmediateChild(h),n);m!==g&&(a=a.updateImmediateChild(h,m))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e="",n=null,o={children:{},childCount:0}){this.name=e,this.parent=n,this.node=o}}function Dh(t,e){let n=e instanceof tt?e:new tt(e),o=t,l=Ae(n);for(;l!==null;){const a=Us(o.node.children,l)||{children:{},childCount:0};o=new Mh(l,o,a),n=ot(n),l=Ae(n)}return o}function zs(t){return t.node.value}function NT(t,e){t.node.value=e,Yd(t)}function bT(t){return t.node.childCount>0}function P3(t){return zs(t)===void 0&&!bT(t)}function Du(t,e){ln(t.node.children,(n,o)=>{e(new Mh(n,t,o))})}function RT(t,e,n,o){n&&e(t),Du(t,l=>{RT(l,e,!0)})}function O3(t,e,n){let o=t.parent;for(;o!==null;){if(e(o))return!0;o=o.parent}return!1}function hr(t){return new tt(t.parent===null?t.name:hr(t.parent)+"/"+t.name)}function Yd(t){t.parent!==null&&H3(t.parent,t.name,t)}function H3(t,e,n){const o=P3(n),l=xi(t.node.children,e);o&&l?(delete t.node.children[e],t.node.childCount--,Yd(t)):!o&&!l&&(t.node.children[e]=n.node,t.node.childCount++,Yd(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=/[\[\].#$\/\u0000-\u001F\u007F]/,G3=/[\[\].#$\u0000-\u001F\u007F]/,fd=10*1024*1024,IT=function(t){return typeof t=="string"&&t.length!==0&&!B3.test(t)},wT=function(t){return typeof t=="string"&&t.length!==0&&!G3.test(t)},V3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wT(t)},MT=function(t,e,n,o){o&&e===void 0||Uh(lh(t,"value"),e,n)},Uh=function(t,e,n){const o=n instanceof tt?new s2(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+bo(o));if(typeof e=="function")throw new Error(t+"contains a function "+bo(o)+" with contents = "+e.toString());if(wE(e))throw new Error(t+"contains "+e.toString()+" "+bo(o));if(typeof e=="string"&&e.length>fd/3&&Nu(e)>fd)throw new Error(t+"contains a string greater than "+fd+" utf8 bytes "+bo(o)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,a=!1;if(ln(e,(c,h)=>{if(c===".value")l=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!IT(c)))throw new Error(t+" contains an invalid key ("+c+") "+bo(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);l2(o,c),Uh(t,h,o),r2(o)}),l&&a)throw new Error(t+' contains ".value" child '+bo(o)+" in addition to actual children.")}},DT=function(t,e,n,o){if(!wT(n))throw new Error(lh(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},F3=function(t,e,n,o){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),DT(t,e,n)},kh=function(t,e){if(Ae(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},q3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!IT(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!V3(n))throw new Error(lh(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lh(t,e){let n=null;for(let o=0;o<e.length;o++){const l=e[o],a=l.getPath();n!==null&&!dh(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(l)}n&&t.eventLists_.push(n)}function UT(t,e,n){Lh(t,n),kT(t,o=>dh(o,e))}function Si(t,e,n){Lh(t,n),kT(t,o=>Pn(o,e)||Pn(e,o))}function kT(t,e){t.recursionDepth_++;let n=!0;for(let o=0;o<t.eventLists_.length;o++){const l=t.eventLists_[o];if(l){const a=l.path;e(a)?(Y3(t.eventLists_[o]),t.eventLists_[o]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Y3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const o=n.getEventRunner();Kl&&Bt("event: "+n.toString()),qs(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="repo_interrupt",K3=25;class Q3{constructor(e,n,o,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=o,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new z3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uu(),this.transactionQueueTree_=new Mh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X3(t,e,n){if(t.stats_=ch(t.repoInfo_),t.forceRestClient_||wD())t.server_=new au(t.repoInfo_,(o,l,a,c)=>{f0(t,o,l,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>d0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt(n)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}t.persistentConnection_=new _i(t.repoInfo_,e,(o,l,a,c)=>{f0(t,o,l,a,c)},o=>{d0(t,o)},o=>{$3(t,o)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(o=>{t.server_.refreshAuthToken(o)}),t.appCheckProvider_.addTokenChangeListener(o=>{t.server_.refreshAppCheckToken(o.token)}),t.statsReporter_=LD(t.repoInfo_,()=>new U2(t.stats_,t.server_)),t.infoData_=new R2,t.infoSyncTree_=new a0({startListening:(o,l,a,c)=>{let h=[];const g=t.infoData_.getNode(o._path);return g.isEmpty()||(h=wu(t.infoSyncTree_,o._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Oh(t,"connected",!1),t.serverSyncTree_=new a0({startListening:(o,l,a,c)=>(t.server_.listen(o,a,l,(h,g)=>{const m=c(h,g);Si(t.eventQueue_,o._path,m)}),[]),stopListening:(o,l)=>{t.server_.unlisten(o,l)}})}function LT(t){const n=t.infoData_.getNode(new tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ph(t){return D3({timestamp:LT(t)})}function f0(t,e,n,o,l){t.dataUpdateCount++;const a=new tt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(l)if(o){const g=tu(n,m=>Ot(m));c=b3(t.serverSyncTree_,a,g,l)}else{const g=Ot(n);c=N3(t.serverSyncTree_,a,g,l)}else if(o){const g=tu(n,m=>Ot(m));c=C3(t.serverSyncTree_,a,g)}else{const g=Ot(n);c=wu(t.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=Uu(t,a)),Si(t.eventQueue_,h,c)}function d0(t,e){Oh(t,"connected",e),e===!1&&Z3(t)}function $3(t,e){ln(e,(n,o)=>{Oh(t,n,o)})}function Oh(t,e,n){const o=new tt("/.info/"+e),l=Ot(n);t.infoData_.updateSnapshot(o,l);const a=wu(t.infoSyncTree_,o,l);Si(t.eventQueue_,o,a)}function PT(t){return t.nextWriteId_++}function W3(t,e,n,o,l){Hh(t,"set",{path:e.toString(),value:n,priority:o});const a=Ph(t),c=Ot(n,o),h=Ah(t.serverSyncTree_,e),g=xT(c,h,a),m=PT(t),_=TT(t.serverSyncTree_,e,g,m,!0);Lh(t.eventQueue_,_),t.server_.put(e.toString(),c.val(!0),(E,A)=>{const b=E==="ok";b||sn("set at "+e+" failed: "+E);const k=Io(t.serverSyncTree_,m,!b);Si(t.eventQueue_,e,k),nU(t,l,E,A)});const v=VT(t,e);Uu(t,v),Si(t.eventQueue_,v,[])}function Z3(t){Hh(t,"onDisconnectEvents");const e=Ph(t),n=uu();Hd(t.onDisconnect_,qe(),(l,a)=>{const c=L3(l,a,t.serverSyncTree_,e);rT(n,l,c)});let o=[];Hd(n,qe(),(l,a)=>{o=o.concat(wu(t.serverSyncTree_,l,a));const c=VT(t,l);Uu(t,c)}),t.onDisconnect_=uu(),Si(t.eventQueue_,qe(),o)}function j3(t,e,n){let o;Ae(e._path)===".info"?o=u0(t.infoSyncTree_,e,n):o=u0(t.serverSyncTree_,e,n),UT(t.eventQueue_,e._path,o)}function eU(t,e,n){let o;Ae(e._path)===".info"?o=zd(t.infoSyncTree_,e,n):o=zd(t.serverSyncTree_,e,n),UT(t.eventQueue_,e._path,o)}function tU(t){t.persistentConnection_&&t.persistentConnection_.interrupt(J3)}function Hh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Bt(n,...e)}function nU(t,e,n,o){e&&qs(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let a=l;o&&(a+=": "+o);const c=new Error(a);c.code=l,e(c)}})}function OT(t,e,n){return Ah(t.serverSyncTree_,e,n)||me.EMPTY_NODE}function Bh(t,e=t.transactionQueueTree_){if(e||ku(t,e),zs(e)){const n=BT(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&iU(t,hr(e),n)}else bT(e)&&Du(e,n=>{Bh(t,n)})}function iU(t,e,n){const o=n.map(m=>m.currentWriteId),l=OT(t,e,o);let a=l;const c=l.hash();for(let m=0;m<n.length;m++){const _=n[m];K(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const v=nn(e,_.path);a=a.updateChild(v,_.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;t.server_.put(g.toString(),h,m=>{Hh(t,"transaction put response",{path:g.toString(),status:m});let _=[];if(m==="ok"){const v=[];for(let E=0;E<n.length;E++)n[E].status=2,_=_.concat(Io(t.serverSyncTree_,n[E].currentWriteId)),n[E].onComplete&&v.push(()=>n[E].onComplete(null,!0,n[E].currentOutputSnapshotResolved)),n[E].unwatcher();ku(t,Dh(t.transactionQueueTree_,e)),Bh(t,t.transactionQueueTree_),Si(t.eventQueue_,e,_);for(let E=0;E<v.length;E++)qs(v[E])}else{if(m==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{sn("transaction at "+g.toString()+" failed: "+m);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=m}Uu(t,e)}},c)}function Uu(t,e){const n=HT(t,e),o=hr(n),l=BT(t,n);return oU(t,l,o),o}function oU(t,e,n){if(e.length===0)return;const o=[];let l=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],m=nn(n,g.path);let _=!1,v;if(K(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)_=!0,v=g.abortReason,l=l.concat(Io(t.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=K3)_=!0,v="maxretry",l=l.concat(Io(t.serverSyncTree_,g.currentWriteId,!0));else{const E=OT(t,g.path,c);g.currentInputSnapshot=E;const A=e[h].update(E.val());if(A!==void 0){Uh("transaction failed: Data returned ",A,g.path);let b=Ot(A);typeof A=="object"&&A!=null&&xi(A,".priority")||(b=b.updatePriority(E.getPriority()));const M=g.currentWriteId,q=Ph(t),Q=xT(b,E,q);g.currentOutputSnapshotRaw=b,g.currentOutputSnapshotResolved=Q,g.currentWriteId=PT(t),c.splice(c.indexOf(M),1),l=l.concat(TT(t.serverSyncTree_,g.path,Q,g.currentWriteId,g.applyLocally)),l=l.concat(Io(t.serverSyncTree_,M,!0))}else _=!0,v="nodata",l=l.concat(Io(t.serverSyncTree_,g.currentWriteId,!0))}Si(t.eventQueue_,n,l),l=[],_&&(e[h].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?o.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):o.push(()=>e[h].onComplete(new Error(v),!1,null))))}ku(t,t.transactionQueueTree_);for(let h=0;h<o.length;h++)qs(o[h]);Bh(t,t.transactionQueueTree_)}function HT(t,e){let n,o=t.transactionQueueTree_;for(n=Ae(e);n!==null&&zs(o)===void 0;)o=Dh(o,n),e=ot(e),n=Ae(e);return o}function BT(t,e){const n=[];return GT(t,e,n),n.sort((o,l)=>o.order-l.order),n}function GT(t,e,n){const o=zs(e);if(o)for(let l=0;l<o.length;l++)n.push(o[l]);Du(e,l=>{GT(t,l,n)})}function ku(t,e){const n=zs(e);if(n){let o=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[o]=n[l],o++);n.length=o,NT(e,n.length>0?n:void 0)}Du(e,o=>{ku(t,o)})}function VT(t,e){const n=hr(HT(t,e)),o=Dh(t.transactionQueueTree_,e);return O3(o,l=>{dd(t,l)}),dd(t,o),RT(o,l=>{dd(t,l)}),n}function dd(t,e){const n=zs(e);if(n){const o=[];let l=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(K(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(K(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),l=l.concat(Io(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&o.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?NT(e,void 0):n.length=a+1,Si(t.eventQueue_,hr(e),l);for(let c=0;c<o.length;c++)qs(o[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){let e="";const n=t.split("/");for(let o=0;o<n.length;o++)if(n[o].length>0){let l=n[o];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function lU(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const o=n.split("=");o.length===2?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):sn(`Invalid query segment '${n}' in query '${t}'`)}return e}const h0=function(t,e){const n=rU(t),o=n.namespace;n.domain==="firebase.com"&&Ti(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&n.domain!=="localhost"&&Ti("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||TD();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new FE(n.host,n.secure,o,l,e,"",o!==n.subdomain),path:new tt(n.pathString)}},rU=function(t){let e="",n="",o="",l="",a="",c=!0,h="https",g=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(h=t.substring(0,m-1),t=t.substring(m+2));let _=t.indexOf("/");_===-1&&(_=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(_,v)),_<v&&(l=sU(t.substring(_,v)));const E=lU(t.substring(Math.min(t.length,v)));m=e.indexOf(":"),m>=0?(c=h==="https"||h==="wss",g=parseInt(e.substring(m+1),10)):m=e.length;const A=e.slice(0,m);if(A.toLowerCase()==="localhost")n="localhost";else if(A.split(".").length<=2)n=A;else{const b=e.indexOf(".");o=e.substring(0,b).toLowerCase(),n=e.substring(b+1),a=o}"ns"in E&&(a=E.ns)}return{host:e,port:g,domain:n,subdomain:o,secure:c,scheme:h,pathString:l,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aU=(function(){let t=0;const e=[];return function(n){const o=n===t;t=n;let l;const a=new Array(8);for(l=7;l>=0;l--)a[l]=p0.charAt(n%64),n=Math.floor(n/64);K(n===0,"Cannot push at time == 0");let c=a.join("");if(o){for(l=11;l>=0&&e[l]===63;l--)e[l]=0;e[l]++}else for(l=0;l<12;l++)e[l]=Math.floor(Math.random()*64);for(l=0;l<12;l++)c+=p0.charAt(e[l]);return K(c.length===20,"nextPushId: Length should be 20."),c}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,o,l){this.eventType=e,this.eventRegistration=n,this.snapshot=o,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bt(this.snapshot.exportVal())}}class cU{constructor(e,n,o){this.eventRegistration=e,this.error=n,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,o,l){this._repo=e,this._path=n,this._queryParams=o,this._orderByCalled=l}get key(){return we(this._path)?null:WE(this._path)}get ref(){return new so(this._repo,this._path)}get _queryIdentifier(){const e=Wv(this._queryParams),n=ah(e);return n==="{}"?"default":n}get _queryObject(){return Wv(this._queryParams)}isEqual(e){if(e=Vs(e),!(e instanceof Gh))return!1;const n=this._repo===e._repo,o=dh(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&o&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+o2(this._path)}}class so extends Gh{constructor(e,n){super(e,n,new gh,!1)}get parent(){const e=jE(this._path);return e===null?null:new so(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class yu{constructor(e,n,o){this._node=e,this.ref=n,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new tt(e),o=rr(this.ref,e);return new yu(this._node.getChild(n),o,dt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,l)=>e(new yu(l,rr(this.ref,o),dt)))}hasChild(e){const n=new tt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vh(t,e){return t=Vs(t),t._checkNotDeleted("ref"),e!==void 0?rr(t._root,e):t._root}function rr(t,e){return t=Vs(t),Ae(t._path)===null?F3("child","path",e):DT("child","path",e),new so(t._repo,Ct(t._path,e))}function dU(t,e){t=Vs(t),kh("push",t._path),MT("push",e,t._path,!0);const n=LT(t._repo),o=aU(n),l=rr(t,o),a=rr(t,o);let c;return c=Promise.resolve(a),l.then=c.then.bind(c),l.catch=c.then.bind(c,void 0),l}function hU(t){return kh("remove",t._path),Fh(t,null)}function Fh(t,e){t=Vs(t),kh("set",t._path),MT("set",e,t._path,!1);const n=new xu;return W3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class qh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const o=n._queryParams.getIndex();return new uU("value",this,new yu(e.snapshotNode,new so(n._repo,n._path),o))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new cU(this,e,n):null}matches(e){return e instanceof qh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function pU(t,e,n,o,l){const a=new fU(n,void 0),c=new qh(a);return j3(t._repo,t,c),()=>eU(t._repo,t,c)}function mU(t,e,n,o){return pU(t,"value",e)}p3(so);E3(so);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU="FIREBASE_DATABASE_EMULATOR_HOST",Jd={};let yU=!1;function _U(t,e,n,o){const l=e.lastIndexOf(":"),a=e.substring(0,l),c=sh(a);t.repoInfo_=new FE(e,c,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),o&&(t.authTokenProvider_=o)}function vU(t,e,n,o,l){let a=o||t.options.databaseURL;a===void 0&&(t.options.projectId||Ti("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bt("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=h0(a,l),h=c.repoInfo,g;typeof process<"u"&&Uv&&(g=Uv[gU]),g?(a=`http://${g}?ns=${h.namespace}`,c=h0(a,l),h=c.repoInfo):c.repoInfo.secure;const m=new DD(t.name,t.options,e);q3("Invalid Firebase Database URL",c),we(c.path)||Ti("Database URL must point to the root of a Firebase Database (not including a child path).");const _=TU(h,t,m,new MD(t,n));return new SU(_,t)}function EU(t,e){const n=Jd[e];(!n||n[t.key]!==t)&&Ti(`Database ${e}(${t.repoInfo_}) has already been deleted.`),tU(t),delete n[t.key]}function TU(t,e,n,o){let l=Jd[e.name];l||(l={},Jd[e.name]=l);let a=l[t.toURLString()];return a&&Ti("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Q3(t,yU,n,o),l[t.toURLString()]=a,a}class SU{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(X3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new so(this._repo,qe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(EU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ti("Cannot call "+e+" on a deleted database.")}}function CU(t=nD(),e){const n=WM(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const o=Pw("database");o&&AU(n,...o)}return n}function AU(t,e,n,o={}){t=Vs(t),t._checkNotDeleted("useEmulator");const l=`${e}:${n}`,a=t._repoInternal;if(t._instanceStarted){if(l===t._repoInternal.repoInfo_.host&&nu(o,a.repoInfo_.emulatorOptions))return;Ti("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&Ti('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Ka(Ka.OWNER);else if(o.mockUserToken){const h=typeof o.mockUserToken=="string"?o.mockUserToken:Hw(o.mockUserToken,t.app.options.projectId);c=new Ka(h)}sh(e)&&(Ow(e),Vw("Database",!0)),_U(a,l,o,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t){mD(tD),ou(new jl("database",(e,{instanceIdentifier:n})=>{const o=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return vU(o,l,a,n)},"PUBLIC").setMultipleInstances(!0)),Is(kv,Lv,t),Is(kv,Lv,"esm2020")}_i.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};_i.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};xU();const NU={apiKey:"AIzaSyAcVefSYaWalxaBqzbH_lutuZqXs7ioYBI",authDomain:"money-splitter-191c2.firebaseapp.com",databaseURL:"https://money-splitter-191c2-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"money-splitter-191c2",storageBucket:"money-splitter-191c2.firebasestorage.app",messagingSenderId:"269283077584",appId:"1:269283077584:web:a0d54f18ab4112085f5dd5",measurementId:"G-D34K572ST6"},bU=AE(NU),zh=CU(bU),FT=Vh(zh,"trips"),RU=t=>mU(FT,e=>{const n=e.val();if(n){const o=Object.keys(n).map(l=>({...n[l],id:l}));o.sort((l,a)=>a.createdAt-l.createdAt),t(o)}else t([])}),m0=async t=>{const e=dU(FT),n={...t,id:e.key};return await Fh(e,n),e.key},IU=async t=>{const e=Vh(zh,`trips/${t.id}`);await Fh(e,t)},wU=async t=>{const e=Vh(zh,`trips/${t}`);await hU(e)},zl=[{code:"TWD",symbol:"$",rate:.24},{code:"HKD",symbol:"$",rate:1},{code:"JPY",symbol:"",rate:.052},{code:"USD",symbol:"$",rate:7.8},{code:"EUR",symbol:"",rate:8.5},{code:"GBP",symbol:"",rate:9.8},{code:"CNY",symbol:"",rate:1.08},{code:"KRW",symbol:"",rate:.0058},{code:"THB",symbol:"",rate:.22}],g0=["Ding.png","jack.png","Leng1.png","Leng2.png","mushroom.png","Nana.png","Nien.png","Nien2.png","omega.png","omega2.png","princes.png","stupid.png","Taco.png","Taco2.png"],MU=()=>g0[Math.floor(Math.random()*g0.length)],Jn=({children:t,className:e="",onClick:n,style:o})=>S.jsx("div",{className:`bg-[#1A1D23] rounded-xl shadow-lg border border-[#2A2D33] p-3 ${e}`,onClick:n,style:o,children:t}),en=({onClick:t,children:e,variant:n="primary",className:o="",disabled:l,type:a="button",title:c})=>{const h={primary:"bg-[#3df2bc] text-[#0B0E14] hover:bg-[#00D4E0] font-bold",secondary:"bg-[#1A1D23] text-[#E0E6ED] hover:bg-[#2A2D33] border border-[#2A2D33]",danger:"bg-[#FF3131] text-white hover:bg-[#E02020]",ghost:"bg-transparent text-[#3df2bc] hover:bg-[#1A1D23]",success:"bg-[#3df2bc] text-[#0B0E14] hover:bg-[#00D4E0] font-bold",outline:"bg-transparent border border-[#2A2D33] text-[#707A8A] hover:bg-[#1A1D23] hover:text-[#E0E6ED]"};return S.jsx("button",{type:a,disabled:l,onClick:t,title:c,className:`px-4 py-2 rounded-xl font-medium transition-all flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50 disabled:scale-100 ${h[n]} ${o}`,children:e})},hd=t=>S.jsx("input",{...t,className:"w-full bg-[#0B0E14] border border-[#2A2D33] text-[#E0E6ED] rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-[#3df2bc] outline-none transition-all placeholder:text-[#707A8A]"}),qa=t=>S.jsxs("div",{className:"relative group flex-1",children:[S.jsx("select",{...t,className:"w-full bg-[#0B0E14] border border-[#2A2D33] text-[#E0E6ED] rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-[#3df2bc] outline-none transition-all appearance-none pr-6 cursor-pointer"}),S.jsx("i",{className:"fa-solid fa-chevron-down absolute right-2 top-1/2 -translate-y-1/2 text-[12px] text-[#707A8A] pointer-events-none group-hover:text-[#E0E6ED] transition-colors"})]}),DU=t=>{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(()=>{alert(`Copied: ${t}`)}).catch(()=>{y0(t)}):y0(t)},y0=t=>{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),alert(`Copied: ${t}`)}catch{alert(`Copy failed. Value: ${t}`)}document.body.removeChild(e)},pd=({label:t,value:e,icon:n,bgColor:o,sublabel:l})=>S.jsxs("div",{className:`${o} border border-[#2A2D33] rounded-lg p-2 flex flex-col gap-0.5 shadow-sm group relative cursor-pointer active:scale-95 transition-transform`,onClick:a=>{a.stopPropagation(),DU(e)},children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("span",{className:"text-[12px] font-black uppercase opacity-70 flex items-center gap-1",children:[S.jsx("i",{className:`fa-solid ${n}`})," ",t]}),S.jsx("i",{className:"fa-solid fa-copy text-[12px] opacity-40 group-hover:opacity-100"})]}),S.jsx("div",{className:"text-[13px] font-bold truncate max-w-full",children:e}),l&&S.jsx("div",{className:"text-[13px] uppercase font-black opacity-50 truncate",children:l})]}),UU=()=>{const[t,e]=ke.useState([]),[n,o]=ke.useState(!0);ke.useEffect(()=>{const x=RU(Y=>{e(Y),o(!1)});return()=>x()},[]);const[l,a]=ke.useState(null),c=ke.useMemo(()=>t.find(x=>x.id===l)||null,[t,l]),h=ke.useMemo(()=>(c==null?void 0:c.participants)||[],[c]),g=ke.useMemo(()=>(c==null?void 0:c.expenses)||[],[c]),m=x=>{if(!c)return;const Y={...c,...x};IU(Y)},[_,v]=ke.useState(!1),[E,A]=ke.useState(""),[b,k]=ke.useState([]),[M,q]=ke.useState(()=>xw()),[Q,J]=ke.useState(!1),[j,ae]=ke.useState(""),[le,X]=ke.useState("expenses"),[Ne,ne]=ke.useState(!1),[_e,Le]=ke.useState(null),[Xe,Oe]=ke.useState(!1),[st,It]=ke.useState(""),[H,$]=ke.useState(!1),[fe,ze]=ke.useState(!1),[Ye,I]=ke.useState(null),[V,W]=ke.useState([]),[ie,ye]=ke.useState(!1),[Se,Pe]=ke.useState(!1),[ht,nt]=ke.useState([]),[Rn,Kn]=ke.useState([]),[Po,pr]=ke.useState({}),[pn,Ys]=ke.useState("TWD"),[ge,Vt]=ke.useState({date:new Date().toISOString().split("T")[0],item:"",amount:"",currency:"TWD",exchangeRate:"0.24",payerId:"",shareMode:"all",selectedParticipants:[]});ke.useEffect(()=>{l?localStorage.setItem("hk-active-trip-id",l):localStorage.removeItem("hk-active-trip-id")},[l]),ke.useEffect(()=>{var x;if(h.length>0){if(!ge.payerId||!h.some(Y=>Y.id===ge.payerId)){const Y=((x=h[0])==null?void 0:x.id)||"";Vt(P=>({...P,payerId:Y}))}(ge.selectedParticipants.length===0||!ge.selectedParticipants.every(Y=>h.some(P=>P.id===Y)))&&Vt(Y=>({...Y,selectedParticipants:h.map(P=>P.id)}))}},[h,ge.payerId,ge.selectedParticipants.length]);const mr=x=>{const Y=zl.find(P=>P.code===x);Vt(P=>({...P,currency:x,exchangeRate:Y?Y.rate.toString():"1.0"}))},Js=async()=>{if(!E.trim())return alert("Please enter a trip name");if(b.length<2)return alert("Please add at least two participants");const x={id:Date.now().toString(),name:E.trim(),icon:MU(),participants:b,expenses:[],createdAt:Date.now()},Y=await m0(x);a(Y),v(!1),A(""),k([]),X("expenses")},Oo=async x=>{confirm("Delete this trip and all its data?")&&(await wU(x),l===x&&a(null))},lo=x=>{if(!x.trim())return;const P={id:Date.now().toString(),name:x.trim()};_||!l?k(z=>[...z,P]):m({participants:[...h,P]})},Lu=(x,Y)=>{const P=h.map(z=>z.id===x?{...z,...Y}:z);m({participants:P})},gr=x=>{if(confirm("Remove this member? This will clear their expenses too."))if(_||!l)k(Y=>Y.filter(P=>P.id!==x));else{const Y=h.filter(z=>z.id!==x),P=g.filter(z=>z.payerId!==x);m({participants:Y,expenses:P})}},Ft=x=>{if(x.preventDefault(),!ge.item||!ge.amount||!ge.payerId)return alert("Fill all fields");let Y=[];if(ge.shareMode==="all"?Y=h.map(te=>te.id):ge.shareMode==="loan"?Y=ge.selectedParticipants.length>0?[ge.selectedParticipants[0]]:[]:Y=ge.selectedParticipants,Y.length===0)return alert("Select who is sharing");const P=parseFloat(ge.amount),z=parseFloat(ge.exchangeRate)||1,Z=P*z,de={id:_e||Date.now().toString(),description:ge.item,amount:P,currency:ge.currency,exchangeRate:z,amountInBase:Z,payerId:ge.payerId,participants:Y.map(te=>({userId:te,hasPaidBack:te===ge.payerId})),date:new Date(ge.date).getTime()};let he;_e?he=g.map(te=>te.id===_e?de:te):he=[de,...g],m({expenses:he}),ne(!1),Le(null),Vt(te=>({...te,item:"",amount:"",shareMode:"all",selectedParticipants:h.map(pe=>pe.id)}))},Pu=x=>{Le(x.id),ne(!0),Oe(!1),Vt({date:new Date(x.date).toISOString().split("T")[0],item:x.description,amount:x.amount.toString(),currency:x.currency,exchangeRate:x.exchangeRate.toString(),payerId:x.payerId,shareMode:x.participants.length===h.length?"all":x.participants.length===1?"loan":"specific",selectedParticipants:x.participants.map(Y=>Y.userId)})},yr=async()=>{if(!st.trim())return;$(!0);const x=h.map(P=>P.name),Y=await Cw(st,x);if($(!1),Y){let P=[...h];const z=pe=>{let He=P.find(Tt=>Tt.name.toLowerCase()===pe.toLowerCase());return He||(He={id:Date.now().toString()+Math.random(),name:pe},P.push(He)),He},Z=z(Y.payerName),de=Y.participantNames.map(z),he=de.some(pe=>pe.id===Z.id)?de:[Z,...de],te={id:Date.now().toString(),description:Y.description,amount:Y.amount,currency:"TWD",exchangeRate:.24,amountInBase:Y.amount*.24,payerId:Z.id,participants:he.map(pe=>({userId:pe.id,hasPaidBack:pe.id===Z.id})),date:Date.now()};m({participants:P,expenses:[te,...g]}),It(""),ne(!1)}else alert("AI failed to parse. Try manual mode.")},_r=(x,Y)=>{const P=g.map(z=>z.id===x?{...z,participants:z.participants.map(Z=>Z.userId===Y?{...Z,hasPaidBack:!Z.hasPaidBack}:Z)}:z);m({expenses:P})},Ho=(x,Y,P)=>{var de,he;const z=(de=h.find(te=>te.id===x))==null?void 0:de.name,Z=(he=h.find(te=>te.id===Y))==null?void 0:he.name;if(confirm(`Mark all debts from ${z} to ${Z} as paid?`)){const te=g.map(pe=>pe.payerId===Y?{...pe,participants:pe.participants.map(He=>He.userId===x?{...He,hasPaidBack:!0,selectedPaymentMethod:P}:He)}:pe);m({expenses:te})}},vr=(x,Y)=>{var Z,de;const P=(Z=h.find(he=>he.id===x))==null?void 0:Z.name,z=(de=h.find(he=>he.id===Y))==null?void 0:de.name;if(confirm(`Undo payment from ${P} to ${z}?`)){const he=g.map(te=>te.payerId===Y?{...te,participants:te.participants.map(pe=>pe.userId===x?{...pe,hasPaidBack:!1,selectedPaymentMethod:void 0}:pe)}:te);m({expenses:he})}},Er=x=>{confirm("Delete this expense?")&&m({expenses:g.filter(Y=>Y.id!==x)})},Tr=ke.useMemo(()=>{const x={},Y=new Set(h.map(te=>te.id));h.forEach(te=>x[te.id]=0),g.forEach(te=>{const pe=te.participants.filter(Tt=>Y.has(Tt.userId));if(pe.length===0)return;const He=te.amountInBase/pe.length;pe.forEach(Tt=>{!Tt.hasPaidBack&&Tt.userId!==te.payerId&&(x[te.payerId]!==void 0&&(x[te.payerId]+=He),x[Tt.userId]!==void 0&&(x[Tt.userId]-=He))})});const P=[],z=h.map(te=>({id:te.id,bal:x[te.id]})).filter(te=>te.bal<-.01).sort((te,pe)=>te.bal-pe.bal),Z=h.map(te=>({id:te.id,bal:x[te.id]})).filter(te=>te.bal>.01).sort((te,pe)=>pe.bal-te.bal),de=z.map(te=>({...te})),he=Z.map(te=>({...te}));for(const te of de)for(const pe of he){if(te.bal>=-.01)break;if(pe.bal<=.01)continue;const He=Math.min(-te.bal,pe.bal);He>.01&&(P.push({from:te.id,to:pe.id,amount:He}),te.bal+=He,pe.bal-=He)}return P},[g,h]),Ks=ke.useMemo(()=>{const x={},Y=new Set(h.map(P=>P.id));return g.forEach(P=>{const z=P.participants.filter(de=>Y.has(de.userId));if(z.length===0)return;const Z=P.amountInBase/z.length;z.forEach(de=>{if(de.hasPaidBack&&de.userId!==P.payerId){const he=`${de.userId}-${P.payerId}`;x[he]||(x[he]={amount:0,paymentMethod:de.selectedPaymentMethod}),x[he].amount+=Z,de.selectedPaymentMethod&&(x[he].paymentMethod=de.selectedPaymentMethod)}})}),Object.entries(x).filter(([P,z])=>z.amount>.01).map(([P,z])=>{const[Z,de]=P.split("-");return{from:Z,to:de,amount:z.amount,paymentMethod:z.paymentMethod}})},[g,h]),Ni=ke.useMemo(()=>{const x={},Y=new Set(h.map(z=>z.id));h.forEach(z=>x[z.id]={paid:0,share:0,net:0}),g.forEach(z=>{x[z.payerId]&&(x[z.payerId].paid+=z.amountInBase);const Z=z.participants.filter(he=>Y.has(he.userId));if(Z.length===0)return;const de=z.amountInBase/Z.length;Z.forEach(he=>{x[he.userId]&&(x[he.userId].share+=de)})});const P={};return h.forEach(z=>P[z.id]=0),g.forEach(z=>{const Z=z.participants.filter(he=>Y.has(he.userId));if(Z.length===0)return;const de=z.amountInBase/Z.length;Z.forEach(he=>{!he.hasPaidBack&&he.userId!==z.payerId&&(P[z.payerId]!==void 0&&(P[z.payerId]+=de),P[he.userId]!==void 0&&(P[he.userId]-=de))})}),h.map(z=>({...z,paid:x[z.id].paid,share:x[z.id].share,net:P[z.id],isClear:Math.abs(P[z.id])<.01}))},[g,h]),qt=x=>{var Z,de,he,te,pe,He,Tt,In,wn,Mn;I(x.id);const Y=((de=(Z=x.paymentDetails)==null?void 0:Z.twd)==null?void 0:de.banks)||[];W(Y.length>0?Y:[{bankName:"",accountNo:""}]),ye(((te=(he=x.paymentDetails)==null?void 0:he.twd)==null?void 0:te.linePay)||!1),Pe(((He=(pe=x.paymentDetails)==null?void 0:pe.twd)==null?void 0:He.ipass)||!1);const P=((In=(Tt=x.paymentDetails)==null?void 0:Tt.hkd)==null?void 0:In.banks)||[];nt(P.length>0?P:[{bankName:"",accountNo:""}]);const z=((Mn=(wn=x.paymentDetails)==null?void 0:wn.other)==null?void 0:Mn.banks)||[];Kn(z.length>0?z:[{bankName:"",accountNo:""}])},mn=x=>{x==="tw"?W([...V,{bankName:"",accountNo:""}]):x==="hk"?nt([...ht,{bankName:"",accountNo:""}]):Kn([...Rn,{bankName:"",accountNo:""}])},wt=(x,Y)=>{x==="tw"?W(V.filter((P,z)=>z!==Y)):x==="hk"?nt(ht.filter((P,z)=>z!==Y)):Kn(Rn.filter((P,z)=>z!==Y))},bi=(x,Y,P,z)=>{if(x==="tw"){const Z=[...V];Z[Y]={...Z[Y],[P]:z},W(Z)}else if(x==="hk"){const Z=[...ht];Z[Y]={...Z[Y],[P]:z},nt(Z)}else{const Z=[...Rn];Z[Y]={...Z[Y],[P]:z},Kn(Z)}},Ou=()=>{const x=JSON.stringify(t,null,2),Y=new Blob([x],{type:"application/json"}),P=URL.createObjectURL(Y),z=document.createElement("a");z.href=P,z.download=`splitter_backup_${new Date().toISOString().split("T")[0]}.json`,z.click(),URL.revokeObjectURL(P)},Hu=()=>{const x=document.createElement("input");x.type="file",x.accept=".json",x.onchange=Y=>{var Z;const P=(Z=Y.target.files)==null?void 0:Z[0];if(!P)return;const z=new FileReader;z.onload=async de=>{var he;try{const te=(he=de.target)==null?void 0:he.result,pe=JSON.parse(te);if(Array.isArray(pe)){if(confirm(`Import ${pe.length} trips? This will ADD to your existing data.`)){for(const He of pe)await m0(He);alert("Data imported successfully!")}}else alert("Invalid file format. Must be a JSON array of trips.")}catch{alert("Error parsing JSON file.")}},z.readAsText(P)},x.click()};return n?S.jsx("div",{className:"w-full min-h-screen bg-[#0B0E14] flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"w-20 h-20 bg-[#1A1D23] rounded-2xl flex items-center justify-center mx-auto mb-4 border border-[#3df2bc]/30 animate-pulse",children:S.jsx("i",{className:"fa-solid fa-circle-notch animate-spin text-[#3df2bc] text-3xl"})}),S.jsx("p",{className:"text-[#707A8A]",children:"Connecting..."})]})}):!c||_?S.jsx("div",{className:"w-full min-h-screen bg-[#0B0E14] flex items-center justify-center p-6 overflow-y-auto",children:S.jsxs("div",{className:"w-full max-w-3xl space-y-6 animate-in fade-in zoom-in duration-500 py-8",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("div",{className:"w-40 h-40 bg-[#1A1D23] backdrop-blur-md rounded-3xl flex items-center justify-center mx-auto mb-4 border border-[#3df2bc]/30 shadow-[0_0_20px_rgba(0,242,255,0.2)] overflow-hidden",children:S.jsx("img",{src:"/icon.png",alt:"Logo",className:"w-30 h-30 object-contain"})}),S.jsx("h1",{className:"text-3xl font-bold text-[#E0E6ED] tracking-tight",children:"App"}),t.length>0&&!_?S.jsx("p",{className:"text-[#707A8A] mt-2 text-lg",children:""}):S.jsx("p",{className:"text-[#707A8A] mt-2 text-lg",children:""})]}),_||t.length===0?S.jsxs(Jn,{className:"space-y-3 shadow-2xl",children:[S.jsxs("div",{className:"flex justify-between items-center mb-2",children:[S.jsx("h2",{className:"font-bold text-[#E0E6ED]",children:""}),t.length>0&&S.jsx("button",{onClick:()=>v(!1),className:"text-[#707A8A] hover:text-[#E0E6ED]",children:S.jsx("i",{className:"fa-solid fa-xmark"})})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-lg font-semibold text-[#E0E6ED] mb-1.5 ml-1",children:""}),S.jsx("input",{placeholder:"e.g. ",className:"w-full px-3 py-2 bg-[#0B0E14] border border-[#2A2D33] rounded-lg outline-none focus:ring-2 focus:ring-[#3df2bc] text-[#E0E6ED] placeholder:text-[#707A8A]",value:E,onChange:x=>A(x.target.value)})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between items-center mb-1.5 ml-1",children:[S.jsx("label",{className:"block text-lg font-semibold text-[#E0E6ED]",children:""}),S.jsxs("button",{onClick:()=>J(!Q),className:"text-[12px] font-bold text-[#FFD700] bg-[#FFD700]/10 px-2 py-0.5 rounded flex items-center gap-1 hover:bg-[#FFD700]/20",children:[S.jsx("i",{className:"fa-solid fa-star"})," ",Q?"Hide VIP":"VIP List"]})]}),M.length>0&&S.jsxs("div",{className:"mb-3 p-2 bg-[#FFD700]/10 rounded-lg border border-[#FFD700]/20",children:[S.jsxs("div",{className:"text-[13px] font-bold text-[#FFD700] uppercase mb-2 flex items-center gap-1",children:[S.jsx("i",{className:"fa-solid fa-star"})," Best "]}),S.jsx("div",{className:"flex flex-wrap gap-2",children:M.map((x,Y)=>{const P=b.some(z=>z.name.toLowerCase()===x.name.toLowerCase());return S.jsxs("button",{onClick:()=>!P&&lo(x.name),disabled:P,className:`flex flex-col items-center gap-1 p-2 rounded-xl text-lg font-medium transition-all min-w-[60px] ${P?"bg-[#3df2bc]/10 border-2 border-[#3df2bc]/50 cursor-default":"bg-[#0B0E14] border-2 border-[#2A2D33] hover:border-[#3df2bc]/50 hover:bg-[#3df2bc]/5"}`,children:[S.jsxs("div",{className:"relative",children:[x.image?S.jsx("img",{src:x.image,alt:x.name,className:`w-10 h-10 rounded-full object-cover ${P?"ring-2 ring-[#3df2bc]":""}`}):S.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ${P?"bg-[#3df2bc]/20 text-[#3df2bc]":"bg-[#1A1D23] text-[#707A8A]"}`,children:x.name.charAt(0)}),P&&S.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-[#3df2bc] rounded-full flex items-center justify-center",children:S.jsx("i",{className:"fa-solid fa-check text-[#0B0E14] text-[12px]"})})]}),S.jsx("span",{className:`text-[12px] font-bold ${P?"text-[#3df2bc]":"text-[#E0E6ED]"}`,children:x.name})]},Y)})})]}),Q&&S.jsxs("div",{className:"mb-3 p-3 bg-[#0B0E14] rounded-lg border border-[#2A2D33]",children:[S.jsx("div",{className:"text-[12px] font-bold text-[#707A8A] uppercase mb-2",children:"Manage VIP List"}),S.jsxs("div",{className:"space-y-1.5 mb-2",children:[M.map((x,Y)=>S.jsxs("div",{className:"flex justify-between items-center p-2 bg-[#1A1D23] rounded border border-[#2A2D33]",children:[S.jsx("span",{className:"text-lg text-[#E0E6ED]",children:x.name}),S.jsx("button",{onClick:()=>{const P=M.filter((z,Z)=>Z!==Y);q(P),td(P)},className:"text-[#FF3131]/60 hover:text-[#FF3131] text-lg",children:S.jsx("i",{className:"fa-solid fa-trash"})})]},Y)),M.length===0&&S.jsx("div",{className:"text-center py-2 text-[#707A8A] text-lg italic",children:"No VIP members yet"})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{placeholder:"Add VIP name...",value:j,onChange:x=>ae(x.target.value),className:"flex-1 px-2 py-1.5 bg-[#1A1D23] border border-[#2A2D33] rounded text-lg text-[#E0E6ED] outline-none focus:ring-2 focus:ring-[#FFD700] placeholder:text-[#707A8A]",onKeyDown:x=>{if(x.key==="Enter"&&j.trim()){const Y=[...M,{name:j.trim()}];q(Y),td(Y),ae("")}}}),S.jsx("button",{onClick:()=>{if(j.trim()){const x=[...M,{name:j.trim()}];q(x),td(x),ae("")}},className:"px-3 py-1.5 bg-[#FFD700] text-[#0B0E14] rounded text-lg font-bold hover:bg-[#E6C200]",children:S.jsx("i",{className:"fa-solid fa-plus"})})]})]}),S.jsx("div",{className:"space-y-2 mb-3",children:b.length===0?S.jsx("div",{className:"text-center py-4 text-[#707A8A] text-lg italic bg-[#0B0E14] rounded-lg border border-dashed border-[#2A2D33]",children:""}):b.map(x=>S.jsxs("div",{className:"flex justify-between items-center p-3 bg-[#0B0E14] rounded-xl border border-[#2A2D33]",children:[S.jsx("span",{className:"font-medium text-[#E0E6ED]",children:x.name}),S.jsx("button",{onClick:()=>gr(x.id),className:"text-[#FF3131]/60 hover:text-[#FF3131] transition-colors",children:S.jsx("i",{className:"fa-solid fa-xmark"})})]},x.id))}),S.jsx("input",{placeholder:"Type name & hit Enter",className:"w-full px-3 py-2 bg-[#0B0E14] border border-[#2A2D33] rounded-lg outline-none focus:ring-2 focus:ring-[#3df2bc] text-[#E0E6ED] placeholder:text-[#707A8A]",onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),lo(x.currentTarget.value),x.currentTarget.value="")}})]}),S.jsx(en,{onClick:Js,className:"w-full h-12 text-lg mt-4",variant:"primary",disabled:b.length<2||!E.trim(),children:"Let's start"})]}):S.jsxs("div",{className:"space-y-3",children:[t.map(x=>S.jsx(Jn,{onClick:()=>{a(x.id),X("expenses")},className:"!p-0 overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform active:scale-95 hover:border-[#3df2bc]/30",children:S.jsxs("div",{className:"p-4 flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-14 h-14 bg-white/10 rounded-2xl flex items-center justify-center border border-white/20 overflow-hidden",children:x.icon?S.jsx("img",{src:`/TripIcon/${x.icon}`,alt:"",className:"w-12 h-12 object-contain"}):S.jsx("i",{className:"fa-solid fa-plane-departure text-[#3df2bc] text-lg"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold text-[#E0E6ED] text-lg",children:x.name}),S.jsxs("p",{className:"text-[12px] text-[#707A8A] font-bold uppercase tracking-tight",children:[x.participants.length,"   ",x.expenses.length," Bills"]})]})]}),S.jsx("button",{onClick:Y=>{Y.stopPropagation(),Oo(x.id)},className:"w-10 h-10 rounded-full text-[#707A8A] hover:text-[#FF3131] hover:bg-[#FF3131]/10 transition-colors flex items-center justify-center",children:S.jsx("i",{className:"fa-solid fa-trash-can text-xl"})})]})},x.id)),S.jsxs("div",{className:"pt-2 space-y-2",children:[S.jsxs(en,{onClick:()=>v(!0),variant:"outline",className:"w-full border-[#3df2bc]/30 bg-[#3df2bc]/10 text-[#3df2bc] hover:bg-[#3df2bc]/20 h-12",children:[S.jsx("i",{className:"fa-solid fa-plus"})," New "]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsxs(en,{onClick:Ou,variant:"outline",className:"flex-1 bg-[#1A1D23]/50 border-[#2A2D33] text-[12px] text-[#707A8A] hover:bg-[#1A1D23]",children:[S.jsx("i",{className:"fa-solid fa-download"})," Backup All"]}),S.jsxs(en,{onClick:Hu,variant:"outline",className:"flex-1 bg-[#1A1D23]/50 border-[#2A2D33] text-[12px] text-[#707A8A] hover:bg-[#1A1D23]",children:[S.jsx("i",{className:"fa-solid fa-upload"})," Restore All"]})]})]})]})]})}):S.jsx("div",{className:"w-full min-h-screen bg-[#0B0E14]",children:S.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col pb-24",children:[S.jsx("header",{className:"bg-[#1A1D23] px-6 pt-8 pb-4 border-b border-[#2A2D33] sticky top-0 z-30 shadow-lg",children:S.jsxs("div",{className:"flex justify-between items-center mb-1",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("button",{onClick:()=>a(null),className:"w-8 h-8 bg-[#0B0E14] rounded-lg flex items-center justify-center text-[#707A8A] hover:text-[#3df2bc] hover:bg-[#3df2bc]/10 transition-colors",children:S.jsx("i",{className:"fa-solid fa-chevron-left text-lg"})}),S.jsxs("div",{children:[S.jsx("h1",{className:"text-lg font-bold text-[#E0E6ED] flex items-center gap-2",children:c.name}),S.jsxs("p",{className:"text-[#707A8A] text-[12px] font-bold uppercase tracking-widest -mt-0.5",children:["  ",h.length," "]})]})]}),S.jsxs("div",{className:"bg-[#3df2bc]/10 text-[#3df2bc] px-2.5 py-0.5 rounded-full text-[12px] font-bold uppercase",children:[g.length," "]})]})}),S.jsxs("main",{className:"flex-1 p-4",children:[le==="expenses"&&S.jsxs("div",{className:"space-y-3",children:[Ne?S.jsxs(Jn,{className:"animate-in fade-in slide-in-from-top-4 duration-300 !p-0 overflow-hidden shadow-lg border-2 border-[#3df2bc]/20",children:[S.jsxs("div",{className:"flex justify-between items-center p-4 bg-[#0B0E14] border-b border-[#2A2D33]",children:[S.jsx("h3",{className:"font-bold text-[#E0E6ED] text-lg uppercase tracking-wider",children:_e?"Edit Bill":Xe?"Smart Bill (AI)":"Bill Entry"}),S.jsxs("div",{className:"flex items-center gap-3",children:[!_e&&S.jsx("button",{onClick:()=>Oe(!Xe),className:"text-[12px] font-bold text-[#3df2bc] uppercase bg-[#3df2bc]/10 border border-[#3df2bc]/20 px-2 py-1 rounded shadow-sm",children:Xe?"Manual Mode":"AI Mode"}),S.jsx("button",{onClick:()=>{ne(!1),Le(null),Vt(x=>({...x,item:"",amount:""}))},className:"text-[#707A8A] hover:text-[#E0E6ED]",children:S.jsx("i",{className:"fa-solid fa-times"})})]})]}),Xe&&!_e?S.jsxs("div",{className:"p-4 space-y-3",children:[S.jsx("textarea",{className:"w-full p-3 bg-[#0B0E14] border border-[#2A2D33] rounded-xl h-20 text-sm focus:ring-2 focus:ring-[#3df2bc] outline-none text-[#E0E6ED] placeholder:text-[#707A8A]",placeholder:"e.g. Sushi 12000 JPY, Alan paid, shared by all",value:st,onChange:x=>It(x.target.value)}),S.jsx(en,{onClick:yr,className:"w-full",disabled:H||!st.trim(),children:H?S.jsx("i",{className:"fa-solid fa-circle-notch animate-spin"}):"Process with Gemini"})]}):S.jsxs("form",{onSubmit:Ft,className:"p-3",children:[S.jsxs("div",{className:"grid grid-cols-12 gap-y-2 gap-x-2",children:[S.jsxs("div",{className:"col-span-4",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-0.5",children:"Date"}),S.jsx(hd,{type:"date",value:ge.date,onChange:x=>Vt({...ge,date:x.target.value})})]}),S.jsxs("div",{className:"col-span-8",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-0.5",children:"Item"}),S.jsx(hd,{placeholder:"Description...",value:ge.item,onChange:x=>Vt({...ge,item:x.target.value})})]}),S.jsxs("div",{className:"col-span-4",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-0.5",children:"Amount"}),S.jsx(hd,{type:"number",step:"any",placeholder:"0.00",value:ge.amount,onChange:x=>Vt({...ge,amount:x.target.value})})]}),S.jsxs("div",{className:"col-span-8",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-0.5",children:"Currency"}),S.jsx(qa,{value:ge.currency,onChange:x=>mr(x.target.value),children:zl.map(x=>S.jsx("option",{value:x.code,children:x.code},x.code))})]}),S.jsxs("div",{className:"col-span-6 mt-1",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-0.5",children:"Payer"}),S.jsx(qa,{value:ge.payerId,onChange:x=>Vt({...ge,payerId:x.target.value}),children:h.map(x=>S.jsx("option",{value:x.id,children:x.name},x.id))})]}),S.jsxs("div",{className:"col-span-6 mt-1",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-0.5",children:"Share Type"}),S.jsxs(qa,{value:ge.shareMode,onChange:x=>Vt({...ge,shareMode:x.target.value}),children:[S.jsx("option",{value:"all",children:""}),S.jsx("option",{value:"specific",children:""}),S.jsx("option",{value:"loan",children:""})]})]}),(ge.shareMode==="specific"||ge.shareMode==="loan")&&S.jsxs("div",{className:"col-span-12 py-2 border-t border-[#2A2D33] mt-1 animate-in fade-in duration-200",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-1.5",children:ge.shareMode==="loan"?"Select Borrower":"Select Participants"}),S.jsx("div",{className:"flex flex-wrap gap-1.5",children:h.map(x=>{const Y=ge.selectedParticipants.includes(x.id);return S.jsx("button",{type:"button",onClick:()=>{if(ge.shareMode==="loan")Vt({...ge,selectedParticipants:[x.id]});else{const P=Y?ge.selectedParticipants.filter(z=>z!==x.id):[...ge.selectedParticipants,x.id];Vt({...ge,selectedParticipants:P})}},className:`text-[13px] px-2 py-1 rounded-md font-bold transition-all border ${Y?"bg-[#3df2bc] text-[#0B0E14] border-[#3df2bc]":"bg-[#0B0E14] text-[#707A8A] border-[#2A2D33]"}`,children:x.name},x.id)})})]})]}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-[#2A2D33] flex items-center justify-between",children:[S.jsxs("div",{className:"text-[12px] text-[#707A8A] font-bold uppercase",children:["Total: ",S.jsxs("span",{className:"text-[#3df2bc]",children:["HK$",(parseFloat(ge.amount||"0")*parseFloat(ge.exchangeRate||"1")).toFixed(2)]})]}),S.jsxs("div",{className:"flex gap-2",children:[_e&&S.jsx(en,{onClick:()=>{ne(!1),Le(null)},variant:"secondary",className:"px-4 text-lg",children:"Cancel"}),S.jsx(en,{type:"submit",variant:"success",className:"px-8 text-lg",children:_e?"Update Bill":"Save Bill"})]})]})]})]}):S.jsxs(en,{onClick:()=>ne(!0),className:"w-full h-12 text-lg",children:[S.jsx("i",{className:"fa-solid fa-plus"}),"  "]}),S.jsx("div",{className:"space-y-3",children:g.length===0?S.jsxs("div",{className:"text-center py-20 text-[#707A8A]",children:[S.jsx("i",{className:"fa-solid fa-receipt text-6xl mb-4 opacity-30"}),S.jsx("p",{children:'No bills yet. Tap "Add New Bill"!'})]}):g.map(x=>S.jsx(kU,{expense:x,participants:h,onToggleSettlement:_r,onDelete:Er,onEdit:Pu},x.id))})]}),le==="summary"&&S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"space-y-3 pt-4",children:[S.jsxs("h3",{className:"font-bold text-[#E0E6ED] px-1 text-lg uppercase tracking-widest flex justify-between items-center",children:[S.jsx("span",{children:""}),S.jsx("div",{className:"flex items-center gap-2",children:S.jsx("select",{value:pn,onChange:x=>Ys(x.target.value),className:"text-[12px] bg-[#0B0E14] border border-[#2A2D33] text-[#E0E6ED] px-2 py-1 rounded font-bold outline-none focus:ring-2 focus:ring-[#3df2bc]",children:zl.map(x=>S.jsx("option",{value:x.code,children:x.code},x.code))})})]}),S.jsx("div",{className:"space-y-3",children:Tr.length===0?S.jsxs(Jn,{className:"!p-2 text-center py-10",children:[S.jsx("div",{className:"w-16 h-16 bg-[#3df2bc]/10 text-[#3df2bc] rounded-full flex items-center justify-center mx-auto mb-3 text-lg",children:S.jsx("i",{className:"fa-solid fa-check-double"})}),S.jsx("p",{className:"text-[#E0E6ED] font-bold",children:"!"})]}):Tr.map((x,Y)=>{var de,he,te,pe,He,Tt,In,wn,Mn,Qn,Je,be,$e,Mt,gt,Dt,Xn,Bo,Sr,Cr,Qs,Ri,Go,$n,Wn,Ii,Zn;const P=h.find(se=>se.id===x.to),z=h.find(se=>se.id===x.from),Z=[];return(he=(de=P==null?void 0:P.paymentDetails)==null?void 0:de.twd)!=null&&he.linePay&&Z.push({label:"Line Pay",value:"Line Pay"}),(pe=(te=P==null?void 0:P.paymentDetails)==null?void 0:te.twd)!=null&&pe.ipass&&Z.push({label:"iPASS MONEY",value:"iPASS MONEY"}),(In=(Tt=(He=P==null?void 0:P.paymentDetails)==null?void 0:He.twd)==null?void 0:Tt.banks)==null||In.forEach(se=>{se.accountNo&&Z.push({label:`BANK: ${se.bankName||"TW"} - ${se.accountNo}`,value:se.accountNo})}),(Mn=(wn=P==null?void 0:P.paymentDetails)==null?void 0:wn.hkd)!=null&&Mn.fpsTel&&Z.push({label:"FPS",value:"FPS"}),(Je=(Qn=P==null?void 0:P.paymentDetails)==null?void 0:Qn.hkd)!=null&&Je.paymeTel&&Z.push({label:"PayMe",value:"PayMe"}),(Mt=($e=(be=P==null?void 0:P.paymentDetails)==null?void 0:be.hkd)==null?void 0:$e.banks)==null||Mt.forEach(se=>{se.accountNo&&Z.push({label:`BANK: ${se.bankName||"HK"} - ${se.accountNo}`,value:se.bankName})}),(Xn=(Dt=(gt=P==null?void 0:P.paymentDetails)==null?void 0:gt.other)==null?void 0:Dt.banks)==null||Xn.forEach(se=>{se.accountNo&&Z.push({label:`BANK: ${se.bankName||"Other"} - ${se.accountNo}`,value:se.bankName})}),S.jsxs(Jn,{className:"!p-0 overflow-hidden hover:shadow-md transition-shadow border-2 border-[#2A2D33] hover:border-[#FF3131]/30",children:[S.jsxs("div",{className:"p-4 flex items-center justify-between bg-[#0B0E14]",children:[S.jsx("div",{className:"flex-1 flex items-center gap-3",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"font-bold text-[#E0E6ED] text-lg whitespace-nowrap",children:z==null?void 0:z.name}),S.jsx("i",{className:"fa-solid fa-arrow-right text-[#F78181] text-[12px]"}),S.jsx("span",{className:"font-bold text-[#E0E6ED] text-lg whitespace-nowrap",children:P==null?void 0:P.name})]})}),S.jsx("div",{className:"text-[#F78181] font-black text-lg tabular-nums",children:(()=>{const se=zl.find(Vo=>Vo.code===pn),zt=se?x.amount/se.rate:x.amount;return`${(se==null?void 0:se.symbol)||"$"}${zt.toFixed(2)} ${pn}`})()})]}),(P==null?void 0:P.paymentDetails)&&S.jsxs("div",{className:"p-3 border-t border-[#2A2D33] space-y-3",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("div",{className:"text-[13px] font-black text-[#707A8A] uppercase tracking-widest px-1",children:":"}),S.jsxs("div",{className:"px-1 flex items-center gap-2",children:[S.jsxs(qa,{value:Po[`${x.from}-${x.to}`]||"",onChange:se=>{const zt=se.target.value;zt&&pr(Vo=>({...Vo,[`${x.from}-${x.to}`]:zt}))},children:[S.jsx("option",{value:"",disabled:!0,children:"-- Select method --"}),Z.length===0?S.jsx("option",{disabled:!0,children:"No payment methods set"}):Z.map((se,zt)=>S.jsx("option",{value:se.value,children:se.label},zt))]}),S.jsx(en,{onClick:()=>{const se=Po[`${x.from}-${x.to}`];Ho(x.from,x.to,se)},variant:"success",className:"h-8 px-3 rounded-xl text-[12px] flex-shrink-0 shadow-sm font-bold",title:"Mark as Paid",children:"Paid"}),S.jsx(en,{onClick:()=>vr(x.from,x.to),variant:"outline",className:"h-8 px-2 rounded-xl text-[12px] flex-shrink-0 shadow-sm text-[#707A8A] hover:text-[#FF3131] hover:border-[#FF3131]/30",title:"Undo Payment",children:S.jsx("i",{className:"fa-solid fa-rotate-left"})})]})]}),S.jsxs("div",{className:"space-y-2 pt-1 border-t border-[#2A2D33] mt-2",children:[S.jsx("div",{className:"text-[13px] font-black text-[#707A8A] uppercase tracking-widest px-1",children:S.jsx("span",{children:":"})}),S.jsxs("div",{className:"flex flex-wrap gap-2 px-1",children:[((Bo=P.paymentDetails.twd)==null?void 0:Bo.linePay)&&S.jsxs("div",{className:"flex items-center gap-1.5 bg-[#00C300]/10 border border-[#00C300]/30 rounded-lg px-2 py-1",children:[S.jsx("img",{src:"/payment/linepay.png",alt:"Line Pay",className:"w-5 h-5 object-contain"}),S.jsx("span",{className:"text-[12px] font-bold text-[#00C300]",children:"Line Pay"})]}),((Sr=P.paymentDetails.twd)==null?void 0:Sr.ipass)&&S.jsxs("div",{className:"flex items-center gap-1.5 bg-[#00C300]/10 border border-[#00C300]/30 rounded-lg px-2 py-1",children:[S.jsx("img",{src:"/payment/IPASSMoney.png",alt:"iPASS MONEY",className:"w-5 h-5 object-contain"}),S.jsx("span",{className:"text-[12px] font-bold text-[#00C300]",children:"iPASS MONEY"})]}),((Cr=P.paymentDetails.hkd)==null?void 0:Cr.fpsTel)&&S.jsxs("div",{className:"flex items-center gap-1.5 bg-[#4096F7]/10 border border-[#3df2bc]/30 rounded-lg px-2 py-1 cursor-pointer hover:bg-[#3df2bc]/20 active:scale-95 transition-all",onClick:()=>{navigator.clipboard.writeText(P.paymentDetails.hkd.fpsTel),alert(`Copied: ${P.paymentDetails.hkd.fpsTel}`)},children:[S.jsx("img",{src:"/payment/fps.png",alt:"FPS",className:"w-5 h-5 object-contain"}),S.jsxs("span",{className:"text-[12px] font-bold text-[#4096F7]",children:["FPS: ",P.paymentDetails.hkd.fpsTel]})]}),((Qs=P.paymentDetails.hkd)==null?void 0:Qs.paymeTel)&&S.jsxs("div",{className:"flex items-center gap-1.5 bg-[#FF3131]/10 border border-[#FF3131]/30 rounded-lg px-2 py-1 cursor-pointer hover:bg-[#FF3131]/20 active:scale-95 transition-all",onClick:()=>{navigator.clipboard.writeText(P.paymentDetails.hkd.paymeTel),alert(`Copied: ${P.paymentDetails.hkd.paymeTel}`)},children:[S.jsx("img",{src:"/payment/payMe.png",alt:"PayMe",className:"w-5 h-5 object-contain"}),S.jsxs("span",{className:"text-[12px] font-bold text-[#FF3131]",children:["PayMe: ",P.paymentDetails.hkd.paymeTel]})]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 px-1",children:[(Go=(Ri=P.paymentDetails.twd)==null?void 0:Ri.banks)==null?void 0:Go.map((se,zt)=>se.accountNo&&S.jsx(pd,{label:se.bankName||"TW Bank",value:se.accountNo,icon:"fa-building-columns",bgColor:"bg-[#1A1D23] text-[#E0E6ED]"},`tw-bank-${zt}`)),(Wn=($n=P.paymentDetails.hkd)==null?void 0:$n.banks)==null?void 0:Wn.map((se,zt)=>se.accountNo&&S.jsx(pd,{label:se.bankName||"HK Bank",value:se.accountNo,icon:"fa-building-columns",bgColor:"bg-[#1A1D23] text-[#E0E6ED]"},`hk-bank-${zt}`)),(Zn=(Ii=P.paymentDetails.other)==null?void 0:Ii.banks)==null?void 0:Zn.map((se,zt)=>se.accountNo&&S.jsx(pd,{label:se.bankName||"Other Bank",value:se.accountNo,icon:"fa-building-columns",bgColor:"bg-[#1A1D23] text-[#E0E6ED]"},`other-bank-${zt}`))]})]})]})]},Y)})})]}),Ks.length>0&&S.jsxs("div",{className:"space-y-3 pt-4",children:[S.jsxs("h3",{className:"font-bold text-[#E0E6ED] px-1 text-lg uppercase tracking-widest flex justify-between items-center",children:[S.jsx("span",{children:""}),S.jsxs("span",{className:"text-[12px] bg-[#3df2bc]/10 text-[#3df2bc] px-2 py-0.5 rounded font-black uppercase",children:[Ks.length," Paid"]})]}),S.jsx("div",{className:"space-y-2",children:Ks.map((x,Y)=>{const P=h.find(Z=>Z.id===x.to),z=h.find(Z=>Z.id===x.from);return S.jsx(Jn,{className:"!p-3 bg-[#3df2bc]/5 border border-[#3df2bc]/20",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-8 h-8 bg-[#3df2bc] text-[#0B0E14] rounded-full flex items-center justify-center",children:S.jsx("i",{className:"fa-solid fa-check text-lg"})}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"font-bold text-[#E0E6ED] text-lg",children:z==null?void 0:z.name}),S.jsx("i",{className:"fa-solid fa-arrow-right text-[#3df2bc] text-[12px]"}),S.jsx("span",{className:"font-bold text-[#E0E6ED] text-lg",children:P==null?void 0:P.name})]}),S.jsx("div",{className:"text-[12px] text-[#3df2bc] font-medium",children:x.paymentMethod?`via ${x.paymentMethod}`:"Payment completed"})]})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-[#3df2bc] font-black text-lg",children:(()=>{const Z=zl.find(he=>he.code===pn),de=Z?x.amount/Z.rate:x.amount;return`${(Z==null?void 0:Z.symbol)||"$"}${de.toFixed(2)}`})()}),S.jsxs(en,{onClick:()=>vr(x.from,x.to),variant:"outline",className:"h-7 px-2 rounded-lg text-[12px] text-[#707A8A] hover:text-[#FF3131] hover:border-[#FF3131]/30 border-[#2A2D33]",title:"Undo Payment",children:[S.jsx("i",{className:"fa-solid fa-rotate-left"})," Undo"]})]})]})},Y)})})]}),S.jsxs("div",{className:"space-y-3 pt-2",children:[S.jsxs("h3",{className:"font-bold text-[#E0E6ED] px-1 text-lg uppercase tracking-widest flex justify-between items-center",children:[S.jsx("span",{children:""}),S.jsxs("span",{className:"text-[12px] text-[#707A8A] normal-case font-medium",children:[Ni.filter(x=>x.isClear).length," / ",h.length," Cleared"]})]}),S.jsx("div",{className:"grid grid-cols-1 gap-3",children:Ni.map(x=>S.jsx(Jn,{className:"!p-3 border-l-4 overflow-hidden relative",style:{borderLeftColor:x.isClear?"#383b38":x.net<0?"#f76b6b":"#f2dd3d"},children:S.jsx("div",{className:"flex justify-between items-center",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black ${x.isClear?"bg-[#3df2bc]/10 text-[#3df2bc]":x.net<0?"bg-[#f76b6b]/10 text-[#f76b6b]":"bg-[#f2dd3d]/10 text-[#f2dd3d]"}`,children:x.name.charAt(0).toUpperCase()}),S.jsxs("div",{children:[S.jsx("div",{className:"font-bold text-[#E0E6ED] text-lg",children:x.name}),S.jsx("div",{className:`text-[12px] font-black uppercase ${x.isClear?"text-[#7F8A70]":"text-[#707A8A]"}`,children:x.isClear?S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx("i",{className:"fa-solid fa-circle-check"})," "]}):x.net<0?"":""})]})]})})},x.id))})]})]}),le==="individual"&&S.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right duration-200",children:[S.jsxs("h3",{className:"font-bold text-[#E0E6ED] px-1 text-lg uppercase tracking-widest flex items-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-wallet text-[#3df2bc]"})," ?"]}),S.jsx("p",{className:"text-[12px] text-[#707A8A] px-1 -mt-4",children:"Set "}),S.jsx("div",{className:"space-y-3",children:h.map(x=>{var Y,P,z,Z,de,he,te,pe,He,Tt,In,wn,Mn,Qn;return S.jsxs(Jn,{className:"relative group overflow-hidden",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[S.jsx("div",{className:"w-12 h-12 bg-[#3df2bc]/10 text-[#3df2bc] rounded-2xl flex items-center justify-center font-black text-lg",children:x.name.charAt(0).toUpperCase()}),S.jsxs("div",{children:[S.jsx("h4",{className:"font-black text-[#E0E6ED] text-lg",children:x.name}),S.jsxs("div",{className:"flex gap-2",children:[((Y=x.paymentDetails)==null?void 0:Y.hkd)&&S.jsx("span",{className:"text-[12px] font-black uppercase text-[#707A8A] bg-[#707A8A]/10 px-1 rounded",children:"HKD Active"}),((P=x.paymentDetails)==null?void 0:P.twd)&&S.jsx("span",{className:"text-[12px] font-black uppercase text-[#707A8A] bg-[#707A8A]/10 px-1 rounded",children:"TWD Active"})]})]})]}),Ye===x.id?S.jsxs("div",{className:"space-y-5 animate-in fade-in duration-200 bg-[#0B0E14] -mx-4 -mb-4 p-4 border-t border-[#2A2D33]",children:[S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"text-[11px] font-black text-[#DEE0E3] uppercase flex items-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-piggy-bank"})," Taiwan (TWD)"]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsxs("div",{className:"col-span-1",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-1",children:"Line Pay"}),S.jsxs("div",{className:"flex bg-[#1A1D23] rounded-lg border border-[#2A2D33] overflow-hidden p-1 gap-1",children:[S.jsx("button",{onClick:()=>ye(!0),className:`flex-1 py-0.5 text-[11px] font-black rounded ${ie?"bg-[#3df2bc] text-[#0B0E14]":"bg-transparent text-[#707A8A]"}`,children:"YES"}),S.jsx("button",{onClick:()=>ye(!1),className:`flex-1 py-0.5 text-[11px] font-black rounded ${ie?"bg-transparent text-[#707A8A]":"bg-[#2A2D33] text-[#E0E6ED]"}`,children:"NO"})]})]}),S.jsxs("div",{className:"col-span-1",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-1",children:"iPass MONEY"}),S.jsxs("div",{className:"flex bg-[#1A1D23] rounded-lg border border-[#2A2D33] overflow-hidden p-1 gap-1",children:[S.jsx("button",{onClick:()=>Pe(!0),className:`flex-1 py-0.5 text-[11px] font-black rounded ${Se?"bg-[#FFD700] text-[#0B0E14]":"bg-transparent text-[#707A8A]"}`,children:"YES"}),S.jsx("button",{onClick:()=>Pe(!1),className:`flex-1 py-0.5 text-[11px] font-black rounded ${Se?"bg-transparent text-[#707A8A]":"bg-[#2A2D33] text-[#E0E6ED]"}`,children:"NO"})]})]}),S.jsxs("div",{className:"col-span-2 space-y-2",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block",children:"Bank Accounts"}),V.map((Je,be)=>S.jsxs("div",{className:"space-y-1 p-1.5 bg-[#1A1D23] rounded-lg border border-[#2A2D33] shadow-sm relative group",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[S.jsx("input",{type:"text",className:"w-full bg-[#0B0E14] border-0 rounded-lg px-2 py-1.5 text-sm text-[#E0E6ED] focus:ring-2 focus:ring-[#3df2bc] outline-none placeholder:text-[#707A8A]",value:Je.bankName,placeholder:"Bank (e.g. )",onChange:$e=>bi("tw",be,"bankName",$e.target.value)}),S.jsx("input",{type:"text",className:"w-full bg-[#0B0E14] border-0 rounded-lg px-2 py-1.5 text-sm text-[#E0E6ED] focus:ring-2 focus:ring-[#3df2bc] outline-none placeholder:text-[#707A8A]",value:Je.accountNo,placeholder:"Account Number",onChange:$e=>bi("tw",be,"accountNo",$e.target.value)})]}),S.jsx("button",{onClick:()=>wt("tw",be),className:"absolute -top-2 -right-2 w-5 h-5 bg-[#FF3131] text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:S.jsx("i",{className:"fa-solid fa-xmark text-[10px]"})})]},be)),S.jsx("button",{onClick:()=>mn("tw"),className:"text-[11px] font-bold text-[#3DF2BC] bg-[#1A1D23] border border-dashed border-[#3DF2BC]/30 w-full py-2 rounded-lg hover:bg-[#3DF2BC]/10 transition-colors",children:"+ Add TW Bank Account"})]})]})]}),S.jsxs("div",{className:"space-y-2 pt-2",children:[S.jsxs("div",{className:"text-[11px] font-black text-[#DEE0E3] uppercase flex items-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-piggy-bank"})," Hong Kong (HKD)"]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsxs("div",{className:"col-span-1",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-0.5",children:"FPS"}),S.jsx("input",{type:"text",className:"w-full bg-[#1A1D23] border border-[#2A2D33] rounded-lg px-2 py-1.5 text-sm text-[#E0E6ED] focus:ring-2 focus:ring-[#3df2bc] outline-none placeholder:text-[#707A8A]",defaultValue:((Z=(z=x.paymentDetails)==null?void 0:z.hkd)==null?void 0:Z.fpsTel)||"",placeholder:"Tel...",id:`fps-tel-${x.id}`})]}),S.jsxs("div",{className:"col-span-1",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block mb-0.5",children:"PayMe"}),S.jsx("input",{type:"text",className:"w-full bg-[#1A1D23] border border-[#2A2D33] rounded-lg px-2 py-1.5 text-sm text-[#E0E6ED] focus:ring-2 focus:ring-[#3df2bc] outline-none placeholder:text-[#707A8A]",defaultValue:((he=(de=x.paymentDetails)==null?void 0:de.hkd)==null?void 0:he.paymeTel)||"",placeholder:"Tel...",id:`payme-tel-${x.id}`})]}),S.jsxs("div",{className:"col-span-2 space-y-2",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block",children:"Bank Accounts"}),ht.map((Je,be)=>S.jsxs("div",{className:"space-y-1 p-1.5 bg-[#1A1D23] rounded-lg border border-[#2A2D33] shadow-sm relative group",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[S.jsx("input",{type:"text",className:"w-full bg-[#0B0E14] border-0 rounded-lg px-2 py-1.5 text-sm text-[#E0E6ED] focus:ring-2 focus:ring-[#3df2bc] outline-none placeholder:text-[#707A8A]",value:Je.bankName,placeholder:"Bank (e.g. HSBC)",onChange:$e=>bi("hk",be,"bankName",$e.target.value)}),S.jsx("input",{type:"text",className:"w-full bg-[#0B0E14] border-0 rounded-lg px-2 py-1.5 text-sm text-[#E0E6ED] focus:ring-2 focus:ring-[#3df2bc] outline-none placeholder:text-[#707A8A]",value:Je.accountNo,placeholder:"Account Number",onChange:$e=>bi("hk",be,"accountNo",$e.target.value)})]}),S.jsx("button",{onClick:()=>wt("hk",be),className:"absolute -top-2 -right-2 w-5 h-5 bg-[#FF3131] text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:S.jsx("i",{className:"fa-solid fa-xmark text-[10px]"})})]},be)),S.jsx("button",{onClick:()=>mn("hk"),className:"text-[11px] font-bold text-[#3df2bc] bg-[#1A1D23] border border-dashed border-[#3df2bc]/30 w-full py-2 rounded-lg hover:bg-[#3df2bc]/10 transition-colors",children:"+ Add HK Bank Account"})]})]})]}),S.jsxs("div",{className:"space-y-2 pt-2",children:[S.jsxs("div",{className:"text-[11px] font-black text-[#E0E6ED] uppercase flex items-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-globe"})," Other Currencies"]}),S.jsxs("div",{className:"col-span-2 space-y-2",children:[S.jsx("label",{className:"text-[11px] font-bold text-[#707A8A] uppercase block",children:"Bank Accounts (JPY, USD, etc.)"}),Rn.map((Je,be)=>S.jsxs("div",{className:"space-y-1 p-1.5 bg-[#1A1D23] rounded-lg border border-[#2A2D33] shadow-sm relative group",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[S.jsx("input",{type:"text",className:"w-full bg-[#0B0E14] border-0 rounded-lg px-2 py-1.5 text-sm text-[#E0E6ED] focus:ring-2 focus:ring-[#3df2bc] outline-none placeholder:text-[#707A8A]",value:Je.bankName,placeholder:"Bank/Currency (e.g. JPY - Rakuten)",onChange:$e=>bi("other",be,"bankName",$e.target.value)}),S.jsx("input",{type:"text",className:"w-full bg-[#0B0E14] border-0 rounded-lg px-2 py-1.5 text-sm text-[#E0E6ED] focus:ring-2 focus:ring-[#3df2bc] outline-none placeholder:text-[#707A8A]",value:Je.accountNo,placeholder:"Account Number",onChange:$e=>bi("other",be,"accountNo",$e.target.value)})]}),S.jsx("button",{onClick:()=>wt("other",be),className:"absolute -top-2 -right-2 w-5 h-5 bg-[#FF3131] text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:S.jsx("i",{className:"fa-solid fa-xmark text-[10px]"})})]},be)),S.jsx("button",{onClick:()=>mn("other"),className:"text-[11px] font-bold text-[#E0E6ED] bg-[#1A1D23] border border-dashed border-[#707A8A]/30 w-full py-2 rounded-lg hover:bg-[#707A8A]/10 transition-colors",children:"+ Add Other Bank Account"})]})]}),S.jsxs("div",{className:"flex gap-2 pt-2",children:[S.jsx(en,{onClick:()=>I(null),variant:"secondary",className:"flex-1 h-10 text-sm",children:"Cancel"}),S.jsx(en,{onClick:()=>{const Je={linePay:ie,ipass:Se,banks:V.filter(Mt=>Mt.accountNo.trim()!=="")},be={fpsTel:document.getElementById(`fps-tel-${x.id}`).value,paymeTel:document.getElementById(`payme-tel-${x.id}`).value,banks:ht.filter(Mt=>Mt.accountNo.trim()!=="")},$e={banks:Rn.filter(Mt=>Mt.accountNo.trim()!=="")};Lu(x.id,{paymentDetails:{twd:Je,hkd:be,other:$e}}),I(null)},variant:"success",className:"flex-2 h-10 text-lg px-8",children:"Save Setup"})]})]}):S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("div",{className:"text-[12px] font-bold text-[#707A8A] uppercase tracking-widest",children:"Collection Info"}),S.jsxs("button",{onClick:()=>qt(x),className:"text-[12px] font-black text-[#3df2bc] bg-[#3df2bc]/10 px-2.5 py-1 rounded-lg flex items-center gap-1.5 hover:bg-[#3df2bc]/20 transition-colors",children:[S.jsx("i",{className:"fa-solid fa-pen"})," Edit"]})]}),S.jsx("div",{className:"grid grid-cols-1 gap-2",children:!x.paymentDetails||Object.keys(((te=x.paymentDetails)==null?void 0:te.twd)||{}).every(Je=>{var be,$e;return!(($e=(be=x.paymentDetails)==null?void 0:be.twd)!=null&&$e[Je])})&&Object.keys(((pe=x.paymentDetails)==null?void 0:pe.hkd)||{}).every(Je=>{var be,$e;return!(($e=(be=x.paymentDetails)==null?void 0:be.hkd)!=null&&$e[Je])})&&Object.keys(((He=x.paymentDetails)==null?void 0:He.other)||{}).every(Je=>{var be,$e;return!(($e=(be=x.paymentDetails)==null?void 0:be.other)!=null&&$e[Je])})&&!((Tt=x.paymentDetails.twd)!=null&&Tt.linePay)&&!((In=x.paymentDetails.twd)!=null&&In.ipass)?S.jsx("div",{className:"text-center py-4 bg-[#0B0E14] border border-dashed border-[#2A2D33] rounded-xl text-[#707A8A] text-[12px] italic",children:"No collection methods set. Tap Edit."}):S.jsxs(S.Fragment,{children:[x.paymentDetails.twd&&(x.paymentDetails.twd.linePay||x.paymentDetails.twd.ipass||x.paymentDetails.twd.banks&&x.paymentDetails.twd.banks.length>0)&&S.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[S.jsx("span",{className:"text-[12px] font-black text-[#DEE0E3] uppercase w-full",children:"TWD:"}),x.paymentDetails.twd.linePay&&S.jsx("span",{className:"text-[13px] font-bold bg-[#5bf23d]/10 text-[#5bf23d] px-2 py-0.5 rounded-full border border-[#5bf23d]/20",children:"Line Pay"}),x.paymentDetails.twd.ipass&&S.jsx("span",{className:"text-[13px] font-bold bg-[#5BF23D]/10 text-[#5bf23d] px-2 py-0.5 rounded-full border border-[#5bf23d]/20",children:"iPass"}),(wn=x.paymentDetails.twd.banks)==null?void 0:wn.map((Je,be)=>S.jsx("span",{className:"text-[13px] font-bold bg-[#1A1D23] text-[#E0E6ED] px-2 py-0.5 rounded-full border border-[#2A2D33]",children:Je.bankName||"Bank"},be))]}),x.paymentDetails.hkd&&(x.paymentDetails.hkd.fpsTel||x.paymentDetails.hkd.paymeTel||x.paymentDetails.hkd.banks&&x.paymentDetails.hkd.banks.length>0)&&S.jsxs("div",{className:"flex flex-wrap gap-2 items-center pt-1 border-t border-[#2A2D33] mt-1",children:[S.jsx("span",{className:"text-[12px] font-black text-[#DEE0E3] uppercase w-full",children:"HKD:"}),x.paymentDetails.hkd.fpsTel&&S.jsx("span",{className:"text-[13px] font-bold bg-[#4096F7]/10 text-[#4096F7] px-2 py-0.5 rounded-full border border-[#4096F7]/20",children:"FPS"}),x.paymentDetails.hkd.paymeTel&&S.jsx("span",{className:"text-[13px] font-bold bg-[#FF3131]/10 text-[#FF3131] px-2 py-0.5 rounded-full border border-[#FF3131]/20",children:"PayMe"}),(Mn=x.paymentDetails.hkd.banks)==null?void 0:Mn.map((Je,be)=>S.jsx("span",{className:"text-[13px] font-bold bg-[#1A1D23] text-[#E0E6ED] px-2 py-0.5 rounded-full border border-[#2A2D33]",children:Je.bankName||"Bank"},be))]}),x.paymentDetails.other&&x.paymentDetails.other.banks&&x.paymentDetails.other.banks.length>0&&S.jsxs("div",{className:"flex flex-wrap gap-2 items-center pt-1 border-t border-[#2A2D33] mt-1",children:[S.jsx("span",{className:"text-[12px] font-black text-[#9B59B6] uppercase w-full",children:"OTHER:"}),(Qn=x.paymentDetails.other.banks)==null?void 0:Qn.map((Je,be)=>S.jsx("span",{className:"text-[13px] font-bold bg-[#1A1D23] text-[#E0E6ED] px-2 py-0.5 rounded-full border border-[#2A2D33]",children:Je.bankName||"Bank"},be))]})]})})]})]},x.id)})})]}),le==="members"&&S.jsxs("div",{className:"space-y-6",children:[S.jsxs(Jn,{children:[S.jsxs("h3",{className:"font-bold text-[#E0E6ED] mb-4 flex items-center gap-2",children:[S.jsx("i",{className:"fa-solid fa-user-plus text-[#3df2bc]"})," Add Member"]}),S.jsx("input",{placeholder:"Enter name...",className:"w-full px-3 py-2 bg-[#0B0E14] border border-[#2A2D33] rounded-lg outline-none focus:ring-2 focus:ring-[#3df2bc] text-[#E0E6ED] placeholder:text-[#707A8A]",onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),lo(x.currentTarget.value),x.currentTarget.value="")}})]}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("h3",{className:"font-bold text-[#E0E6ED] px-1 text-lg uppercase tracking-widest flex justify-between items-center",children:[S.jsx("span",{children:""}),S.jsxs("span",{className:"text-[12px] text-[#707A8A]",children:[h.length," Active"]})]}),h.length===0?S.jsx("p",{className:"text-center py-10 text-[#707A8A] text-lg",children:"No members added"}):h.map(x=>{const Y=M.find(z=>z.name.toLowerCase()===x.name.toLowerCase()),P=!!Y;return S.jsxs("div",{className:"flex justify-between items-center p-4 bg-[#1A1D23] rounded-xl border border-[#2A2D33] shadow-sm overflow-hidden",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[Y!=null&&Y.image?S.jsx("img",{src:Y.image,alt:x.name,className:"w-10 h-10 rounded-full object-cover border-2 border-[#FFD700]"}):S.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black ${P?"bg-[#FFD700]/20 text-[#FFD700] border-2 border-[#FFD700]":"bg-[#3df2bc]/10 text-[#3df2bc]"}`,children:x.name.charAt(0).toUpperCase()}),S.jsxs("div",{children:[S.jsxs("span",{className:"font-bold text-[#E0E6ED] block flex items-center gap-1.5",children:[x.name,P&&S.jsx("i",{className:"fa-solid fa-star text-[#FFD700] text-[13px]"})]}),S.jsx("span",{className:`text-[12px] uppercase font-bold tracking-tighter ${P?"text-[#FFD700]":"text-[#707A8A]"}`,children:P?"VIP Member":"Participant"})]})]}),S.jsx("div",{className:"flex items-center gap-1",children:S.jsx("button",{onClick:()=>gr(x.id),className:"text-[#707A8A] hover:text-[#FF3131] transition-colors px-2 py-1",children:S.jsx("i",{className:"fa-solid fa-trash-can"})})})]},x.id)})]}),S.jsx("div",{className:"pt-8 border-t border-[#2A2D33]",children:S.jsxs(en,{onClick:()=>Oo(c.id),variant:"danger",className:"w-full h-12",children:[S.jsx("i",{className:"fa-solid fa-trash"}),"  (Delete)"]})})]})]}),S.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-[#1A1D23] border-t border-[#2A2D33] z-40 shadow-[0_-4px_20px_rgba(0,0,0,0.3)]",children:S.jsxs("div",{className:"w-full max-w-6xl mx-auto px-6 py-4 flex justify-around items-center",children:[S.jsx(za,{active:le==="expenses",onClick:()=>X("expenses"),icon:"fa-receipt",label:"Bills"}),S.jsx(za,{active:le==="summary",onClick:()=>X("summary"),icon:"fa-scale-balanced",label:"Status"}),S.jsx(za,{active:le==="individual",onClick:()=>X("individual"),icon:"fa-wallet",label:"Wallet"}),S.jsx(za,{active:le==="members",onClick:()=>X("members"),icon:"fa-user-group",label:"Members"})]})})]})})},za=({active:t,onClick:e,icon:n,label:o})=>S.jsxs("button",{onClick:e,className:`flex flex-col items-center gap-1.5 transition-all flex-1 ${t?"text-[#3df2bc]":"text-[#707A8A]"}`,children:[S.jsx("div",{className:`p-2 rounded-xl transition-all ${t?"bg-[#3df2bc]/10":"bg-transparent"}`,children:S.jsx("i",{className:`fa-solid ${n} text-lg`})}),S.jsx("span",{className:`text-[12px] font-black uppercase tracking-tight ${t?"opacity-100":"opacity-60"}`,children:o})]}),kU=({expense:t,participants:e,onToggleSettlement:n,onDelete:o,onEdit:l})=>{const a=e.find(m=>m.id===t.payerId),c=t.amount/t.participants.length,h=t.currency!=="HKD",g=t.currency==="HKD"?"HK$":t.currency==="TWD"?"NT$":t.currency;return S.jsxs(Jn,{className:"relative group overflow-hidden border-l-4 border-l-[#3df2bc] !p-3 hover:bg-[#0B0E14] transition-colors cursor-pointer",onClick:()=>l(t),children:[S.jsxs("div",{className:"pr-8 mb-2",children:[S.jsxs("h4",{className:"font-bold text-[#E0E6ED] leading-tight text-lg flex items-center gap-2",children:[t.description,S.jsx("i",{className:"fa-solid fa-pen-to-square text-[12px] text-[#707A8A] group-hover:text-[#3df2bc]"})]}),S.jsxs("p",{className:"text-[13px] text-[#707A8A] mt-1 uppercase font-bold tracking-tighter",children:["Payer: ",S.jsx("span",{className:"text-[#3df2bc]",children:(a==null?void 0:a.name)||"Unknown"}),"  ",new Date(t.date).toLocaleDateString()]}),S.jsx("div",{className:"font-black text-[#E0E6ED] text-lg mt-2",children:h?`${parseFloat(t.amount.toFixed(2))} ${t.currency}`:`HK$${parseFloat(t.amount.toFixed(2))}`})]}),S.jsx("div",{className:"flex flex-wrap gap-1 mt-2 pt-2 border-t border-[#2A2D33]",children:t.participants.map(m=>{const _=e.find(E=>E.id===m.userId),v=m.userId===t.payerId;return S.jsxs("button",{onClick:E=>{E.stopPropagation(),v||n(t.id,m.userId)},className:`text-[12px] px-1.5 py-0.5 rounded-md font-bold uppercase tracking-tighter flex items-center gap-1 transition-all
                ${v?"bg-[#3df2bc] text-[#0B0E14] cursor-default":m.hasPaidBack?"bg-[#3df2bc] text-[#0B0E14]":"bg-[#0B0E14] text-[#707A8A] border border-[#2A2D33]"}
              `,children:[_==null?void 0:_.name," ",m.hasPaidBack?S.jsx("i",{className:"fa-solid fa-check text-[6px]"}):!v&&S.jsx("i",{className:"fa-solid fa-clock text-[6px]"})]},m.userId)})}),S.jsxs("div",{className:"mt-2 text-[12px] text-[#707A8A] font-bold uppercase text-right",children:["Split: ",g,c.toFixed(1)," / pp"]}),S.jsx("button",{onClick:m=>{m.stopPropagation(),o(t.id)},className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 p-1.5 text-[#707A8A] hover:text-[#FF3131] transition-opacity z-10",children:S.jsx("i",{className:"fa-solid fa-trash-can text-[12px]"})})]})},qT=document.getElementById("root");if(!qT)throw new Error("Could not find root element to mount to");const LU=cA.createRoot(qT);LU.render(S.jsx(nA.StrictMode,{children:S.jsx(UU,{})}));
